<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Redash Eating Disk Space - Usage Support - Redash Discourse</title>
    <meta name="description" content="Hi ,we are using redash version redash:9.0.0-beta.b42121 using docker-compose and redsah continue to fill the disk despite passing all the environment variables required for clearing the disk, can someone help. 
Below ar&amp;hellip;">
    <meta name="generator" content="Discourse 3.2.0.beta2-dev - https://github.com/discourse/discourse version 83621ccbe797223b48b624b00ef04f24672e1f03">
<link rel="icon" type="image/png" href="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/1X/01e20869afc0877e3e5aee0f94419b9e9bffa961_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/1X/e1838a8a0c506503a22e0c60e2334374b2895c87_2_180x180.png">
<meta name="theme-color" media="all" content="#ffffff">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="https://discuss.redash.io/t/redash-eating-disk-space/10490" />

<link rel="search" type="application/opensearchdescription+xml" href="https://discuss.redash.io/opensearch.xml" title="Redash Discourse Search">

    <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/color_definitions_base__2_8fd59ae1f286f43b3ff17996df07ea951685249d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" class="light-scheme"/>

  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/desktop_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="desktop"  />



  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/checklist_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="checklist"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/discourse-adplugin_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="discourse-adplugin"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/discourse-akismet_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="discourse-akismet"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/discourse-cakeday_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="discourse-cakeday"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/discourse-chat-integration_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="discourse-chat-integration"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/discourse-details_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="discourse-details"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/discourse-footnote_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="discourse-footnote"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/discourse-lazy-videos_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/discourse-local-dates_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/discourse-narrative-bot_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/discourse-presence_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="discourse-presence"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/discourse-solved_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="discourse-solved"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/discourse-spoiler-alert_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="discourse-spoiler-alert"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/hosted-site_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="hosted-site"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/poll_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="poll"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/poll_desktop_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/desktop_theme_2_be4cb2b86ec06123c5e974acd20fd933d14b129d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2" data-theme-name="default"/>

    
    <meta id="data-ga-universal-analytics" data-tracking-code="UA-47088186-6" data-json="{&quot;cookieDomain&quot;:&quot;auto&quot;}" data-auto-link-domains="">

  <link rel="preload" href="https://global.discourse-cdn.com/standard17/assets/google-universal-analytics-v3-08add7ec997ab472fcd9f821d32ff7caf4b8b9a5de2ec18ca723a040be07a098.gz.js" as="script">
<script defer src="https://global.discourse-cdn.com/standard17/assets/google-universal-analytics-v3-08add7ec997ab472fcd9f821d32ff7caf4b8b9a5de2ec18ca723a040be07a098.gz.js"></script>


        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;Redash Eating Disk Space&#39;" href="https://discuss.redash.io/t/redash-eating-disk-space/10490.rss" />
    <meta property="og:site_name" content="Redash Discourse" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/e1838a8a0c506503a22e0c60e2334374b2895c87.png" />
<meta property="og:image" content="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/e1838a8a0c506503a22e0c60e2334374b2895c87.png" />
<meta property="og:url" content="https://discuss.redash.io/t/redash-eating-disk-space/10490" />
<meta name="twitter:url" content="https://discuss.redash.io/t/redash-eating-disk-space/10490" />
<meta property="og:title" content="Redash Eating Disk Space" />
<meta name="twitter:title" content="Redash Eating Disk Space" />
<meta property="og:description" content="Hi ,we are using redash version redash:9.0.0-beta.b42121 using docker-compose and redsah continue to fill the disk despite passing all the environment variables required for clearing the disk, can someone help.  Below are the env varibales we are using  REDASH_QUERY_RESULTS_CLEANUP_ENABLED=true  REDASH_QUERY_RESULTS_CLEANUP_COUNT=10000  REDASH_QUERY_RESULTS_CLEANUP_MAX_AGE=2" />
<meta name="twitter:description" content="Hi ,we are using redash version redash:9.0.0-beta.b42121 using docker-compose and redsah continue to fill the disk despite passing all the environment variables required for clearing the disk, can someone help.  Below are the env varibales we are using  REDASH_QUERY_RESULTS_CLEANUP_ENABLED=true  REDASH_QUERY_RESULTS_CLEANUP_COUNT=10000  REDASH_QUERY_RESULTS_CLEANUP_MAX_AGE=2" />
<meta property="og:article:section" content="Support" />
<meta property="og:article:section:color" content="BF1E2E" />
<meta property="og:article:section" content="Usage Support" />
<meta property="og:article:section:color" content="AB9364" />
<meta property="article:published_time" content="2022-05-17T16:27:36+00:00" />
<meta property="og:ignore_canonical" content="true" />


    <script type="application/ld+json">{"@context":"http://schema.org","@type":"QAPage","name":"Redash Eating Disk Space","mainEntity":{"@type":"Question","name":"Redash Eating Disk Space","text":"Hi ,we are using redash version redash:9.0.0-beta.b42121 using docker-compose and redsah continue to fill the disk despite passing all the environment variables required for clearing the disk, can someone help.\n\nBelow are the env varibales we are using\n\nREDASH_QUERY_RESULTS_CLEANUP_ENABLED=true\n\nRED&hellip;","upvoteCount":0,"answerCount":0,"dateCreated":"2022-05-17T16:27:36.559Z","author":{"@type":"Person","name":"Anil Mehta"}}}</script>
  </head>
  <body class="crawler ">
    
    <header>
  <a href="/">
    Redash Discourse
  </a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="/t/redash-eating-disk-space/10490">Redash Eating Disk Space</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://discuss.redash.io/c/support/6" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #BF1E2E'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Support</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://discuss.redash.io/c/support/support-usage/10" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #AB9364'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Usage Support</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='Redash Eating Disk Space'>
        <meta itemprop='articleSection' content='Usage Support'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='Redash Discourse'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/c07bc573841e1e4a0013ea3b6fe088a1534228a3.png'>
          </div>
      </div>

          <div id='post_1'  class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://discuss.redash.io/u/anil'><span itemprop='name'>anil</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://discuss.redash.io/t/redash-eating-disk-space/10490">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2022-05-17T16:27:36Z' class='post-time'>
                    May 17, 2022,  4:27pm
                  </time>
                  <meta itemprop='dateModified' content='2022-05-17T16:27:36Z'>
              <span itemprop='position'>1</span>
              </span>
            </div>
            <div class='post' itemprop='articleBody'>
              <p>Hi ,we are using redash version redash:9.0.0-beta.b42121 using docker-compose and redsah continue to fill the disk despite passing all the environment variables required for clearing the disk, can someone help.<br>
Below are the env varibales we are using</p>
<p>REDASH_QUERY_RESULTS_CLEANUP_ENABLED=true</p>
<p>REDASH_QUERY_RESULTS_CLEANUP_COUNT=10000</p>
<p>REDASH_QUERY_RESULTS_CLEANUP_MAX_AGE=2</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="0" />
              </div>

          </div>
          <div id='post_2' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://discuss.redash.io/u/jesse'><span itemprop='name'>jesse</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://discuss.redash.io/t/redash-eating-disk-space/10490">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2022-05-17T17:47:10Z' class='post-time'>
                    May 17, 2022,  5:47pm
                  </time>
                  <meta itemprop='dateModified' content='2022-05-17T17:47:10Z'>
              <span itemprop='position'>2</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Welcome to the forum.</p>
<p>There is an open question as to whether we have an issue in V9 + V10 with maintenance tasks not running on schedule. There is an in-depth discussion of this <a href="http://discuss.redash.io/t/maintenance-is-not-running/10115/12">here</a>. To see whether this affects you, can you examine your docker logs to see if the cleanup job is running at all?</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="1" />
              </div>

          </div>
          <div id='post_3' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://discuss.redash.io/u/jesse'><span itemprop='name'>jesse</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://discuss.redash.io/t/redash-eating-disk-space/10490">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2022-05-17T17:49:06Z' class='post-time'>
                    May 17, 2022,  5:49pm
                  </time>
                  <meta itemprop='dateModified' content='2022-05-17T17:49:06Z'>
              <span itemprop='position'>3</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>It’s also possible a form of this bug is at play: <a href="http://discuss.redash.io/t/redash-events-table-missing-from-version-9-beta/8929/13" class="inline-onebox">Redash events table missing from version 9 beta - #13 by dgho6348</a></p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="1" />
              </div>

          </div>
          <div id='post_4' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://discuss.redash.io/u/anil'><span itemprop='name'>anil</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://discuss.redash.io/t/redash-eating-disk-space/10490">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2022-05-18T17:35:43Z' class='post-time'>
                    May 18, 2022,  5:35pm
                  </time>
                  <meta itemprop='dateModified' content='2022-05-18T17:58:18Z'>
              <span itemprop='position'>4</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>So can you suggest what can be a possible solution for this , or should we upgrade it V10 , also if we need to upgrade , can you share the upgrade steps from beta to stable release.</p>
<p>I am getting below in docker logs:</p>
<pre><code class="lang-auto">worker_1            | [2022-05-18 17:09:27,503][PID:3257][INFO][rq.worker] Result is kept for 120 seconds
worker_1            | [2022-05-18 17:09:37,474][PID:17][INFO][rq.worker] periodic: e27209059575fcc17c527c47d0957cb21756e551
worker_1            | [2022-05-18 17:09:37,481][PID:3258][INFO][rq.job.redash.tasks.queries.maintenance] job.func_name=redash.tasks.queries.maintenance.cleanup_query_results job.id=e27209059575fcc17c527c47d0957cb21756e551 Running query results clean up (removing maximum of 10000 unused results, that are 2 days old or more)
worker_1            | [2022-05-18 17:09:37,609][PID:3258][INFO][rq.job.redash.tasks.queries.maintenance] job.func_name=redash.tasks.queries.maintenance.cleanup_query_results job.id=e27209059575fcc17c527c47d0957cb21756e551 Deleted 32 unused query results.
scheduled_worker_1  | [2022-05-18 17:17:30,284][PID:2201][INFO][root] Updated 1 queries with result (f7d299a3f28039e90eede2be622316e1).
</code></pre>
<p><code>worker_1            | [2022-05-18 17:29:38,751][PID:3696][INFO][rq.job.redash.tasks.queries.maintenance] job.func_name=redash.tasks.queries.maintenance.cleanup_query_results job.id=e27209059575fcc17c527c47d0957cb21756e551 Deleted 31 unused query results.</code></p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="1" />
              </div>

          </div>
          <div id='post_5' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://discuss.redash.io/u/jesse'><span itemprop='name'>jesse</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://discuss.redash.io/t/redash-eating-disk-space/10490">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2022-05-19T22:42:11Z' class='post-time'>
                    May 19, 2022, 10:42pm
                  </time>
                  <meta itemprop='dateModified' content='2022-05-19T22:42:11Z'>
              <span itemprop='position'>5</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>First, it looks like the cleanup job is working as expected. It’s removing unused results.</p>
<p>Which begs the question: what is growing the disk usage and is that normal? How many queries are you running regularly? Is it the <code>query_results</code> table that grows? What I’m getting at is there are use cases of Redash where you would expect to see the disk space to grow: i.e. if you are running more and larger queries that return many thousands of rows.</p>
<p>While I usually recommend upgrading, I don’t believe that doing so will “fix” this because it’s not clear if we have a problem or not. If you want to upgrade there are detailed instructions on github under our releases section here: <a href="https://github.com/getredash/redash/releases/tag/v10.1.0" class="inline-onebox">Release v10.1.0 · getredash/redash · GitHub</a></p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="1" />
              </div>

          </div>
          <div id='post_6' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://discuss.redash.io/u/anil'><span itemprop='name'>anil</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://discuss.redash.io/t/redash-eating-disk-space/10490">

                <link itemprop="image" href="https://global.discourse-cdn.com/standard17/uploads/redash1/original/2X/b/b396b0c1dc66f76f939fd808c0c0daffb7ee0e26.jpeg">

              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2022-05-23T18:07:28Z' class='post-time'>
                    May 23, 2022,  6:07pm
                  </time>
                  <meta itemprop='dateModified' content='2022-05-23T18:07:28Z'>
              <span itemprop='position'>6</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>yes its the query_results table thats keep growing, cant figure out why it keeps on growing if the clean up job is working fine !</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="https://global.discourse-cdn.com/standard17/uploads/redash1/original/2X/b/b396b0c1dc66f76f939fd808c0c0daffb7ee0e26.jpeg" data-download-href="/uploads/short-url/pCIjQbAVPVwcn1DFWTbvu9tbLFA.jpeg?dl=1" title="image" rel="noopener nofollow ugc"><img src="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/2X/b/b396b0c1dc66f76f939fd808c0c0daffb7ee0e26_2_690x175.jpeg" alt="image" data-base62-sha1="pCIjQbAVPVwcn1DFWTbvu9tbLFA" width="690" height="175" srcset="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/2X/b/b396b0c1dc66f76f939fd808c0c0daffb7ee0e26_2_690x175.jpeg, https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/2X/b/b396b0c1dc66f76f939fd808c0c0daffb7ee0e26_2_1035x262.jpeg 1.5x, https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/2X/b/b396b0c1dc66f76f939fd808c0c0daffb7ee0e26_2_1380x350.jpeg 2x" data-small-upload="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/2X/b/b396b0c1dc66f76f939fd808c0c0daffb7ee0e26_2_10x10.png"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">2064×524 65 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="1" />
              </div>

          </div>
          <div id='post_7' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://discuss.redash.io/u/jesse'><span itemprop='name'>jesse</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://discuss.redash.io/t/redash-eating-disk-space/10490">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2022-05-23T18:09:15Z' class='post-time'>
                    May 23, 2022,  6:09pm
                  </time>
                  <meta itemprop='dateModified' content='2022-05-23T18:09:15Z'>
              <span itemprop='position'>7</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Yikes.</p>
<p>What about the other questions? Are you actually pulling that much data on a regular basis?</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="1" />
              </div>

          </div>
          <div id='post_8' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://discuss.redash.io/u/anil'><span itemprop='name'>anil</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://discuss.redash.io/t/redash-eating-disk-space/10490">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2022-05-23T18:12:38Z' class='post-time'>
                    May 23, 2022,  6:12pm
                  </time>
                  <meta itemprop='dateModified' content='2022-05-23T18:12:38Z'>
              <span itemprop='position'>8</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>yes , the  usage is pretty high but considering the value we set for the below variable, the size of data is pretty unusual!<br>
REDASH_QUERY_RESULTS_CLEANUP_MAX_AGE=2</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="1" />
              </div>

          </div>
          <div id='post_9' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://discuss.redash.io/u/jesse'><span itemprop='name'>jesse</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://discuss.redash.io/t/redash-eating-disk-space/10490">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2022-05-23T18:13:29Z' class='post-time'>
                    May 23, 2022,  6:13pm
                  </time>
                  <meta itemprop='dateModified' content='2022-05-23T18:14:23Z'>
              <span itemprop='position'>9</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Not really, since it cleans up <em>unused</em> query results. If you’re actually using all those query results then it’s not going to affect them.</p>
<p>i.e. here’s the job description directly from the source code:</p>
<pre><code class="lang-auto">def cleanup_query_results():
    """
    Job to cleanup unused query results -- such that no query links to them anymore, and older than
    settings.QUERY_RESULTS_CLEANUP_MAX_AGE (a week by default, so it's less likely to be open in someone's browser and be used).

    Each time the job deletes only settings.QUERY_RESULTS_CLEANUP_COUNT (100 by default) query results so it won't choke
    the database in case of many such results.
    """
</code></pre>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="1" />
              </div>

          </div>
          <div id='post_10' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://discuss.redash.io/u/anil'><span itemprop='name'>anil</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://discuss.redash.io/t/redash-eating-disk-space/10490">

                <link itemprop="image" href="https://global.discourse-cdn.com/standard17/uploads/redash1/original/2X/6/6ae0ba77ec2372c07422ae4f4edf07f1cee7cd06.jpeg">

              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2022-05-23T18:23:14Z' class='post-time'>
                    May 23, 2022,  6:23pm
                  </time>
                  <meta itemprop='dateModified' content='2022-05-23T18:23:14Z'>
              <span itemprop='position'>10</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>i can still see the older data in it , by checking the <strong>retrieved_at</strong> column in the redash DB</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="https://global.discourse-cdn.com/standard17/uploads/redash1/original/2X/6/6ae0ba77ec2372c07422ae4f4edf07f1cee7cd06.jpeg" data-download-href="/uploads/short-url/ffu5APMO7DB5YljVkOH23xJvkKq.jpeg?dl=1" title="image" rel="noopener nofollow ugc"><img src="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/2X/6/6ae0ba77ec2372c07422ae4f4edf07f1cee7cd06_2_252x500.jpeg" alt="image" data-base62-sha1="ffu5APMO7DB5YljVkOH23xJvkKq" width="252" height="500" srcset="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/2X/6/6ae0ba77ec2372c07422ae4f4edf07f1cee7cd06_2_252x500.jpeg, https://global.discourse-cdn.com/standard17/uploads/redash1/original/2X/6/6ae0ba77ec2372c07422ae4f4edf07f1cee7cd06.jpeg 1.5x, https://global.discourse-cdn.com/standard17/uploads/redash1/original/2X/6/6ae0ba77ec2372c07422ae4f4edf07f1cee7cd06.jpeg 2x" data-small-upload="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/2X/6/6ae0ba77ec2372c07422ae4f4edf07f1cee7cd06_2_10x10.png"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">340×674 29.4 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="1" />
              </div>

          </div>
          <div id='post_11' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://discuss.redash.io/u/jesse'><span itemprop='name'>jesse</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://discuss.redash.io/t/redash-eating-disk-space/10490">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2022-05-23T18:39:12Z' class='post-time'>
                    May 23, 2022,  6:39pm
                  </time>
                  <meta itemprop='dateModified' content='2022-05-23T18:39:12Z'>
              <span itemprop='position'>11</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p><code>retrieved_at</code> doesn’t really make a difference. See my edit above that includes the specification for the cleanup job: if the results are being referenced by an existing query they won’t be deleted no matter how old they are.</p>
<p>So I’ll ask again for the third time: are you actually pulling sizable amounts of data into Redash? Because if you are it’s not surprising that the query results table would be this large.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="0" />
              </div>

          </div>
          <div id='post_12' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://discuss.redash.io/u/anil'><span itemprop='name'>anil</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://discuss.redash.io/t/redash-eating-disk-space/10490">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2022-06-21T17:08:56Z' class='post-time'>
                    June 21, 2022,  5:08pm
                  </time>
                  <meta itemprop='dateModified' content='2022-06-21T17:11:12Z'>
              <span itemprop='position'>12</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Hi,</p>
<p><code>So I’ll ask again for the third time: are you actually pulling sizable amounts of data into Redash? Because if you are it’s not surprising that the query results table would be this large.</code></p>
<p>No, we are not fetching such a large data.</p>
<p>will running <code>vaccum full querry_results</code> help ? as i can autovaccum is set to on , but it does not release the disk space ?</p>
<p>I checked the file the table <code>querry_results</code> is writing to on the server using below querry:</p>
<p><code>select pg_relation_filepath('query_results');</code></p>
<p>but i can see the file is only 1gb in size , whereas the table size is more than 600 gb !</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="1" />
              </div>

          </div>
          <div id='post_13' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://discuss.redash.io/u/jesse'><span itemprop='name'>jesse</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://discuss.redash.io/t/redash-eating-disk-space/10490">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2022-06-22T18:06:36Z' class='post-time'>
                    June 22, 2022,  6:06pm
                  </time>
                  <meta itemprop='dateModified' content='2022-06-22T18:06:36Z'>
              <span itemprop='position'>13</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <aside class="quote no-group" data-username="anil" data-post="12" data-topic="10490">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="20" height="20" src="https://avatars.discourse-cdn.com/v4/letter/a/da6949/40.png" class="avatar"> anil:</div>
<blockquote>
<p>No, we are not fetching such a large data.</p>
</blockquote>
</aside>
<p>You need to be specific here. The only thing that makes sense from what you’ve described is that you have either lots of queries that return a small amount of data, or a few queries returning large amounts of data.</p>
<p>If you wrote that you only have five queries and they only return 5 rows of data each, then we could naturally assume there is a problem here. But you’ve written that your Redash usage is high. What does that mean? How many queries? How often do they run? Do many of your queries use parameters? How many results are on the query results table? How many queries are there in your Redash instance?</p>
<p>So far you haven’t given enough detail to determine whether your query_results table is actually a problem. In other words: it doesn’t matter if <code>query_results</code> is a large table. In isolation that can be perfectly normal. What matters is whether the size of the table conflicts with the size you <strong>expect it to be</strong>. Until we know what to expect, we can’t say the size of the table is an issue. Make sense?</p>
<p>I think before we consider whether there’s a default configuration error with Redash (pretty unlikely) we need to nail down exactly how much data do we <em>expect</em> to see on your <code>query results</code> table. This is not a hard question to answer.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="0" />
              </div>

          </div>
    </div>






    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='/guidelines' itemprop="url">FAQ/Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='http://redash.io/terms.html' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='http://redash.io/privacy.html' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
