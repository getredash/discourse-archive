<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet"/>
<link href="../../css/checklist_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_theme_2_be4cb2b86ec06123c5e974acd20fd933d14b129d.css" rel="stylesheet"/>
<link href="../../css/discourse-adplugin_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-akismet_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-cakeday_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-chat-integration_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-details_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-footnote_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-lazy-videos_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-local-dates_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/color_definitions_base__2_8fd59ae1f286f43b3ff17996df07ea951685249d.css" rel="stylesheet"/>
<link href="../../css/style.css" rel="stylesheet"/>
<title>Totally Out of My Depth - ODK Central, Redash and OData/JSON</title></head>
<body>
<div class="navbar">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<div class="navbar-buttons">
<button class="btn btn-signup">Sign Up</button>
<button class="btn btn-login"><i class="fas fa-user"></i> Login</button>
<button class="btn btn-search"><i class="fas fa-search"></i></button>
<div class="navbar-toggle">
<div class="dots"></div>
<div class="dots"></div>
<div class="dots"></div>
</div>
</div>
</div>
<div class="sidebar">
<div class="sidebar-content">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<ul class="sidebar-grid">
<!-- <li><a href="#"><i class="fas fa-list-ul"></i> Topics</a></li> -->
<li><a href="../../page_0.html"><i class="fas fa-layer-group"></i> Topics</a></li>
<li><a href="../../users.html"><i class="fas fa-users"></i> Users</a></li>
<li><a href="../../about.html"><i class="fas fa-info-circle"></i> About</a></li>
<li><a href="../../faq.html"><i class="fas fa-question-circle"></i> FAQ</a></li>
<li><a href="../../groups.html"><i class="fas fa-users"></i> Groups</a></li>
<li><a href="../../badges.html"><i class="fas fa-certificate"></i> Badges</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#categories"><span>▼</span>Categories</a></h3>
<hr/>
<ul class="sidebar-grid categories">
<li>
<a class="badge-wrapper bullet" href="../../c/support/6.html">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name">Support</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/feature-requests/5.html">
<span class="badge-category-bg" style="background-color: #3AB54A"></span>
<span class="badge-category clear-badge">
<span class="category-name">Feature Requests</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/uncategorized/1.html">
<span class="badge-category-bg" style="background-color: #AB9364"></span>
<span class="badge-category clear-badge">
<span class="category-name">Uncategorized</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/development/7.html">
<span class="badge-category-bg" style="background-color: #8C6238"></span>
<span class="badge-category clear-badge">
<span class="category-name">Development</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/tips-tricks-query-examples/11.html">
<span class="badge-category-bg" style="background-color: #652D90"></span>
<span class="badge-category clear-badge" style="white-space: normal;">
<span class="category-name">Tips, Tricks &amp; Query Examples</span>
</span>
</a>
</li>
<li><a href="../../categories.html"><i class="fas fa-list-ul"></i> All categories</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#tags"><span>▼</span>Tags</a></h3>
<hr/>
<ul class="sidebar-grid tags">
<li><a href="../../tag/query_results.html"><i class="fas fa-tag"></i> query_results</a></li>
<li><a href="../../tag/feature-request.html"><i class="fas fa-tag"></i> feature-request</a></li>
<li><a href="../../tag/parameters.html"><i class="fas fa-tag"></i> parameters</a></li>
<li><a href="../../tag/visualizations.html"><i class="fas fa-tag"></i> visualizations</a></li>
<li><a href="../../tag/alerts.html"><i class="fas fa-tag"></i> alerts</a></li>
<li><a href="../../tags.html"><i class="fas fa-list-ul"></i> All tags</a></li>
</ul>
</div>
<div class="sidebar-footer">
            © 2023 <a href="https://discuss.redash.io/" target="_blank">discuss.redash.io</a>
</div>
</div>
<div class="overlay"></div>
<div class="content">
<div class="global-notice">
<div class="row">
<div class="alert alert-info alert-read-only" id="global-notice-alert-read-only">
<span class="text">This site is in read only mode. Please continue to browse, but replying, likes,
                        and other actions are disabled for now.</span>
</div>
</div>
</div>
<div class="imported_page" id="imported_page">
<div class="wrap" id="main-outlet" role="main">
<div id="topic-title">
<h1>
<a href="/t/totally-out-of-my-depth-odk-central-redash-and-odata-json/10049">Totally Out of My Depth - ODK Central, Redash and OData/JSON</a>
</h1>
</div>
<div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
<meta content="Totally Out of My Depth - ODK Central, Redash and OData/JSON" itemprop="headline"/>
<meta content="Uncategorized" itemprop="articleSection"/>
<meta content="" itemprop="keywords"/>
<div itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
<meta content="Redash Discourse" itemprop="name"/>
<div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject">
<meta content="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/c07bc573841e1e4a0013ea3b6fe088a1534228a3.png" itemprop="url"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_1">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/mrodk.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/mrodk_avatar.png" tabindex="-1" width="48"/><span itemprop="name">mrodk</span></a>
</span>
<link href="assets/10049" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2022-02-23T14:46:25Z" itemprop="datePublished">
                    February 23, 2022,  2:46pm
                  </time>
<meta content="2022-02-23T14:46:25Z" itemprop="dateModified"/>
<span itemprop="position">1</span>
</span>
</div>
<div class="post" itemprop="articleBody">
<p>Hi, first post.  I’m testing an ODK form for gathering weather observations and want to at least start playing with the data I’m gathering.  Someone on the ODK forum had success with Redash and so have I, to some degree but I’m stuck with the query.</p>
<p>For example, for a URL query I get the following (this is a snippet):</p>
<pre><code class="lang-auto">[{"__id":"uuid:a73ebe56-3b12-43e5-ab96-f107f6f24e9d","datecompleted":"2022-02-16","username":null,"introtext":null,"temprecord":{"tempinstructions":null,"morningtemp":8,"noontemp":4,"enddaytemp":8},
</code></pre>
<p>I can then pull out values for specific fields by using:</p>
<pre><code class="lang-auto">fields: [datecompleted]
path: value
</code></pre>
<p>This returns a table with a list of dates.  Great.</p>
<p>Thing is, ODK uses something called ‘groups’ which organises surveys clearly and makes survey forms more user friendly.  Reading the raw OData stream from ODK the fields inside groups are nested (see below, ‘temprecord’ field).  Is this an array?</p>
<pre><code class="lang-auto">[{"__id":"uuid:a73ebe56-3b12-43e5-ab96-f107f6f24e9d","datecompleted":"2022-02-16","username":null,"introtext":null,"temprecord":{"tempinstructions":null,"morningtemp":8,"noontemp":4,"enddaytemp":8},
</code></pre>
<p>So, how the heck do I get the values out for those fields?!  As per the title, totally out of my depth and funnily enough I’m usually pretty good with my key words for searching for help but in this instance I’m drawing a blank.</p>
<p>Any help would be greatly appreciated - at least somewhere where some basic JSON queries are documented for me to learn!</p>
<p>Thanks.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_2" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/MathieuBossaert.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/MathieuBossaert_avatar.png" tabindex="-1" width="48"/><span itemprop="name">MathieuBossaert</span></a>
</span>
<link href="assets/10049" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2022-02-26T07:57:33Z" itemprop="datePublished">
                    February 26, 2022,  7:57am
                  </time>
<meta content="2022-02-26T07:57:33Z" itemprop="dateModified"/>
<span itemprop="position">2</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Hi <a class="mention" href="/u/mrodk">@mrodk</a></p>
<p>it looks like we both enjoy same tools !</p>
<p>I tried to directly plug redash over ODK Central’s API as described here :</p><aside class="onebox allowlistedgeneric" data-onebox-src="https://forum.getodk.org/t/first-use-of-a-central-web-form-and-basic-restitution-with-redash/30334/4">
<header class="source">
<img class="site-icon" height="32" src="https://getodk-a3b1.kxcdn.com/uploads/default/optimized/2X/d/de724a7aa74cc995fa8a210e7a5e26bba0af1fe6_2_32x32.png" width="32"/>
<a href="https://forum.getodk.org/t/first-use-of-a-central-web-form-and-basic-restitution-with-redash/30334/4" rel="noopener nofollow ugc" target="_blank" title="06:15AM - 20 October 2020">ODK Forum – 20 Oct 20</a>
</header>
<article class="onebox-body">
<div class="aspect-image" style="--aspect-ratio:690/324;"><img class="thumbnail" height="324" src="https://getodk-a3b1.kxcdn.com/uploads/default/original/2X/7/749a474139a1f41973d541514160e682d95fb74a.png" width="690"/></div>
<h3><a href="https://forum.getodk.org/t/first-use-of-a-central-web-form-and-basic-restitution-with-redash/30334/4" rel="noopener nofollow ugc" target="_blank">First use of a Central web form, and basic restitution with redash</a></h3>
<p>Hi @seadowg  Here are some screenshots.  First you need to create a data source, here a json one which just allow to pass credentials.     Over this data source I can now create a query :     I can now already create a visualization table with for...</p>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
<p>and asked a question here :</p><aside class="quote" data-post="2" data-topic="7278">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" loading="lazy" src="assets/2962_2.png" width="20"/>
<a href="http://discuss.redash.io/t/how-to-query-an-array-in-a-json-datasource/7278/2">How to query an array in a json datasource</a> <a class="badge-wrapper bullet" href="/c/support/support-usage/10"><span class="badge-category-parent-bg" style="background-color: #BF1E2E;"></span><span class="badge-category-bg" style="background-color: #AB9364;"></span><span class="badge-category clear-badge" data-drop-close="true" style="" title="Need help with using Redash? Not sure if something is possible or how to do it right? Here’s the place to ask.">Usage Support</span></a>
</div>
<blockquote>
    I don’t think the JSON data source can do this on its own. You can use QRDS for it though. For example: 
SELECT *,
       json_extract(location_coordinates, '$[0]') latitude,
       json_extract(location_coordinates, '$[1]') longitude
FROM cached_query_&lt;query id from your query&gt;

I just tested it and it worked.
  </blockquote>
</aside>
<p>In the end, since I have complex forms with repeat groups and “sub-tables”, and because I need the data in other tools like QGIS, I developed a set of function to get Central’s data into a dedicated PostgreSQL database or schema (PostgreSQL is my daily tool) :</p>
<aside class="onebox githubfolder" data-onebox-src="https://github.com/mathieubossaert/central2pg/tree/master">
<header class="source">
<img class="site-icon" height="32" src="assets/favicon.svg" width="32"/>
<a href="https://github.com/mathieubossaert/central2pg/tree/master" rel="noopener nofollow ugc" target="_blank">github.com</a>
</header>
<article class="onebox-body">
<h3><a href="https://github.com/mathieubossaert/central2pg/tree/master" rel="noopener nofollow ugc" target="_blank">GitHub - mathieubossaert/central2pg: Some PostgreSQL functions to retrieve data...</a></h3>
<p><a href="https://github.com/mathieubossaert/central2pg/tree/master" rel="noopener nofollow ugc" target="_blank">master</a></p>
<p><span class="label1">Some PostgreSQL functions to retrieve data from an ODK Central server to PostgreSQL tables. - GitHub - mathieubossaert/central2pg: Some PostgreSQL functions to retrieve data from an ODK Central ser...</span></p>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
<p>Hope that helps…</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_3" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/mrodk.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/mrodk_avatar.png" tabindex="-1" width="48"/><span itemprop="name">mrodk</span></a>
</span>
<link href="assets/10049" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2022-02-26T09:05:35Z" itemprop="datePublished">
                    February 26, 2022,  9:05am
                  </time>
<meta content="2022-02-26T09:05:35Z" itemprop="dateModified"/>
<span itemprop="position">3</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Thanks - looks great, but why do I need it? I can do the basic restitution like in your post which gets all data from the tables, so what can your script/having the data in a second database do that I can’t do with just the odata feed?</p>
<p>As per title - out of my depth!</p>
<p>Thanks again.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_4" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/MathieuBossaert.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/MathieuBossaert_avatar.png" tabindex="-1" width="48"/><span itemprop="name">MathieuBossaert</span></a>
</span>
<link href="assets/10049" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2022-02-26T11:02:35Z" itemprop="datePublished">
                    February 26, 2022, 11:02am
                  </time>
<meta content="2022-02-26T11:02:35Z" itemprop="dateModified"/>
<span itemprop="position">4</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Not sure you need it !<br/>
But if you are more comfortable WITH sql than json queries it could help.<br/>
The reason why I developed those functions is I wanted to keep my SQL routines, view s and redash Dashboards running well after I migrate from Aggegate to Central.</p>
<p>You will probably be able to perform a dashboard, even with repeat groups.<br/>
One json query per Central table, and a QRDS to join the tables and show the datas in the dashboard.</p>
<p>Please share your work on ODK’s forum too ! It would help a lot of people looking to connect a modern opensource dashboard tool to Central.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_5" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/mrodk.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/mrodk_avatar.png" tabindex="-1" width="48"/><span itemprop="name">mrodk</span></a>
</span>
<link href="assets/10049" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2022-02-26T11:24:57Z" itemprop="datePublished">
                    February 26, 2022, 11:24am
                  </time>
<meta content="2022-02-26T11:24:57Z" itemprop="dateModified"/>
<span itemprop="position">5</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Aaah got it thanks.</p>
<p>Can honestly say I’m not comfortable in either… Totally new to writing any form of query.</p>
<p>Don’t even know what a QRDS is but I’m sure I’ll find out.</p>
<p>Will definitely share any achievement but I think that may be a while away now!</p>
<p>Thanks again though - some great pointers.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_6" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/MathieuBossaert.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/MathieuBossaert_avatar.png" tabindex="-1" width="48"/><span itemprop="name">MathieuBossaert</span></a>
</span>
<link href="assets/10049" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2022-02-28T10:22:01Z" itemprop="datePublished">
                    February 28, 2022, 10:22am
                  </time>
<meta content="2022-02-28T10:30:10Z" itemprop="dateModified"/>
<span itemprop="position">6</span>
</span>
</div>
<div class="post" itemprop="text">
<aside class="quote no-group" data-post="5" data-topic="10049" data-username="mrodk">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" loading="lazy" src="https://avatars.discourse-cdn.com/v4/letter/m/5daacb/40.png" width="20"/> mrodk:</div>
<blockquote>
<p>Can honestly say I’m not comfortable in either… Totally new to writing any form of query.</p>
</blockquote>
</aside>
<p>How complex is your ODK form ?</p>
<aside class="quote no-group" data-post="5" data-topic="10049" data-username="mrodk">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" loading="lazy" src="https://avatars.discourse-cdn.com/v4/letter/m/5daacb/40.png" width="20"/> mrodk:</div>
<blockquote>
<p>Don’t even know what a QRDS is but I’m sure I’ll find out.</p>
</blockquote>
</aside>
<p>It is a “<a href="https://redash.io/help/user-guide/querying/query-results-data-source" rel="noopener nofollow ugc">Query Result Data Source</a>” in redash. Yous can then use the result of your OData request as a datasource and perform SQL queries on it.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
<span class="post-likes">1 Like</span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="overlay" id="modalOverlay" style="display: none;">
<div class="modal-content">
<p>Login or sign up disabled while the site is in read only mode</p>
<hr/>
<button class="btn btn-login">OK</button>
</div>
</div>
<script src="../../js/script.js"></script>
</body>
</html>