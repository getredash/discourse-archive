<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet"/>
<link href="../../css/checklist_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_theme_2_be4cb2b86ec06123c5e974acd20fd933d14b129d.css" rel="stylesheet"/>
<link href="../../css/discourse-adplugin_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-akismet_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-cakeday_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-chat-integration_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-details_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-footnote_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-lazy-videos_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-local-dates_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/color_definitions_base__2_8fd59ae1f286f43b3ff17996df07ea951685249d.css" rel="stylesheet"/>
<link href="../../css/style.css" rel="stylesheet"/>
<title>SAML Configuration not successful</title></head>
<body>
<div class="navbar">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<div class="navbar-buttons">
<button class="btn btn-signup">Sign Up</button>
<button class="btn btn-login"><i class="fas fa-user"></i> Login</button>
<button class="btn btn-search"><i class="fas fa-search"></i></button>
<div class="navbar-toggle">
<div class="dots"></div>
<div class="dots"></div>
<div class="dots"></div>
</div>
</div>
</div>
<div class="sidebar">
<div class="sidebar-content">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<ul class="sidebar-grid">
<!-- <li><a href="#"><i class="fas fa-list-ul"></i> Topics</a></li> -->
<li><a href="../../page_0.html"><i class="fas fa-layer-group"></i> Topics</a></li>
<li><a href="../../users.html"><i class="fas fa-users"></i> Users</a></li>
<li><a href="../../about.html"><i class="fas fa-info-circle"></i> About</a></li>
<li><a href="../../faq.html"><i class="fas fa-question-circle"></i> FAQ</a></li>
<li><a href="../../groups.html"><i class="fas fa-users"></i> Groups</a></li>
<li><a href="../../badges.html"><i class="fas fa-certificate"></i> Badges</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#categories"><span>▼</span>Categories</a></h3>
<hr/>
<ul class="sidebar-grid categories">
<li>
<a class="badge-wrapper bullet" href="../../c/support/6.html">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name">Support</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/feature-requests/5.html">
<span class="badge-category-bg" style="background-color: #3AB54A"></span>
<span class="badge-category clear-badge">
<span class="category-name">Feature Requests</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/uncategorized/1.html">
<span class="badge-category-bg" style="background-color: #AB9364"></span>
<span class="badge-category clear-badge">
<span class="category-name">Uncategorized</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/development/7.html">
<span class="badge-category-bg" style="background-color: #8C6238"></span>
<span class="badge-category clear-badge">
<span class="category-name">Development</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/tips-tricks-query-examples/11.html">
<span class="badge-category-bg" style="background-color: #652D90"></span>
<span class="badge-category clear-badge" style="white-space: normal;">
<span class="category-name">Tips, Tricks &amp; Query Examples</span>
</span>
</a>
</li>
<li><a href="../../categories.html"><i class="fas fa-list-ul"></i> All categories</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#tags"><span>▼</span>Tags</a></h3>
<hr/>
<ul class="sidebar-grid tags">
<li><a href="../../tag/query_results.html"><i class="fas fa-tag"></i> query_results</a></li>
<li><a href="../../tag/feature-request.html"><i class="fas fa-tag"></i> feature-request</a></li>
<li><a href="../../tag/parameters.html"><i class="fas fa-tag"></i> parameters</a></li>
<li><a href="../../tag/visualizations.html"><i class="fas fa-tag"></i> visualizations</a></li>
<li><a href="../../tag/alerts.html"><i class="fas fa-tag"></i> alerts</a></li>
<li><a href="../../tags.html"><i class="fas fa-list-ul"></i> All tags</a></li>
</ul>
</div>
<div class="sidebar-footer">
            © 2023 <a href="https://discuss.redash.io/" target="_blank">discuss.redash.io</a>
</div>
</div>
<div class="overlay"></div>
<div class="content">
<div class="global-notice">
<div class="row">
<div class="alert alert-info alert-read-only" id="global-notice-alert-read-only">
<span class="text">This site is in read only mode. Please continue to browse, but replying, likes,
                        and other actions are disabled for now.</span>
</div>
</div>
</div>
<div class="imported_page" id="imported_page">
<div class="wrap" id="main-outlet" role="main">
<div id="topic-title">
<h1>
<a href="/t/saml-configuration-not-successful/626">SAML Configuration not successful</a>
</h1>
<div class="topic-category" itemscope="" itemtype="http://schema.org/BreadcrumbList">
<span itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
<a class="badge-wrapper bullet" href="../../c/support/6.html" itemprop="item">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name" itemprop="name">Support</span>
</span>
</a>
<meta content="1" itemprop="position"/>
</span>
<span itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
<a class="badge-wrapper bullet" href="../../c/support/support-self-hosted/9.html" itemprop="item">
<span class="badge-category-bg" style="background-color: #AB9364"></span>
<span class="badge-category clear-badge">
<span class="category-name" itemprop="name">Self Hosted Redash Support</span>
</span>
</a>
<meta content="2" itemprop="position"/>
</span>
</div>
</div>
<div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
<meta content="SAML Configuration not successful" itemprop="headline"/>
<meta content="Self Hosted Redash Support" itemprop="articleSection"/>
<meta content="" itemprop="keywords"/>
<div itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
<meta content="Redash Discourse" itemprop="name"/>
<div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject">
<meta content="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/c07bc573841e1e4a0013ea3b6fe088a1534228a3.png" itemprop="url"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_1">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/vinothkumarsi.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/vinothkumarsi_avatar.png" tabindex="-1" width="48"/><span itemprop="name">vinothkumarsi</span></a>
</span>
<link href="https://discuss.redash.io/t/saml-configuration-not-successful/626" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2017-05-04T09:21:20Z" itemprop="datePublished">
                    May 4, 2017,  9:21am
                  </time>
<meta content="2017-05-04T09:21:20Z" itemprop="dateModified"/>
<span itemprop="position">1</span>
</span>
</div>
<div class="post" itemprop="articleBody">
<p>We were not able to do the SAML Configuration in our environment. We set all variables in the configuration still we are facing the  below issue. Please find below issue log from the server.</p>
<p>"<br/>
File “/usr/local/lib/python2.7/dist-packages/flask/app.py”, line 1544, in handle_user_exception<br/>
reraise(exc_type, exc_value, tb)<br/>
File “/usr/local/lib/python2.7/dist-packages/flask/app.py”, line 1639, in full_dispatch_request<br/>
rv = self.dispatch_request()<br/>
File “/usr/local/lib/python2.7/dist-packages/flask/app.py”, line 1625, in dispatch_request<br/>
return self.view_functions<a>rule.endpoint</a><br/>
File “/opt/redash/redash.1.0.1.b2833/redash/authentication/saml_auth.py”, line 93, in idp_initiated<br/>
name = “%s %s” % (authn_response.ava[‘FirstName’][0], authn_response.ava[‘LastName’][0])<br/>
KeyError: ‘FirstName’<br/>
[2017-05-04 07:10:09,709][PID:11799][INFO][metrics] method=POST path=/saml/callback endpoint=saml_auth.idp_initiated status=500 content_type=? content_length=-1 duration=19.01 query_count=0 query_duration=0.00<br/>
[2017-05-04 07:10:38,678][PID:11802][INFO][metrics] method=GET path=/ endpoint=redash.index status=302 content_type=text/html; charset=utf-8 content_length=289 duration=0.59 query_count=0 query_duration=0.00<br/>
[2017-05-04 07:10:39,037][PID:11802][INFO][metrics] method=GET path=/login endpoint=redash.login status=200 content_type=text/html; charset=utf-8 content_length=2313 duration=3.27 query_count=1 query_duration=0.76<br/>
[2017-05-04 07:10:39,437][PID:11796][INFO][metrics] method=GET path=/styles/superflat_redash.css endpoint=redash.send_static status=200 content_type=text/css; charset=utf-8 content_length=213822 duration=0.70 query_count=0 query_duration=0.00<br/>
[2017-05-04 07:10:39,437][PID:11802][INFO][metrics] method=GET path=/styles/redash.css endpoint=redash.send_static status=200 content_type=text/css; charset=utf-8 content_length=10622 duration=0.65 query_count=0 query_duration=0.00<br/>
[2017-05-04 07:10:39,784][PID:11793][INFO][metrics] method=GET path=/styles/login.css endpoint=redash.send_static status=200 content_type=text/css; charset=utf-8 content_length=1030 duration=0.43 query_count=0 query_duration=0.00<br/>
[2017-05-04 07:10:39,786][PID:11802][INFO][metrics] method=GET path=/js/jquery.min.js endpoint=redash.send_static status=200 content_type=application/javascript content_length=92629 duration=0.43 query_count=0 query_duration=0.00<br/>
[2017-05-04 07:10:40,486][PID:11802][INFO][metrics] method=GET path=/images/logo_white.png endpoint=redash.send_static status=200 content_type=image/png content_length=34074 duration=0.47 query_count=0 query_duration=0.00<br/>
[2017-05-04 07:10:40,554][PID:11802][INFO][metrics] method=GET path=/fonts/roboto/Roboto-Regular-webfont.woff endpoint=redash.send_static status=404 content_type=text/html content_length=233 duration=0.41 query_count=0 query_duration=0.00<br/>
[2017-05-04 07:10:40,556][PID:11802][INFO][metrics] method=GET path=/fonts/roboto/Roboto-Medium-webfont.woff endpoint=redash.send_static status=404 content_type=text/html content_length=233 duration=0.40 query_count=0 query_duration=0.00<br/>
[2017-05-04 07:10:40,907][PID:11802][INFO][metrics] method=GET path=/fonts/roboto/Roboto-Regular-webfont.ttf endpoint=redash.send_static status=404 content_type=text/html content_length=233 duration=0.44 query_count=0 query_duration=0.00<br/>
[2017-05-04 07:10:40,908][PID:11799][INFO][metrics] method=GET path=/fonts/roboto/Roboto-Medium-webfont.ttf endpoint=redash.send_static status=404 content_type=text/html content_length=233 duration=0.52 query_count=0 query_duration=0.00<br/>
[2017-05-04 07:10:41,282][PID:11799][INFO][metrics] method=GET path=/images/favicon-16x16.png endpoint=redash.send_static status=200 content_type=image/png content_length=1364 duration=0.56 query_count=0 query_duration=0.00<br/>
[2017-05-04 07:10:42,009][PID:11799][INFO][saml2.entity] REQUEST: &lt;?xml version='1.0' encoding='UTF-8'?&gt;<br/>
&lt;ns0:AuthnRequest xmlns:ns0=“urn:oasis:names:tc:SAML:2.0:protocol” xmlns:ns1=“urn:oasis:names:tc:SAML:2.0:assertion” AssertionConsumerServiceURL=“<a href="http://10.57.178.120/saml/callback" rel="nofollow noopener">http://10.57.178.120/saml/callback</a>” Destination=“<a href="https://10.236.220.174:9443/samlsso" rel="nofollow noopener">https://10.236.220.174:9443/samlsso</a>” ID=“id-F12Out4mMm1B7JXVn” IssueInstant=“2017-05-04T07:10:42Z” ProtocolBinding=“urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST” Version=“2.0”&gt;&lt;ns1:Issuer Format=“urn:oasis:names:tc:SAML:2.0:nameid-format:entity”&gt;174_dev.com&lt;/ns1:Issuer&gt;&lt;ns0:NameIDPolicy AllowCreate=“false” Format=“urn:oasis:names:tc:SAML:2.0:nameid-format:transient” /&gt;&lt;/ns0:AuthnRequest&gt;<br/>
[2017-05-04 07:10:42,009][PID:11799][INFO][saml2.client] AuthNReq: &lt;?xml version='1.0' encoding='UTF-8'?&gt;<br/>
&lt;ns0:AuthnRequest xmlns:ns0=“urn:oasis:names:tc:SAML:2.0:protocol” xmlns:ns1=“urn:oasis:names:tc:SAML:2.0:assertion” AssertionConsumerServiceURL=“<a href="http://10.57.178.120/saml/callback" rel="nofollow noopener">http://10.57.178.120/saml/callback</a>” Destination=“<a href="https://10.236.220.174:9443/samlsso" rel="nofollow noopener">https://10.236.220.174:9443/samlsso</a>” ID=“id-F12Out4mMm1B7JXVn” IssueInstant=“2017-05-04T07:10:42Z” ProtocolBinding=“urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST” Version=“2.0”&gt;&lt;ns1:Issuer Format=“urn:oasis:names:tc:SAML:2.0:nameid-format:entity”&gt;174_dev.com&lt;/ns1:Issuer&gt;&lt;ns0:NameIDPolicy AllowCreate=“false” Format=“urn:oasis:names:tc:SAML:2.0:nameid-format:transient” /&gt;&lt;/ns0:AuthnRequest&gt;<br/>
[2017-05-04 07:10:42,009][PID:11799][INFO][saml2.entity] HTTP REDIRECT<br/>
[2017-05-04 07:10:42,010][PID:11799][INFO][metrics] method=GET path=/saml/login endpoint=saml_auth.sp_initiated status=302 content_type=text/html; charset=utf-8 content_length=1323 duration=3.02 query_count=0 query_duration=0.00<br/>
[2017-05-04 07:10:55,665][PID:11793][INFO][saml2.response] status: &lt;?xml version='1.0' encoding='UTF-8'?&gt;<br/>
&lt;ns0:Status xmlns:ns0=“urn:oasis:names:tc:SAML:2.0:protocol”&gt;&lt;ns0:StatusCode Value=“urn:oasis:names:tc:SAML:2.0:status:Success” /&gt;&lt;/ns0:Status&gt;<br/>
[2017-05-04 07:10:55,675][PID:11793][INFO][saml2.response] Subject NameID: &lt;?xml version='1.0' encoding='UTF-8'?&gt;<br/>
&lt;ns0:NameID xmlns:ns0=“urn:oasis:names:tc:SAML:2.0:assertion” Format=“urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified”&gt;CLOUD360\468003&lt;/ns0:NameID&gt;<br/>
[2017-05-04 07:10:55,675][PID:11793][INFO][saml2.client_base] — ADDED person info ----<br/>
[2017-05-04 07:10:55,676][PID:11793][INFO][saml2.response] Subject NameID: &lt;?xml version='1.0' encoding='UTF-8'?&gt;<br/>
&lt;ns0:NameID xmlns:ns0=“urn:oasis:names:tc:SAML:2.0:assertion” Format=“urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified”&gt;CLOUD360\468003&lt;/ns0:NameID&gt;<br/>
[2017-05-04 07:10:55,676] ERROR in app: Exception on /saml/callback [POST]<br/>
Traceback (most recent call last):<br/>
File “/usr/local/lib/python2.7/dist-packages/flask/app.py”, line 1988, in wsgi_app<br/>
response = self.full_dispatch_request()<br/>
File “/usr/local/lib/python2.7/dist-packages/flask/app.py”, line 1641, in full_dispatch_request<br/>
rv = self.handle_user_exception(e)<br/>
File “/usr/local/lib/python2.7/dist-packages/flask_restful/<strong>init</strong>.py”, line 271, in error_router<br/>
return original_handler(e)<br/>
File “/usr/local/lib/python2.7/dist-packages/flask/app.py”, line 1544, in handle_user_exception<br/>
reraise(exc_type, exc_value, tb)<br/>
File “/usr/local/lib/python2.7/dist-packages/flask/app.py”, line 1639, in full_dispatch_request<br/>
rv = self.dispatch_request()<br/>
File “/usr/local/lib/python2.7/dist-packages/flask/app.py”, line 1625, in dispatch_request<br/>
return self.view_functions<a>rule.endpoint</a><br/>
File “/opt/redash/redash.1.0.1.b2833/redash/authentication/saml_auth.py”, line 93, in idp_initiated<br/>
name = “%s %s” % (authn_response.ava[‘FirstName’][0], authn_response.ava[‘LastName’][0])<br/>
KeyError: ‘FirstName’<br/>
[2017-05-04 07:10:55,676][PID:11793][ERROR][redash] Exception on /saml/callback [POST]<br/>
Traceback (most recent call last):<br/>
File “/usr/local/lib/python2.7/dist-packages/flask/app.py”, line 1988, in wsgi_app<br/>
response = self.full_dispatch_request()<br/>
File “/usr/local/lib/python2.7/dist-packages/flask/app.py”, line 1641, in full_dispatch_request<br/>
rv = self.handle_user_exception(e)<br/>
File “/usr/local/lib/python2.7/dist-packages/flask_restful/<strong>init</strong>.py”, line 271, in error_router<br/>
return original_handler(e)<br/>
File “/usr/local/lib/python2.7/dist-packages/flask/app.py”, line 1544, in handle_user_exception<br/>
reraise(exc_type, exc_value, tb)<br/>
File “/usr/local/lib/python2.7/dist-packages/flask/app.py”, line 1639, in full_dispatch_request<br/>
rv = self.dispatch_request()<br/>
File “/usr/local/lib/python2.7/dist-packages/flask/app.py”, line 1625, in dispatch_request<br/>
return self.view_functions<a>rule.endpoint</a><br/>
File “/opt/redash/redash.1.0.1.b2833/redash/authentication/saml_auth.py”, line 93, in idp_initiated<br/>
name = “%s %s” % (authn_response.ava[‘FirstName’][0], authn_response.ava[‘LastName’][0])<br/>
KeyError: ‘FirstName’<br/>
[2017-05-04 07:10:55,677][PID:11793][INFO][metrics] method=POST path=/saml/callback endpoint=saml_auth.idp_initiated status=500 content_type=? content_length=-1 duration=18.15 query_count=0 query_duration=0.00</p>
<p>"</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
<span class="post-likes">1 Like</span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="overlay" id="modalOverlay" style="display: none;">
<div class="modal-content">
<p>Login or sign up disabled while the site is in read only mode</p>
<hr/>
<button class="btn btn-login">OK</button>
</div>
</div>
<script src="../../js/script.js"></script>
</body>
</html>