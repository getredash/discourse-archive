<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet"/>
<link href="../../css/checklist_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_theme_2_be4cb2b86ec06123c5e974acd20fd933d14b129d.css" rel="stylesheet"/>
<link href="../../css/discourse-adplugin_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-akismet_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-cakeday_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-chat-integration_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-details_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-footnote_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-lazy-videos_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-local-dates_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/color_definitions_base__2_8fd59ae1f286f43b3ff17996df07ea951685249d.css" rel="stylesheet"/>
<link href="../../css/style.css" rel="stylesheet"/>
<title>Specify SSL certificate locations for Postgres databases?</title></head>
<body>
<div class="navbar">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<div class="navbar-buttons">
<button class="btn btn-signup">Sign Up</button>
<button class="btn btn-login"><i class="fas fa-user"></i> Login</button>
<button class="btn btn-search"><i class="fas fa-search"></i></button>
<div class="navbar-toggle">
<div class="dots"></div>
<div class="dots"></div>
<div class="dots"></div>
</div>
</div>
</div>
<div class="sidebar">
<div class="sidebar-content">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<ul class="sidebar-grid">
<!-- <li><a href="#"><i class="fas fa-list-ul"></i> Topics</a></li> -->
<li><a href="../../page_0.html"><i class="fas fa-layer-group"></i> Topics</a></li>
<li><a href="../../users.html"><i class="fas fa-users"></i> Users</a></li>
<li><a href="../../about.html"><i class="fas fa-info-circle"></i> About</a></li>
<li><a href="../../faq.html"><i class="fas fa-question-circle"></i> FAQ</a></li>
<li><a href="../../groups.html"><i class="fas fa-users"></i> Groups</a></li>
<li><a href="../../badges.html"><i class="fas fa-certificate"></i> Badges</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#categories"><span>▼</span>Categories</a></h3>
<hr/>
<ul class="sidebar-grid categories">
<li>
<a class="badge-wrapper bullet" href="../../c/support/6.html">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name">Support</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/feature-requests/5.html">
<span class="badge-category-bg" style="background-color: #3AB54A"></span>
<span class="badge-category clear-badge">
<span class="category-name">Feature Requests</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/uncategorized/1.html">
<span class="badge-category-bg" style="background-color: #AB9364"></span>
<span class="badge-category clear-badge">
<span class="category-name">Uncategorized</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/development/7.html">
<span class="badge-category-bg" style="background-color: #8C6238"></span>
<span class="badge-category clear-badge">
<span class="category-name">Development</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/tips-tricks-query-examples/11.html">
<span class="badge-category-bg" style="background-color: #652D90"></span>
<span class="badge-category clear-badge" style="white-space: normal;">
<span class="category-name">Tips, Tricks &amp; Query Examples</span>
</span>
</a>
</li>
<li><a href="../../categories.html"><i class="fas fa-list-ul"></i> All categories</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#tags"><span>▼</span>Tags</a></h3>
<hr/>
<ul class="sidebar-grid tags">
<li><a href="../../tag/query_results.html"><i class="fas fa-tag"></i> query_results</a></li>
<li><a href="../../tag/feature-request.html"><i class="fas fa-tag"></i> feature-request</a></li>
<li><a href="../../tag/parameters.html"><i class="fas fa-tag"></i> parameters</a></li>
<li><a href="../../tag/visualizations.html"><i class="fas fa-tag"></i> visualizations</a></li>
<li><a href="../../tag/alerts.html"><i class="fas fa-tag"></i> alerts</a></li>
<li><a href="../../tags.html"><i class="fas fa-list-ul"></i> All tags</a></li>
</ul>
</div>
<div class="sidebar-footer">
            © 2023 <a href="https://discuss.redash.io/" target="_blank">discuss.redash.io</a>
</div>
</div>
<div class="overlay"></div>
<div class="content">
<div class="global-notice">
<div class="row">
<div class="alert alert-info alert-read-only" id="global-notice-alert-read-only">
<span class="text">This site is in read only mode. Please continue to browse, but replying, likes,
                        and other actions are disabled for now.</span>
</div>
</div>
</div>
<div class="imported_page" id="imported_page">
<div class="wrap" id="main-outlet" role="main">
<div id="topic-title">
<h1>
<a href="/t/specify-ssl-certificate-locations-for-postgres-databases/1801">Specify SSL certificate locations for Postgres databases?</a>
</h1>
<div class="topic-category" itemscope="" itemtype="http://schema.org/BreadcrumbList">
<span itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
<a class="badge-wrapper bullet" href="../../c/support/6.html" itemprop="item">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name" itemprop="name">Support</span>
</span>
</a>
<meta content="1" itemprop="position"/>
</span>
<span itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
<a class="badge-wrapper bullet" href="../../c/support/support-self-hosted/9.html" itemprop="item">
<span class="badge-category-bg" style="background-color: #AB9364"></span>
<span class="badge-category clear-badge">
<span class="category-name" itemprop="name">Self Hosted Redash Support</span>
</span>
</a>
<meta content="2" itemprop="position"/>
</span>
</div>
</div>
<div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
<meta content="Specify SSL certificate locations for Postgres databases?" itemprop="headline"/>
<meta content="Self Hosted Redash Support" itemprop="articleSection"/>
<meta content="" itemprop="keywords"/>
<div itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
<meta content="Redash Discourse" itemprop="name"/>
<div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject">
<meta content="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/c07bc573841e1e4a0013ea3b6fe088a1534228a3.png" itemprop="url"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_1">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/clayh.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/clayh_avatar.png" tabindex="-1" width="48"/><span itemprop="name">clayh</span></a>
</span>
<link href="https://discuss.redash.io/t/specify-ssl-certificate-locations-for-postgres-databases/1801" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2018-04-17T16:46:33Z" itemprop="datePublished">
                    April 17, 2018,  4:46pm
                  </time>
<meta content="2018-04-17T16:46:33Z" itemprop="dateModified"/>
<span itemprop="position">1</span>
</span>
</div>
<div class="post" itemprop="articleBody">
<h3>Issue Summary</h3>
<p>Is it possible to specify, per PostgreSQL Data Source, the location of the SSL certificate and key to be used to connect to the server?</p>
<p>I’ve deployed using the provided image on Google Compute Engine. I SSH’d into the VM, created a <code>/home/redash/.postgresql</code> directory and put my <code>postgresql.key</code> and <code>postgresql.crt</code> there, chmod’ing them to 0600. That allows Redash to use those credentials to connect to one Postgres Data Source that I use. However, I have another Postgres database that also requires SSL and has a different set of credentials.</p>
<p>What’s the best way to go about telling Redash which credentials to use with which data source?</p>
<h3>Technical details:</h3>
<ul>
<li>Redash Version: 4.0.0+b3948</li>
<li>Browser/OS: Ubuntu 16.04 on Chrome</li>
<li>How did you install Redash: Google Compute Environment via the Redash-provided VM image.</li>
</ul>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_2" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/clayh.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/clayh_avatar.png" tabindex="-1" width="48"/><span itemprop="name">clayh</span></a>
</span>
<link href="https://discuss.redash.io/t/specify-ssl-certificate-locations-for-postgres-databases/1801" itemprop="mainEntityOfPage"/>
<link href="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/ed3da0133e93477e89872749595ef6a9e44cf6f6.png" itemprop="image"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2018-04-19T13:30:00Z" itemprop="datePublished">
                    April 19, 2018,  1:30pm
                  </time>
<meta content="2018-04-19T13:47:26Z" itemprop="dateModified"/>
<span itemprop="position">2</span>
</span>
</div>
<div class="post" itemprop="text">
<p>I think this is borderline a feature request.</p>
<p>Without a way to specify the location of the client key and certificate for connecting to PostgreSQL databases that requires SSL, you can only get Redash to connect to a single one (I think) and that only happens when you put the client key and certificate in the <code>/home/redash/.postgresql</code> directory on the VM.</p>
<p>I would like to see a field when setting up a Data Source with PostgreSQL for “Additional connection parameters,” where I can pass in the Postgres-specific parameters that will allow Redash to locate the appropriate credentials.</p>
<p>Here is where you can find the PostgreSQL documentation on this:</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://www.postgresql.org/docs/9.6/libpq-ssl.html">
<header class="source">
<img class="site-icon" height="48" src="assets/favicon.ico" width="48"/>
<a href="https://www.postgresql.org/docs/9.6/libpq-ssl.html" rel="noopener nofollow ugc" target="_blank" title="01:03PM - 11 August 2022">PostgreSQL Documentation – 11 Aug 22</a>
</header>
<article class="onebox-body">
<div class="aspect-image" style="--aspect-ratio:484/500;"><img class="thumbnail" height="500" src="assets/elephant.png" width="484"/></div>
<h3><a href="https://www.postgresql.org/docs/9.6/libpq-ssl.html" rel="noopener nofollow ugc" target="_blank">34.19. SSL Support</a></h3>
<p>34.19. SSL Support 34.19.1. Client Verification of Server Certificates 34.19.2. Client Certificates 34.19.3. Protection Provided in Different Modes 34.19.4. SSL Client …</p>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
<p>The relevant text:</p>
<blockquote>
<p>If the server attempts to verify the identity of the client by requesting the client’s leaf certificate, libpq will send the certificates stored in file ~/.postgresql/postgresql.crt in the user’s home directory. The certificates must chain to the root certificate trusted by the server. A matching private key file ~/.postgresql/postgresql.key must also be present. The private key file must not allow any access to world or group; achieve this by the command chmod 0600 ~/.postgresql/postgresql.key. On Microsoft Windows these files are named %APPDATA%\postgresql\postgresql.crt and %APPDATA%\postgresql\postgresql.key, and there is no special permissions check since the directory is presumed secure. The location of the certificate and key files can be overridden by the connection parameters sslcert and sslkey or the environment variables PGSSLCERT and PGSSLKEY.</p>
</blockquote>
<p><div class="lightbox-wrapper"><a class="lightbox" data-download-href="/uploads/short-url/xQJbUlPV3sqy6pkR5FVB3b6BgQ6.png?dl=1" href="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/ed3da0133e93477e89872749595ef6a9e44cf6f6.png" rel="noopener nofollow ugc" title="47 AM"><img alt="47 AM" data-base62-sha1="xQJbUlPV3sqy6pkR5FVB3b6BgQ6" data-small-upload="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/1X/ed3da0133e93477e89872749595ef6a9e44cf6f6_2_10x10.png" height="147" src="assets/ed3da0133e93477e89872749595ef6a9e44cf6f6_2_690x147.png" srcset="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/1X/ed3da0133e93477e89872749595ef6a9e44cf6f6_2_690x147.png, https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/1X/ed3da0133e93477e89872749595ef6a9e44cf6f6_2_1035x220.png 1.5x, https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/ed3da0133e93477e89872749595ef6a9e44cf6f6.png 2x" width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">47 AM</span><span class="informations">1101×235 31.8 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
<p><code>psql</code> uses the <a href="https://www.postgresql.org/docs/9.5/static/libpq-envars.html" rel="noopener nofollow ugc">allowed environment variables</a> or accepts optional parameters to allow specification of the location of the certificates. With <code>psql</code>, it looks like this:</p>
<p><code>$&gt;psql "port=5431 host=localhost user=postgres sslcert=./test/client.crt sslkey=./test/client.key sslrootcert=./test/server.crt sslmode=require"</code></p>
<p>It’s the ability to specify <code>sslcert</code> and <code>sslkey</code> that Redash lacks for PostgreSQL.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_3" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/clayh.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/clayh_avatar.png" tabindex="-1" width="48"/><span itemprop="name">clayh</span></a>
</span>
<link href="https://discuss.redash.io/t/specify-ssl-certificate-locations-for-postgres-databases/1801" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2018-04-19T15:21:22Z" itemprop="datePublished">
                    April 19, 2018,  3:21pm
                  </time>
<meta content="2018-04-19T15:21:22Z" itemprop="dateModified"/>
<span itemprop="position">3</span>
</span>
</div>
<div class="post" itemprop="text">
<p>For reference, in case anybody has a similar problem, I hacked Redash to get this to work. The details are here:</p>
<aside class="onebox githubissue">
<header class="source">
<a href="https://github.com/getredash/redash/issues/2000#issuecomment-382774655" rel="nofollow noopener" target="_blank">github.com/getredash/redash</a>
</header>
<article class="onebox-body">
<div class="github-row">
<div class="github-icon-container" title="Issue">
<svg aria-hidden="true" class="github-icon" height="60" viewbox="0 0 14 16" width="60"><path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
</div>
<div class="github-info-container">
<h4>
<a href="https://github.com/getredash/redash/issues/2000#issuecomment-382774655" rel="nofollow noopener" target="_blank">SSL for Postgres</a>
</h4>
<div class="github-info">
<div class="date">
        opened <span class="discourse-local-date" data-date="2017-10-06" data-format="ll" data-time="12:26:38" data-timezone="UTC">12:26PM - 06 Oct 17 UTC</span>
</div>
<div class="user">
<a href="https://github.com/zsoca8711" rel="nofollow noopener" target="_blank">
<img alt="zsoca8711" class="onebox-avatar-inline" height="20" src="assets/11097686" width="20"/>
          zsoca8711
        </a>
</div>
</div>
</div>
</div>
<div class="github-row">
<p class="github-content">Hi,
we use a lot of postgres databases and we have some servers in different points of the world. This means some...</p>
</div>
<div class="labels">
<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">Backend</span>
<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">enhancement</span>
<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">question</span>
</div>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
<span class="post-likes">1 Like</span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="overlay" id="modalOverlay" style="display: none;">
<div class="modal-content">
<p>Login or sign up disabled while the site is in read only mode</p>
<hr/>
<button class="btn btn-login">OK</button>
</div>
</div>
<script src="../../js/script.js"></script>
</body>
</html>