<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet"/>
<link href="../../css/checklist_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_theme_2_be4cb2b86ec06123c5e974acd20fd933d14b129d.css" rel="stylesheet"/>
<link href="../../css/discourse-adplugin_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-akismet_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-cakeday_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-chat-integration_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-details_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-footnote_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-lazy-videos_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-local-dates_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/color_definitions_base__2_8fd59ae1f286f43b3ff17996df07ea951685249d.css" rel="stylesheet"/>
<link href="../../css/style.css" rel="stylesheet"/>
<title>Help upgrading from 5.0.2 to 6.0 - Upgrade guide is not useful</title></head>
<body>
<div class="navbar">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<div class="navbar-buttons">
<button class="btn btn-signup">Sign Up</button>
<button class="btn btn-login"><i class="fas fa-user"></i> Login</button>
<button class="btn btn-search"><i class="fas fa-search"></i></button>
<div class="navbar-toggle">
<div class="dots"></div>
<div class="dots"></div>
<div class="dots"></div>
</div>
</div>
</div>
<div class="sidebar">
<div class="sidebar-content">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<ul class="sidebar-grid">
<!-- <li><a href="#"><i class="fas fa-list-ul"></i> Topics</a></li> -->
<li><a href="../../page_0.html"><i class="fas fa-layer-group"></i> Topics</a></li>
<li><a href="../../users.html"><i class="fas fa-users"></i> Users</a></li>
<li><a href="../../about.html"><i class="fas fa-info-circle"></i> About</a></li>
<li><a href="../../faq.html"><i class="fas fa-question-circle"></i> FAQ</a></li>
<li><a href="../../groups.html"><i class="fas fa-users"></i> Groups</a></li>
<li><a href="../../badges.html"><i class="fas fa-certificate"></i> Badges</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#categories"><span>▼</span>Categories</a></h3>
<hr/>
<ul class="sidebar-grid categories">
<li>
<a class="badge-wrapper bullet" href="../../c/support/6.html">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name">Support</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/feature-requests/5.html">
<span class="badge-category-bg" style="background-color: #3AB54A"></span>
<span class="badge-category clear-badge">
<span class="category-name">Feature Requests</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/uncategorized/1.html">
<span class="badge-category-bg" style="background-color: #AB9364"></span>
<span class="badge-category clear-badge">
<span class="category-name">Uncategorized</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/development/7.html">
<span class="badge-category-bg" style="background-color: #8C6238"></span>
<span class="badge-category clear-badge">
<span class="category-name">Development</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/tips-tricks-query-examples/11.html">
<span class="badge-category-bg" style="background-color: #652D90"></span>
<span class="badge-category clear-badge" style="white-space: normal;">
<span class="category-name">Tips, Tricks &amp; Query Examples</span>
</span>
</a>
</li>
<li><a href="../../categories.html"><i class="fas fa-list-ul"></i> All categories</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#tags"><span>▼</span>Tags</a></h3>
<hr/>
<ul class="sidebar-grid tags">
<li><a href="../../tag/query_results.html"><i class="fas fa-tag"></i> query_results</a></li>
<li><a href="../../tag/feature-request.html"><i class="fas fa-tag"></i> feature-request</a></li>
<li><a href="../../tag/parameters.html"><i class="fas fa-tag"></i> parameters</a></li>
<li><a href="../../tag/visualizations.html"><i class="fas fa-tag"></i> visualizations</a></li>
<li><a href="../../tag/alerts.html"><i class="fas fa-tag"></i> alerts</a></li>
<li><a href="../../tags.html"><i class="fas fa-list-ul"></i> All tags</a></li>
</ul>
</div>
<div class="sidebar-footer">
            © 2023 <a href="https://discuss.redash.io/" target="_blank">discuss.redash.io</a>
</div>
</div>
<div class="overlay"></div>
<div class="content">
<div class="global-notice">
<div class="row">
<div class="alert alert-info alert-read-only" id="global-notice-alert-read-only">
<span class="text">This site is in read only mode. Please continue to browse, but replying, likes,
                        and other actions are disabled for now.</span>
</div>
</div>
</div>
<div class="imported_page" id="imported_page">
<div class="wrap" id="main-outlet" role="main">
<div id="topic-title">
<h1>
<a href="/t/help-upgrading-from-5-0-2-to-6-0-upgrade-guide-is-not-useful/3073">Help upgrading from 5.0.2 to 6.0 - Upgrade guide is not useful</a>
</h1>
<div class="topic-category" itemscope="" itemtype="http://schema.org/BreadcrumbList">
<span itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
<a class="badge-wrapper bullet" href="../../c/support/6.html" itemprop="item">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name" itemprop="name">Support</span>
</span>
</a>
<meta content="1" itemprop="position"/>
</span>
<span itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
<a class="badge-wrapper bullet" href="../../c/support/support-self-hosted/9.html" itemprop="item">
<span class="badge-category-bg" style="background-color: #AB9364"></span>
<span class="badge-category clear-badge">
<span class="category-name" itemprop="name">Self Hosted Redash Support</span>
</span>
</a>
<meta content="2" itemprop="position"/>
</span>
</div>
</div>
<div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
<meta content="Help upgrading from 5.0.2 to 6.0 - Upgrade guide is not useful" itemprop="headline"/>
<meta content="Self Hosted Redash Support" itemprop="articleSection"/>
<meta content="" itemprop="keywords"/>
<div itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
<meta content="Redash Discourse" itemprop="name"/>
<div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject">
<meta content="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/c07bc573841e1e4a0013ea3b6fe088a1534228a3.png" itemprop="url"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_1">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/rrlevy.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/rrlevy_avatar.png" tabindex="-1" width="48"/><span itemprop="name">rrlevy</span></a>
</span>
<link href="https://discuss.redash.io/t/help-upgrading-from-5-0-2-to-6-0-upgrade-guide-is-not-useful/3073" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-01-23T20:17:48Z" itemprop="datePublished">
                    January 23, 2019,  8:17pm
                  </time>
<meta content="2019-01-23T20:17:48Z" itemprop="dateModified"/>
<span itemprop="position">1</span>
</span>
</div>
<div class="post" itemprop="articleBody">
<h3>Issue Summary</h3>
<p>I’ve installed a production environment on EC2 with the AMI provided on the setup guide. However, the AMIs on the site are for version 5.0.2</p>
<p>The <a href="https://redash.io/help/open-source/admin-guide/how-to-upgrade" rel="nofollow noopener">Upgrade Guide</a> doesn’t help clarifying how to do the migration on this case.</p>
<p>The main issue for me is this line:</p>
<blockquote>
<ol>
<li>Update  <code>/opt/redash/docker-compose.yml</code>  Redash image reference to the one you want to upgrade to.</li>
</ol>
</blockquote>
<p>How do I get a new updated image reference?</p>
<h3>Technical details:</h3>
<ul>
<li>Redash Version: 5.0.2</li>
<li>Browser/OS: N/a</li>
<li>How did you install Redash: AWS AMI</li>
</ul>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_2" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/arikfr.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/arikfr_avatar.png" tabindex="-1" width="48"/><span itemprop="name">arikfr</span></a>
</span>
<link href="https://discuss.redash.io/t/help-upgrading-from-5-0-2-to-6-0-upgrade-guide-is-not-useful/3073" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-01-23T20:36:41Z" itemprop="datePublished">
                    January 23, 2019,  8:36pm
                  </time>
<meta content="2019-01-23T20:36:41Z" itemprop="dateModified"/>
<span itemprop="position">2</span>
</span>
</div>
<div class="post" itemprop="text">
<p>That’s a very good question! <img alt=":flushed:" class="emoji" src="assets/flushed.png" title=":flushed:"/> We should make it easy to find. Anyway, in your case it’s <code>redash/redash:6.0.0.b8537</code>.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_3" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/justinclift.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/justinclift_avatar.png" tabindex="-1" width="48"/><span itemprop="name">justinclift</span></a>
</span>
<link href="https://discuss.redash.io/t/help-upgrading-from-5-0-2-to-6-0-upgrade-guide-is-not-useful/3073" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-01-23T23:54:04Z" itemprop="datePublished">
                    January 23, 2019, 11:54pm
                  </time>
<meta content="2019-01-24T09:34:44Z" itemprop="dateModified"/>
<span itemprop="position">3</span>
</span>
</div>
<div class="post" itemprop="text">
<p>This is something I hit yesterday when upgrading my local docker images as well.</p>
<p>The approach I used was (manually) taking at look at the URL from the <a href="https://github.com/getredash/redash/blob/ab6ed7da34dd2797914382c435981450b7bf9d7a/setup/setup.sh#L54" rel="nofollow noopener">setup.sh</a> file:</p>
<p><a class="onebox" href="https://version.redash.io/api/releases?channel=stable" rel="nofollow noopener" target="_blank">https://version.redash.io/api/releases?channel=stable</a></p>
<p>The “docker_image” entry for the first errr… entry is the one to use. <img alt=":smile:" class="emoji" src="assets/smile.png" title=":smile:"/></p>
<p>An alternative approach is to use the docker hub tags page:</p>
<p><a class="onebox" href="https://hub.docker.com/r/redash/redash/tags" rel="nofollow noopener" target="_blank">https://hub.docker.com/r/redash/redash/tags</a></p>
<p>That’s probably easier for people than visually parsing json.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
<span class="post-likes">1 Like</span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_4" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/bbrowski.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/bbrowski_avatar.png" tabindex="-1" width="48"/><span itemprop="name">bbrowski</span></a>
</span>
<link href="https://discuss.redash.io/t/help-upgrading-from-5-0-2-to-6-0-upgrade-guide-is-not-useful/3073" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-03-15T13:26:42Z" itemprop="datePublished">
                    March 15, 2019,  1:26pm
                  </time>
<meta content="2019-03-15T13:26:42Z" itemprop="dateModified"/>
<span itemprop="position">4</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Im struggling too with the upgrade from 5.0.2 to 6.0. It’s probably some rookie mistake but im a bit stumped. Im <strong>not</strong> using a docker and 5.0.2 was working perfectly. After I did the sudo bin/upgrade I get the floowing when I try and login:</p>
<p><strong>Internal Server Error</strong></p>
<p>The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.</p>
<p>I had this error before, I think, when there was an error in my .env file relating to the database. I haven’t changed the .env file and postgres is still running. Is the db still the same in 6? This is the db line in my .env file.</p>
<p>export REDASH_DATABASE_URL=“postgresql:///redash”</p>
<p>How do i go about locating/fixing the error? Can I just point the current directory link back to the old version to roll it back?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_5" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/bbrowski.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/bbrowski_avatar.png" tabindex="-1" width="48"/><span itemprop="name">bbrowski</span></a>
</span>
<link href="https://discuss.redash.io/t/help-upgrading-from-5-0-2-to-6-0-upgrade-guide-is-not-useful/3073" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-03-20T13:37:29Z" itemprop="datePublished">
                    March 20, 2019,  1:37pm
                  </time>
<meta content="2019-03-20T13:37:29Z" itemprop="dateModified"/>
<span itemprop="position">5</span>
</span>
</div>
<div class="post" itemprop="text">
<p>So I tried this upgrade again on my old VM and the same result.</p>
<p>When you first go in after the upgrade it looks fine - except that there are no datasources, dahsboard, users, or queries. You get the spinning circle. Refreshing the page does nothing but when you logout you cant login again…and you get the Internal Server Error message.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_6" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/CH_TN.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/CH_TN_avatar.png" tabindex="-1" width="48"/><span itemprop="name">CH_TN</span></a>
</span>
<link href="https://discuss.redash.io/t/help-upgrading-from-5-0-2-to-6-0-upgrade-guide-is-not-useful/3073" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-03-20T18:28:27Z" itemprop="datePublished">
                    March 20, 2019,  6:28pm
                  </time>
<meta content="2019-03-20T18:28:27Z" itemprop="dateModified"/>
<span itemprop="position">6</span>
</span>
</div>
<div class="post" itemprop="text">
<p>I got the same issue, after upgrading from V5 to V6 i was unable to login with the same Internal Server message error.</p>
<p>On redash log i got this message:<br/>
“Redis transport requires redis-py versions 3.2.0 or later. You have 2.10.5”</p>
<p>After update the redis-py to 3.2.0 (with pip install redis==3.2.0) i was able to login but now all queries doesnt work anymore.</p>
<p>On screen i got a “'Error running query: an unknown error occurred. Please try again later.” and on logs this message “AttributeError: ‘float’ object has no attribute ‘iteritems’”</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
<span class="post-likes">1 Like</span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_7" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/jfryer_runoranj.com.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/jfryer_runoranj.com_avatar.png" tabindex="-1" width="48"/><span itemprop="name">jfryer_runoranj.com</span></a>
</span>
<link href="https://discuss.redash.io/t/help-upgrading-from-5-0-2-to-6-0-upgrade-guide-is-not-useful/3073" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-03-20T20:23:14Z" itemprop="datePublished">
                    March 20, 2019,  8:23pm
                  </time>
<meta content="2019-03-20T20:23:14Z" itemprop="dateModified"/>
<span itemprop="position">7</span>
</span>
</div>
<div class="post" itemprop="text">
<p>I have the same issue. I upgraded from v3 to v4, then v4 to v6. Was unable to login due to the redis-py version error reported by <a class="mention" href="/u/ch_tn">@CH_TN</a>. After running the pip install I was able to login, then started getting the “AttributeError: ‘float’ object has no attribute ‘iteritems’”</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_8" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/chris2.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/chris2_avatar.png" tabindex="-1" width="48"/><span itemprop="name">chris2</span></a>
</span>
<link href="https://discuss.redash.io/t/help-upgrading-from-5-0-2-to-6-0-upgrade-guide-is-not-useful/3073" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-03-21T17:18:02Z" itemprop="datePublished">
                    March 21, 2019,  5:18pm
                  </time>
<meta content="2019-03-22T08:58:27Z" itemprop="dateModified"/>
<span itemprop="position">8</span>
</span>
</div>
<div class="post" itemprop="text">
<p>its a depenedency issue.<br/>
Install redis-py, celery and kombu version from hand, then it works again.<br/>
Without beeing an python/django expert, I did the following:<br/>
sudo pip install  kombu==4.2.0<br/>
sudo pip install celery==4.1.1<br/>
sudo pip install redis==2.10.6</p>
<p>Also edited the versions in requirements.txt</p>
<p>Then run upgrade again (or restart)</p>
<p>Find more here:<br/>
<aside class="onebox githubissue">
<header class="source">
<a href="https://github.com/celery/celery/issues/5369" rel="nofollow noopener" target="_blank">github.com/celery/celery</a>
</header>
<article class="onebox-body">
<a href="https://github.com/mehtadev17" rel="nofollow noopener">
<img class="thumbnail onebox-avatar" height="96" src="assets/6795712" width="96"/>
</a>
<h4><a href="https://github.com/celery/celery/issues/5369" rel="nofollow noopener" target="_blank">Issue: [2019-03-04 11:08:55,583: CRITICAL/MainProcess] Unrecoverable error: VersionMismatch(‘Redis transport requires redis-py versions 3.2.0 or later. You have 2.10.6’,)</a></h4>
<div class="date" style="margin-top:10px;">
<div class="user" style="margin-top:10px;">
	opened by <a href="https://github.com/mehtadev17" rel="nofollow noopener" target="_blank">mehtadev17</a>
	on <a href="https://github.com/celery/celery/issues/5369" rel="nofollow noopener" target="_blank">2019-03-04</a>
</div>
<div class="user">
	closed by <a href="https://github.com/thedrow" rel="nofollow noopener" target="_blank">thedrow</a>
	on <a href="https://github.com/celery/celery/issues/5369" rel="nofollow noopener" target="_blank">2019-03-04</a>
</div>
</div>
<pre class="content" style="white-space: pre-wrap;">The Kombu update from 4.3.0 to 4.4.0 stopped support for redis-py v2.10.6 and therefore forces us to upgrade redis-py version.
Celery Version:...</pre>
<div class="labels">
<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">Status: Not a Bug</span>
<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">Status: Won't Fix</span>
</div>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="2" itemprop="userInteractionCount"/>
<span class="post-likes">2 Likes</span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_9" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/manu.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/manu_avatar.png" tabindex="-1" width="48"/><span itemprop="name">manu</span></a>
</span>
<link href="https://discuss.redash.io/t/help-upgrading-from-5-0-2-to-6-0-upgrade-guide-is-not-useful/3073" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-03-21T17:40:19Z" itemprop="datePublished">
                    March 21, 2019,  5:40pm
                  </time>
<meta content="2019-03-21T17:40:19Z" itemprop="dateModified"/>
<span itemprop="position">9</span>
</span>
</div>
<div class="post" itemprop="text">
<p>I ran into this issue as well. Manually installing kombu, celery and redis did not help!<br/>
Same issue as <a class="mention" href="/u/ch_tn">@CH_TN</a> and <a class="mention" href="/u/jfryer_runoranj.com">@jfryer_runoranj.com</a>.</p>
<p>Upgrade(v4 to v5 to v6) was completed but not able to execute any queries. The celery.log and api_error.log contains this error line which is happening on redis scripts.</p>
<p>“AttributeError: ‘float’ object has no attribute ‘iteritems’”</p>
<p>Does downgrading to v5 help?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_10" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/jfryer_runoranj.com.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/jfryer_runoranj.com_avatar.png" tabindex="-1" width="48"/><span itemprop="name">jfryer_runoranj.com</span></a>
</span>
<link href="https://discuss.redash.io/t/help-upgrading-from-5-0-2-to-6-0-upgrade-guide-is-not-useful/3073" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-03-21T18:52:43Z" itemprop="datePublished">
                    March 21, 2019,  6:52pm
                  </time>
<meta content="2019-03-21T18:52:43Z" itemprop="dateModified"/>
<span itemprop="position">10</span>
</span>
</div>
<div class="post" itemprop="text">
<p>I had to restore v5 from my backup. Was not able to switch the “current” symlink back to the v5 install.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_11" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/CH_TN.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/CH_TN_avatar.png" tabindex="-1" width="48"/><span itemprop="name">CH_TN</span></a>
</span>
<link href="https://discuss.redash.io/t/help-upgrading-from-5-0-2-to-6-0-upgrade-guide-is-not-useful/3073" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-03-21T19:14:50Z" itemprop="datePublished">
                    March 21, 2019,  7:14pm
                  </time>
<meta content="2019-03-21T19:14:50Z" itemprop="dateModified"/>
<span itemprop="position">11</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Hi <a class="mention" href="/u/chris2">@chris2</a>, i execute those pip install commands and now the queries are working again.</p>
<p>I appreciate your help.<br/>
Thanks</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_12" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/manu.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/manu_avatar.png" tabindex="-1" width="48"/><span itemprop="name">manu</span></a>
</span>
<link href="https://discuss.redash.io/t/help-upgrading-from-5-0-2-to-6-0-upgrade-guide-is-not-useful/3073" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-03-21T19:31:34Z" itemprop="datePublished">
                    March 21, 2019,  7:31pm
                  </time>
<meta content="2019-03-21T19:31:34Z" itemprop="dateModified"/>
<span itemprop="position">12</span>
</span>
</div>
<div class="post" itemprop="text">
<p>I ran the pip installs again, restarted the server, cleared redis and it started working. I was missing the redis flush before!</p>
<p>Appreciate the help. Thanks!</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="overlay" id="modalOverlay" style="display: none;">
<div class="modal-content">
<p>Login or sign up disabled while the site is in read only mode</p>
<hr/>
<button class="btn btn-login">OK</button>
</div>
</div>
<script src="../../js/script.js"></script>
</body>
</html>