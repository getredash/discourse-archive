<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet"/>
<link href="../../css/checklist_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_theme_2_be4cb2b86ec06123c5e974acd20fd933d14b129d.css" rel="stylesheet"/>
<link href="../../css/discourse-adplugin_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-akismet_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-cakeday_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-chat-integration_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-details_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-footnote_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-lazy-videos_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-local-dates_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/color_definitions_base__2_8fd59ae1f286f43b3ff17996df07ea951685249d.css" rel="stylesheet"/>
<link href="../../css/style.css" rel="stylesheet"/>
<title>Updated migration script</title></head>
<body>
<div class="navbar">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<div class="navbar-buttons">
<button class="btn btn-signup">Sign Up</button>
<button class="btn btn-login"><i class="fas fa-user"></i> Login</button>
<button class="btn btn-search"><i class="fas fa-search"></i></button>
<div class="navbar-toggle">
<div class="dots"></div>
<div class="dots"></div>
<div class="dots"></div>
</div>
</div>
</div>
<div class="sidebar">
<div class="sidebar-content">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<ul class="sidebar-grid">
<!-- <li><a href="#"><i class="fas fa-list-ul"></i> Topics</a></li> -->
<li><a href="../../page_0.html"><i class="fas fa-layer-group"></i> Topics</a></li>
<li><a href="../../users.html"><i class="fas fa-users"></i> Users</a></li>
<li><a href="../../about.html"><i class="fas fa-info-circle"></i> About</a></li>
<li><a href="../../faq.html"><i class="fas fa-question-circle"></i> FAQ</a></li>
<li><a href="../../groups.html"><i class="fas fa-users"></i> Groups</a></li>
<li><a href="../../badges.html"><i class="fas fa-certificate"></i> Badges</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#categories"><span>▼</span>Categories</a></h3>
<hr/>
<ul class="sidebar-grid categories">
<li>
<a class="badge-wrapper bullet" href="../../c/support/6.html">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name">Support</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/feature-requests/5.html">
<span class="badge-category-bg" style="background-color: #3AB54A"></span>
<span class="badge-category clear-badge">
<span class="category-name">Feature Requests</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/uncategorized/1.html">
<span class="badge-category-bg" style="background-color: #AB9364"></span>
<span class="badge-category clear-badge">
<span class="category-name">Uncategorized</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/development/7.html">
<span class="badge-category-bg" style="background-color: #8C6238"></span>
<span class="badge-category clear-badge">
<span class="category-name">Development</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/tips-tricks-query-examples/11.html">
<span class="badge-category-bg" style="background-color: #652D90"></span>
<span class="badge-category clear-badge" style="white-space: normal;">
<span class="category-name">Tips, Tricks &amp; Query Examples</span>
</span>
</a>
</li>
<li><a href="../../categories.html"><i class="fas fa-list-ul"></i> All categories</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#tags"><span>▼</span>Tags</a></h3>
<hr/>
<ul class="sidebar-grid tags">
<li><a href="../../tag/query_results.html"><i class="fas fa-tag"></i> query_results</a></li>
<li><a href="../../tag/feature-request.html"><i class="fas fa-tag"></i> feature-request</a></li>
<li><a href="../../tag/parameters.html"><i class="fas fa-tag"></i> parameters</a></li>
<li><a href="../../tag/visualizations.html"><i class="fas fa-tag"></i> visualizations</a></li>
<li><a href="../../tag/alerts.html"><i class="fas fa-tag"></i> alerts</a></li>
<li><a href="../../tags.html"><i class="fas fa-list-ul"></i> All tags</a></li>
</ul>
</div>
<div class="sidebar-footer">
            © 2023 <a href="https://discuss.redash.io/" target="_blank">discuss.redash.io</a>
</div>
</div>
<div class="overlay"></div>
<div class="content">
<div class="global-notice">
<div class="row">
<div class="alert alert-info alert-read-only" id="global-notice-alert-read-only">
<span class="text">This site is in read only mode. Please continue to browse, but replying, likes,
                        and other actions are disabled for now.</span>
</div>
</div>
</div>
<div class="imported_page" id="imported_page">
<div class="wrap" id="main-outlet" role="main">
<div id="topic-title">
<h1>
<a href="/t/updated-migration-script/8755">Updated migration script</a>
</h1>
</div>
<div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
<meta content="Updated migration script" itemprop="headline"/>
<meta content="Uncategorized" itemprop="articleSection"/>
<meta content="" itemprop="keywords"/>
<div itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
<meta content="Redash Discourse" itemprop="name"/>
<div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject">
<meta content="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/c07bc573841e1e4a0013ea3b6fe088a1534228a3.png" itemprop="url"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_1">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/arikfr.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/arikfr_avatar.png" tabindex="-1" width="48"/><span itemprop="name">arikfr</span></a>
</span>
<link href="assets/8755" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-07-15T05:08:26Z" itemprop="datePublished">
                    July 15, 2021,  5:08am
                  </time>
<meta content="2021-07-15T05:08:26Z" itemprop="dateModified"/>
<span itemprop="position">1</span>
</span>
</div>
<div class="post" itemprop="articleBody">
<p>For a long while we had a script to migrate content between Redash instances. It worked, but wasn’t very much maintained. About a year ago <a class="mention" href="/u/jesse">@jesse</a> started the effort of refreshing this script as part of the <a href="https://github.com/getredash/redash-toolbelt">redash-toolbelt project</a>, it didn’t go far but we’re restarting the effort now.</p>
<p>The goal is to create a maintained version of the script built on top of the toolbelt that will support latest version of Redash along with all the objects (previous versions of the script didn’t migrate alerts or favorites).</p>
<p>The PR is here: <a class="inline-onebox" href="https://github.com/getredash/redash-toolbelt/pull/23">Add migration script to examples by susodapop · Pull Request #23 · getredash/redash-toolbelt · GitHub</a>.</p>
<p>If anyone interested in helping with testing, please let us know. We will update on this thread with the progress of this effort.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="7" itemprop="userInteractionCount"/>
<span class="post-likes">7 Likes</span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
<div class="crawler-linkback-list" itemscope="" itemtype="http://schema.org/ItemList">
<div itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
<a href="http://discuss.redash.io/t/hosted-version-eol-questions/8760/19" itemprop="url">Hosted Version EOL Questions</a>
<meta content="3" itemprop="position"/>
</div>
</div>
</div>
<div class="topic-body crawler-post" id="post_2" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/pruce.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/pruce_avatar.png" tabindex="-1" width="48"/><span itemprop="name">pruce</span></a>
</span>
<link href="assets/8755" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-07-22T09:38:42Z" itemprop="datePublished">
                    July 22, 2021,  9:38am
                  </time>
<meta content="2021-07-22T09:38:42Z" itemprop="dateModified"/>
<span itemprop="position">2</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Do we have an ETA on when the migration script will be usable?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_3" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/jesse.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/jesse_avatar.png" tabindex="-1" width="48"/><span itemprop="name">jesse</span></a>
</span>
<link href="assets/8755" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-07-23T16:46:17Z" itemprop="datePublished">
                    July 23, 2021,  4:46pm
                  </time>
<meta content="2021-07-23T16:46:17Z" itemprop="dateModified"/>
<span itemprop="position">3</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Late July or early August. You can follow along on the PR Arik linked.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_4" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/prerna.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/prerna_avatar.png" tabindex="-1" width="48"/><span itemprop="name">prerna</span></a>
</span>
<link href="assets/8755" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-08-09T11:44:22Z" itemprop="datePublished">
                    August 9, 2021, 11:44am
                  </time>
<meta content="2021-08-09T12:29:43Z" itemprop="dateModified"/>
<span itemprop="position">4</span>
</span>
</div>
<div class="post" itemprop="text">
<p>in which database I have to store my dashboards which is available in your database after migrating</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_5" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/jesse.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/jesse_avatar.png" tabindex="-1" width="48"/><span itemprop="name">jesse</span></a>
</span>
<link href="assets/8755" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-08-09T15:03:24Z" itemprop="datePublished">
                    August 9, 2021,  3:03pm
                  </time>
<meta content="2021-08-09T15:03:24Z" itemprop="dateModified"/>
<span itemprop="position">5</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Redash uses Postgres.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="2" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_6" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/prerna.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/prerna_avatar.png" tabindex="-1" width="48"/><span itemprop="name">prerna</span></a>
</span>
<link href="assets/8755" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-08-10T04:15:45Z" itemprop="datePublished">
                    August 10, 2021,  4:15am
                  </time>
<meta content="2021-08-10T04:15:45Z" itemprop="dateModified"/>
<span itemprop="position">6</span>
</span>
</div>
<div class="post" itemprop="text">
<p>ok after migrating where will my dashboards which are in your database will be stored, which database I have to use those dashboards which you have stored  ,do I  have to use Postgres ,and how do I have to store that can you tell me the steps</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_7" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/prerna.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/prerna_avatar.png" tabindex="-1" width="48"/><span itemprop="name">prerna</span></a>
</span>
<link href="assets/8755" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-08-10T05:09:09Z" itemprop="datePublished">
                    August 10, 2021,  5:09am
                  </time>
<meta content="2021-08-10T05:09:09Z" itemprop="dateModified"/>
<span itemprop="position">7</span>
</span>
</div>
<div class="post" itemprop="text">
<p>hi<br/>
can you tell me the dashboards which are stored in your Postgres then how will I have to migrate those dashboards in my Postgres account.<br/>
Thanks<br/>
Prerna</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_8" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/jesse.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/jesse_avatar.png" tabindex="-1" width="48"/><span itemprop="name">jesse</span></a>
</span>
<link href="assets/8755" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-08-10T15:16:45Z" itemprop="datePublished">
                    August 10, 2021,  3:16pm
                  </time>
<meta content="2021-08-10T15:16:45Z" itemprop="dateModified"/>
<span itemprop="position">8</span>
</span>
</div>
<div class="post" itemprop="text">
<p>All this will be handled by the migration script.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_9" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/prerna.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/prerna_avatar.png" tabindex="-1" width="48"/><span itemprop="name">prerna</span></a>
</span>
<link href="assets/8755" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-08-27T04:25:16Z" itemprop="datePublished">
                    August 27, 2021,  4:25am
                  </time>
<meta content="2021-08-27T04:25:16Z" itemprop="dateModified"/>
<span itemprop="position">9</span>
</span>
</div>
<div class="post" itemprop="text">
<p>hi how to take backup  of the data</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_10" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/jesse.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/jesse_avatar.png" tabindex="-1" width="48"/><span itemprop="name">jesse</span></a>
</span>
<link href="assets/8755" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-09-01T18:54:04Z" itemprop="datePublished">
                    September 1, 2021,  6:54pm
                  </time>
<meta content="2021-09-01T18:54:04Z" itemprop="dateModified"/>
<span itemprop="position">10</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Hey everyone, last call for feedback on the migration script before it’s deployed out to Pypi:</p>
<aside class="onebox githubpullrequest" data-onebox-src="https://github.com/getredash/redash-toolbelt/pull/23">
<header class="source">
<a href="https://github.com/getredash/redash-toolbelt/pull/23" rel="noopener" target="_blank">github.com/getredash/redash-toolbelt</a>
</header>
<article class="onebox-body">
<div class="github-row">
<div class="github-icon-container" title="Pull Request">
<svg aria-hidden="true" class="github-icon" height="60" viewbox="0 0 12 16" width="60"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
</div>
<div class="github-info-container">
<h4>
<a href="https://github.com/getredash/redash-toolbelt/pull/23" rel="noopener" target="_blank">[RT-5] Add migration script to examples</a>
</h4>
<div class="branches">
<code>getredash:master</code> ← <code>getredash:issue-5</code>
</div>
<div class="github-info">
<div class="date">
        opened <span class="discourse-local-date" data-date="2020-04-17" data-format="ll" data-time="13:39:25" data-timezone="UTC">01:39PM - 17 Apr 20 UTC</span>
</div>
<div class="user">
<a href="https://github.com/susodapop" rel="noopener" target="_blank">
<img alt="susodapop" class="onebox-avatar-inline" height="20" src="assets/17067911" width="20"/>
          susodapop
        </a>
</div>
<div class="lines" title="10 commits changed 3 files with 851 additions and 18 deletions">
<a href="https://github.com/getredash/redash-toolbelt/pull/23/files" rel="noopener" target="_blank">
<span class="added">+851</span>
<span class="removed">-18</span>
</a>
</div>
</div>
</div>
</div>
<div class="github-row">
<p class="github-body-container">## ⚠️ Help Requested: Beta Testers ⚠️ 

The migration script in this PR is now<span class="show-more-container"><a class="show-more" href="https://github.com/getredash/redash-toolbelt/pull/23" rel="noopener" target="_blank">…</a></span><span class="excerpt hidden"> ready for wider testing. Please follow these steps to test it:

### Setup
1. Clone this repository and check out the `issue-5` branch
2. Make a fresh Python virtual environment with Python 3.6 or newer: `python3 -m virtualenv &lt;env name&gt;`
3. Activate your virtual environment: `. &lt;env name&gt;/bin/activate` (macos) or `&lt;env name&gt;\scripts\activate` (windows)
4. `pip install poetry`
5. `poetry build`
6. `pip install dist/redash_toolbelt-0.1.5.tar.gz`

### Usage

**Warning**: this script is provided as-is. Make sure you back up your Redash data before attempting to migrate.

You can now run the script from within your virtual environment with the command `redash-migrate`. The first time you run `redash-migrate` a file named `meta.json` will be created in your working directory. Before you can proceed, you must provide the address and admin API key for both the origin and destination Redash instances in this file. You will also need to enter a mapping of origin data source id -&gt; destination data source id in `meta.data_sources`. If you already created some users in the destination instance, be sure to enter them into the `meta.users` mapping as well.

Throughout `meta.json`, the keys in each top-level object represent the origin id for that object. The JSON spec does not allow the keys of an object to be integers. So you should wrap these id's in quotation marks. The migration script will convert them to integers before proceeding.

`redash-migrate` includes several sub-commands:
- `check_data_sources`
- `users`
- `queries`
- `visualizations`
- `dashboards`
- `alerts`
- `favorites`
- `disable_users`

They should be run in the order presented above. As you run each step of the migration, the script will print debug messages to the screen. If you encounter issues with the script, please open an issue against this repository.

### Next Steps

Once testing is complete, we will push these changes to Pypi. Typical usage will not require cloning the repo. Users will need only to run `pip install redash-toolbelt`.

## Type of PR

- [x] Add a script

## Description

This effort will add a revised version of [this gist](https://gist.github.com/arikfr/2c7d09f6837b256c58a3d3ef6a97f61a) that uses the `redash_toolbelt` client, supports recent versions of Redash and migrates all of the content (the gist was skipping alerts and favorites).

## Steps

- [x] Convert to Python3 with `2to3`
- [x] Refactor to use `client.py`
- [x] Add support for migrating alerts
- [x] Add support for migrating favorites
- [x] Add a "dry run" / "read only" option
- [x] Add script entry point to `pyproject.toml`
- [ ] Publish documentation / examples

## Related Tickets &amp; Documents

#5</span></p>
</div>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
<span class="post-likes">1 Like</span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_11" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/electric-al.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/electric-al_avatar.png" tabindex="-1" width="48"/><span itemprop="name">electric-al</span></a>
</span>
<link href="assets/8755" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-09-24T12:01:47Z" itemprop="datePublished">
                    September 24, 2021, 12:01pm
                  </time>
<meta content="2021-09-24T12:01:47Z" itemprop="dateModified"/>
<span itemprop="position">11</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Hi there all.</p>
<p>We are planning the work required to migrate to our own hosted Redash in Q4.</p>
<p>Is there a guide on how to do it end to end?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
<span class="post-likes">1 Like</span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_12" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/jesse.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/jesse_avatar.png" tabindex="-1" width="48"/><span itemprop="name">jesse</span></a>
</span>
<link href="assets/8755" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-09-24T12:02:34Z" itemprop="datePublished">
                    September 24, 2021, 12:02pm
                  </time>
<meta content="2021-09-24T12:02:34Z" itemprop="dateModified"/>
<span itemprop="position">12</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Once OSS V10 and the migration script are released we’ll make docs for this <img alt=":slight_smile:" class="emoji" src="assets/slight_smile.png" title=":slight_smile:"/></p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
<span class="post-likes">1 Like</span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_14" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/electric-al.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/electric-al_avatar.png" tabindex="-1" width="48"/><span itemprop="name">electric-al</span></a>
</span>
<link href="assets/8755" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-09-29T13:00:29Z" itemprop="datePublished">
                    September 29, 2021,  1:00pm
                  </time>
<meta content="2021-09-29T13:00:29Z" itemprop="dateModified"/>
<span itemprop="position">14</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Ok great. Just raising that this leaves about 2 months to migrate, and for larger companies who have trusted hosted redash and paid them, this does not leave a lot of time to do the migration.</p>
<p>Is there an ETA on this?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
<span class="post-likes">1 Like</span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_15" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/Arron.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/Arron_avatar.png" tabindex="-1" width="48"/><span itemprop="name">Arron</span></a>
</span>
<link href="assets/8755" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-09-30T14:40:12Z" itemprop="datePublished">
                    September 30, 2021,  2:40pm
                  </time>
<meta content="2021-09-30T14:40:12Z" itemprop="dateModified"/>
<span itemprop="position">15</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Agreed that this doesn’t leave a lot of time to do the migration and test/validate everything.</p>
<p>We will need some contingency time for issues or implementing alternative solutions if it doesn’t work as expected, so we ideally would want to be running the migration script around now.</p>
<p>Is there any talk of offering an extension for those that wish to move to self hosted?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_16" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/jesse.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/jesse_avatar.png" tabindex="-1" width="48"/><span itemprop="name">jesse</span></a>
</span>
<link href="assets/8755" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-10-02T02:39:28Z" itemprop="datePublished">
                    October 2, 2021,  2:39am
                  </time>
<meta content="2021-10-02T02:39:28Z" itemprop="dateModified"/>
<span itemprop="position">16</span>
</span>
</div>
<div class="post" itemprop="text">
<p>The V10 release is now pending (just waiting for our images to build). The migration script will be published next week. The 30 November deadline is firm. Migration, even for large accounts, should require only a few minutes. We’ve tested the migration script on our internal instance (many thousands of queries and dashboards and alerts) and it takes around 6 six minutes. <em>Most</em> instances will be much quicker than that.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
<span class="post-likes">1 Like</span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="2" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_17" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/wtfzambo.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/wtfzambo_avatar.png" tabindex="-1" width="48"/><span itemprop="name">wtfzambo</span></a>
</span>
<link href="assets/8755" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-10-05T09:38:33Z" itemprop="datePublished">
                    October 5, 2021,  9:38am
                  </time>
<meta content="2021-10-05T09:38:33Z" itemprop="dateModified"/>
<span itemprop="position">17</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Just a quick question:</p>
<p>will the migration script also be able to export current users, or shall they re-create a new account?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_18" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/pavlova-marina.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/pavlova-marina_avatar.png" tabindex="-1" width="48"/><span itemprop="name">pavlova-marina</span></a>
</span>
<link href="assets/8755" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-10-05T13:42:30Z" itemprop="datePublished">
                    October 5, 2021,  1:42pm
                  </time>
<meta content="2021-10-05T13:42:30Z" itemprop="dateModified"/>
<span itemprop="position">18</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Hello!</p>
<p>Will the IDs of queries, widgets, visualizations, and dashboard slugs change after migration? Does the migration script cope with the following:</p>
<ol>
<li>queries to the source ‘Query Results’ where we use Redash’s own query ids inside the query like ‘select … from cached_query_xxx’;</li>
<li>query based dropdowns?</li>
</ol>
<p>Will there be available the matching of the old and the new query ids after the migration? (for user information purposes)?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_19" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/electric-al.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/electric-al_avatar.png" tabindex="-1" width="48"/><span itemprop="name">electric-al</span></a>
</span>
<link href="assets/8755" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-10-07T16:08:57Z" itemprop="datePublished">
                    October 7, 2021,  4:08pm
                  </time>
<meta content="2021-10-07T16:08:57Z" itemprop="dateModified"/>
<span itemprop="position">19</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Just wondering whats the ETA on the script?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_20" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/jesse.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/jesse_avatar.png" tabindex="-1" width="48"/><span itemprop="name">jesse</span></a>
</span>
<link href="assets/8755" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-10-07T16:27:14Z" itemprop="datePublished">
                    October 7, 2021,  4:27pm
                  </time>
<meta content="2021-10-07T16:27:14Z" itemprop="dateModified"/>
<span itemprop="position">20</span>
</span>
</div>
<div class="post" itemprop="text">
<p>This week <img alt=":crossed_fingers:" class="emoji" src="assets/crossed_fingers.png" title=":crossed_fingers:"/></p>
<p>Also, we as a community, need a better way to communicate upcoming timelines. I think it’s frustrating for everyone.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_21" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/jesse.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/jesse_avatar.png" tabindex="-1" width="48"/><span itemprop="name">jesse</span></a>
</span>
<link href="assets/8755" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-10-07T16:28:26Z" itemprop="datePublished">
                    October 7, 2021,  4:28pm
                  </time>
<meta content="2021-10-07T16:33:54Z" itemprop="dateModified"/>
<span itemprop="position">21</span>
</span>
</div>
<div class="post" itemprop="text">
<p>This is possible since <code>meta.json</code> contains a map of <code>$originQueryId</code> to <code>$destinationQueryId</code>. It will not be part of the release this week. But we will aim to add it within the next few weeks (or would merge a contribution that implements it sooner).</p>
<p>[Edit] I added an issue to <code>redash-toolbelt</code> to track this: <a class="inline-onebox" href="https://github.com/getredash/redash-toolbelt/issues/64">Migration Script: convert origin QRDS queries to destination · Issue #64 · getredash/redash-toolbelt · GitHub</a></p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
</div>
<div class="topic-body crawler-post" itemscope="" itemtype="http://schema.org/SiteNavigationElement" role="navigation">
<span itemprop="name"><b><a href="/t/updated-migration-script/8755?page=2" itemprop="url" rel="next">next page →</a></b></span>
</div>
</div>
</div>
</div>
<div class="overlay" id="modalOverlay" style="display: none;">
<div class="modal-content">
<p>Login or sign up disabled while the site is in read only mode</p>
<hr/>
<button class="btn btn-login">OK</button>
</div>
</div>
<script src="../../js/script.js"></script>
</body>
</html>