<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet"/>
<link href="../../css/checklist_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_theme_2_be4cb2b86ec06123c5e974acd20fd933d14b129d.css" rel="stylesheet"/>
<link href="../../css/discourse-adplugin_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-akismet_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-cakeday_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-chat-integration_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-details_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-footnote_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-lazy-videos_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-local-dates_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/color_definitions_base__2_8fd59ae1f286f43b3ff17996df07ea951685249d.css" rel="stylesheet"/>
<link href="../../css/style.css" rel="stylesheet"/>
<title>Issue with Widgets Migration</title></head>
<body>
<div class="navbar">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<div class="navbar-buttons">
<button class="btn btn-signup">Sign Up</button>
<button class="btn btn-login"><i class="fas fa-user"></i> Login</button>
<button class="btn btn-search"><i class="fas fa-search"></i></button>
<div class="navbar-toggle">
<div class="dots"></div>
<div class="dots"></div>
<div class="dots"></div>
</div>
</div>
</div>
<div class="sidebar">
<div class="sidebar-content">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<ul class="sidebar-grid">
<!-- <li><a href="#"><i class="fas fa-list-ul"></i> Topics</a></li> -->
<li><a href="../../page_0.html"><i class="fas fa-layer-group"></i> Topics</a></li>
<li><a href="../../users.html"><i class="fas fa-users"></i> Users</a></li>
<li><a href="../../about.html"><i class="fas fa-info-circle"></i> About</a></li>
<li><a href="../../faq.html"><i class="fas fa-question-circle"></i> FAQ</a></li>
<li><a href="../../groups.html"><i class="fas fa-users"></i> Groups</a></li>
<li><a href="../../badges.html"><i class="fas fa-certificate"></i> Badges</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#categories"><span>▼</span>Categories</a></h3>
<hr/>
<ul class="sidebar-grid categories">
<li>
<a class="badge-wrapper bullet" href="../../c/support/6.html">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name">Support</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/feature-requests/5.html">
<span class="badge-category-bg" style="background-color: #3AB54A"></span>
<span class="badge-category clear-badge">
<span class="category-name">Feature Requests</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/uncategorized/1.html">
<span class="badge-category-bg" style="background-color: #AB9364"></span>
<span class="badge-category clear-badge">
<span class="category-name">Uncategorized</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/development/7.html">
<span class="badge-category-bg" style="background-color: #8C6238"></span>
<span class="badge-category clear-badge">
<span class="category-name">Development</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/tips-tricks-query-examples/11.html">
<span class="badge-category-bg" style="background-color: #652D90"></span>
<span class="badge-category clear-badge" style="white-space: normal;">
<span class="category-name">Tips, Tricks &amp; Query Examples</span>
</span>
</a>
</li>
<li><a href="../../categories.html"><i class="fas fa-list-ul"></i> All categories</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#tags"><span>▼</span>Tags</a></h3>
<hr/>
<ul class="sidebar-grid tags">
<li><a href="../../tag/query_results.html"><i class="fas fa-tag"></i> query_results</a></li>
<li><a href="../../tag/feature-request.html"><i class="fas fa-tag"></i> feature-request</a></li>
<li><a href="../../tag/parameters.html"><i class="fas fa-tag"></i> parameters</a></li>
<li><a href="../../tag/visualizations.html"><i class="fas fa-tag"></i> visualizations</a></li>
<li><a href="../../tag/alerts.html"><i class="fas fa-tag"></i> alerts</a></li>
<li><a href="../../tags.html"><i class="fas fa-list-ul"></i> All tags</a></li>
</ul>
</div>
<div class="sidebar-footer">
            © 2023 <a href="https://discuss.redash.io/" target="_blank">discuss.redash.io</a>
</div>
</div>
<div class="overlay"></div>
<div class="content">
<div class="global-notice">
<div class="row">
<div class="alert alert-info alert-read-only" id="global-notice-alert-read-only">
<span class="text">This site is in read only mode. Please continue to browse, but replying, likes,
                        and other actions are disabled for now.</span>
</div>
</div>
</div>
<div class="imported_page" id="imported_page">
<div class="wrap" id="main-outlet" role="main">
<div id="topic-title">
<h1>
<a href="/t/issue-with-widgets-migration/7808">Issue with Widgets Migration</a>
</h1>
<div class="topic-category" itemscope="" itemtype="http://schema.org/BreadcrumbList">
<span itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
<a class="badge-wrapper bullet" href="../../c/support/6.html" itemprop="item">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name" itemprop="name">Support</span>
</span>
</a>
<meta content="1" itemprop="position"/>
</span>
</div>
<div class="topic-category">
<div class="discourse-tags list-tags">
<a class="discourse-tag" href="https://discuss.redash.io/parameters" rel="tag">parameters</a>
</div>
</div>
</div>
<div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
<meta content="Issue with Widgets Migration" itemprop="headline"/>
<meta content="Support" itemprop="articleSection"/>
<meta content="parameters" itemprop="keywords"/>
<div itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
<meta content="Redash Discourse" itemprop="name"/>
<div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject">
<meta content="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/c07bc573841e1e4a0013ea3b6fe088a1534228a3.png" itemprop="url"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_1">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/pablomassirer.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/pablomassirer_avatar.png" tabindex="-1" width="48"/><span itemprop="name">pablomassirer</span></a>
</span>
<link href="https://discuss.redash.io/t/issue-with-widgets-migration/7808" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-01-08T15:00:43Z" itemprop="datePublished">
                    January 8, 2021,  3:00pm
                  </time>
<meta content="2021-01-08T16:50:02Z" itemprop="dateModified"/>
<span itemprop="position">1</span>
</span>
</div>
<div class="post" itemprop="articleBody">
<p>I’m in a process to migrate from one Redash environment to another, which is a copy from the original already created. I was successful in the migration of the Queries and Visualizations, but not with the Dashboards and Widgets so far.</p>
<p>I’m using the v8 of Redash on both environments, and to migrate from one to another i’m using the migrator script: <a href="https://gist.github.com/arikfr/d29db3617df5a8d547b4709a631f5b6a" rel="noopener nofollow ugc">migrator.py</a></p>
<p>The issue is with the Widgets creation, since i can migrate succesfully the dashboards alone.</p>
<p>What i’m trying to do, is create first the Dashboard via post in the destination, and afterwards in the same process of the script, create the Widgets of that Dashboard. I’m using pretty much the same structure provided in the migrator script, with some logic modifications and adaptations for our case.</p>
<p>The error tha i’m facing is</p>
<blockquote>
<p>500 Server Error: INTERNAL SERVER ERROR for url: <a href="https://my-domain//api/widgets" rel="noopener nofollow ugc">https://my-domain//api/widgets</a></p>
</blockquote>
<p>Like occured with the visualizations of the queries, the parameters i’m using are the parameters provided from the migrator script, once the documentation doesn’t specify which are able to use. And also, differently from the dashboards and queries, i cant access the visualizations and widgets API path(eg. url: …api/widgets), of which i believe is designed this way.</p>
<p>In this situation my progress is being determined by trial and error, suspecting for a long time that this issue may be occuring by incorrect parameter sending, via the request post method. Because using the Redash-API-Client, i’m succesfully inserting/creating the Widgets in the desired Dashboard.</p>
<p>Would anyone know the probable cause for this issue to be happening? Or is there some documentation about widgets POST method, including the necessary parameters to be send?</p>
<p>Thanks in advance.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_2" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/k4s1m.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/k4s1m_avatar.png" tabindex="-1" width="48"/><span itemprop="name">k4s1m</span></a>
</span>
<link href="https://discuss.redash.io/t/issue-with-widgets-migration/7808" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-01-11T01:08:52Z" itemprop="datePublished">
                    January 11, 2021,  1:08am
                  </time>
<meta content="2021-01-11T01:08:52Z" itemprop="dateModified"/>
<span itemprop="position">2</span>
</span>
</div>
<div class="post" itemprop="text">
<p>The widgets API isn’t documented but it should be possible to POST a widget object <em>from</em> one instance <em>into</em> another one, unmodified. I notice that your error message shows a double forward slash between <code>my-domain</code> and <code>api/widgets</code>. Is this a typo?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_3" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/pablomassirer.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/pablomassirer_avatar.png" tabindex="-1" width="48"/><span itemprop="name">pablomassirer</span></a>
</span>
<link href="https://discuss.redash.io/t/issue-with-widgets-migration/7808" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-01-11T14:53:41Z" itemprop="datePublished">
                    January 11, 2021,  2:53pm
                  </time>
<meta content="2021-01-11T16:50:25Z" itemprop="dateModified"/>
<span itemprop="position">3</span>
</span>
</div>
<div class="post" itemprop="text">
<p>No it’s not a typo, it was intentional. Once i noticed that the redash api client post included this additional slash, i though in add it. It seems that it doesn’t chance anything, since i did it with the POST of the visualizations and both double slash and single slash resulted in the same.<br/>
Regarding the widgets insertion via POST, i’m using the following structure to send to the destination:</p>
<blockquote>
<p>“dashboard_id”: dash_id,<br/>
“options”: dash_options,<br/>
“width”: dash_width,<br/>
“text”: dash_text,<br/>
“visualization_id”:  dash_v_id</p>
</blockquote>
<p>The dashboard_id parameter i’m getting via GET from the destination,  and than after that, i’m inserting the Widget in the location. So initially i insert the Dash via POST, then i GET the id from the Dash inserted in the destination, and finally i use the collected id to insert by POST, the Widget of that Dashboard into it.</p>
<p>Do you think i’m using the correct structure to send via POST? For a while i though that maybe the parameters could be causing this error. Since the same ERROR 500, that i was facing with the visualizations, was solved by the use of the correct parameters to do the POST.</p>
<p>To send the widget to the Dash i’m using the id of it, but wouldn’t be the “slug” the id of that Dash? Shouldn’t i be sending the slug instead?</p>
<p>In this migration process i did archive a significant quantity of objects(Dashboards, queries, especially queries), and running out of ideas of the possible cause, i thought that maybe it could be interfering and causing the error that i’m facing. But sincerelly, i don’t think it is the number of archived objects that is causing this situation.</p>
<p>Would you recommend any other way to migrate the widgets instead of this one that i’m trying currently?<br/>
I really don’t know what i’m doing wrong, bu so far i’m not succeding with the task this way.</p>
<p>Thanks for the reply.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_4" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/pablomassirer.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/pablomassirer_avatar.png" tabindex="-1" width="48"/><span itemprop="name">pablomassirer</span></a>
</span>
<link href="https://discuss.redash.io/t/issue-with-widgets-migration/7808" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-01-14T12:28:31Z" itemprop="datePublished">
                    January 14, 2021, 12:28pm
                  </time>
<meta content="2021-01-14T12:28:31Z" itemprop="dateModified"/>
<span itemprop="position">4</span>
</span>
</div>
<div class="post" itemprop="text">
<p>I find out that the issue was really with the parameters.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="overlay" id="modalOverlay" style="display: none;">
<div class="modal-content">
<p>Login or sign up disabled while the site is in read only mode</p>
<hr/>
<button class="btn btn-login">OK</button>
</div>
</div>
<script src="../../js/script.js"></script>
</body>
</html>