<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet"/>
<link href="../../css/checklist_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_theme_2_be4cb2b86ec06123c5e974acd20fd933d14b129d.css" rel="stylesheet"/>
<link href="../../css/discourse-adplugin_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-akismet_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-cakeday_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-chat-integration_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-details_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-footnote_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-lazy-videos_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-local-dates_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/color_definitions_base__2_8fd59ae1f286f43b3ff17996df07ea951685249d.css" rel="stylesheet"/>
<link href="../../css/style.css" rel="stylesheet"/>
<title>Schema refresh failed - MongoDB datasource</title></head>
<body>
<div class="navbar">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<div class="navbar-buttons">
<button class="btn btn-signup">Sign Up</button>
<button class="btn btn-login"><i class="fas fa-user"></i> Login</button>
<button class="btn btn-search"><i class="fas fa-search"></i></button>
<div class="navbar-toggle">
<div class="dots"></div>
<div class="dots"></div>
<div class="dots"></div>
</div>
</div>
</div>
<div class="sidebar">
<div class="sidebar-content">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<ul class="sidebar-grid">
<!-- <li><a href="#"><i class="fas fa-list-ul"></i> Topics</a></li> -->
<li><a href="../../page_0.html"><i class="fas fa-layer-group"></i> Topics</a></li>
<li><a href="../../users.html"><i class="fas fa-users"></i> Users</a></li>
<li><a href="../../about.html"><i class="fas fa-info-circle"></i> About</a></li>
<li><a href="../../faq.html"><i class="fas fa-question-circle"></i> FAQ</a></li>
<li><a href="../../groups.html"><i class="fas fa-users"></i> Groups</a></li>
<li><a href="../../badges.html"><i class="fas fa-certificate"></i> Badges</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#categories"><span>▼</span>Categories</a></h3>
<hr/>
<ul class="sidebar-grid categories">
<li>
<a class="badge-wrapper bullet" href="../../c/support/6.html">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name">Support</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/feature-requests/5.html">
<span class="badge-category-bg" style="background-color: #3AB54A"></span>
<span class="badge-category clear-badge">
<span class="category-name">Feature Requests</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/uncategorized/1.html">
<span class="badge-category-bg" style="background-color: #AB9364"></span>
<span class="badge-category clear-badge">
<span class="category-name">Uncategorized</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/development/7.html">
<span class="badge-category-bg" style="background-color: #8C6238"></span>
<span class="badge-category clear-badge">
<span class="category-name">Development</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/tips-tricks-query-examples/11.html">
<span class="badge-category-bg" style="background-color: #652D90"></span>
<span class="badge-category clear-badge" style="white-space: normal;">
<span class="category-name">Tips, Tricks &amp; Query Examples</span>
</span>
</a>
</li>
<li><a href="../../categories.html"><i class="fas fa-list-ul"></i> All categories</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#tags"><span>▼</span>Tags</a></h3>
<hr/>
<ul class="sidebar-grid tags">
<li><a href="../../tag/query_results.html"><i class="fas fa-tag"></i> query_results</a></li>
<li><a href="../../tag/feature-request.html"><i class="fas fa-tag"></i> feature-request</a></li>
<li><a href="../../tag/parameters.html"><i class="fas fa-tag"></i> parameters</a></li>
<li><a href="../../tag/visualizations.html"><i class="fas fa-tag"></i> visualizations</a></li>
<li><a href="../../tag/alerts.html"><i class="fas fa-tag"></i> alerts</a></li>
<li><a href="../../tags.html"><i class="fas fa-list-ul"></i> All tags</a></li>
</ul>
</div>
<div class="sidebar-footer">
            © 2023 <a href="https://discuss.redash.io/" target="_blank">discuss.redash.io</a>
</div>
</div>
<div class="overlay"></div>
<div class="content">
<div class="global-notice">
<div class="row">
<div class="alert alert-info alert-read-only" id="global-notice-alert-read-only">
<span class="text">This site is in read only mode. Please continue to browse, but replying, likes,
                        and other actions are disabled for now.</span>
</div>
</div>
</div>
<div class="imported_page" id="imported_page">
<div class="wrap" id="main-outlet" role="main">
<div id="topic-title">
<h1>
<a href="/t/schema-refresh-failed-mongodb-datasource/4020">Schema refresh failed - MongoDB datasource</a>
</h1>
<div class="topic-category" itemscope="" itemtype="http://schema.org/BreadcrumbList">
<span itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
<a class="badge-wrapper bullet" href="../../c/support/6.html" itemprop="item">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name" itemprop="name">Support</span>
</span>
</a>
<meta content="1" itemprop="position"/>
</span>
</div>
</div>
<div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
<meta content="Schema refresh failed - MongoDB datasource" itemprop="headline"/>
<meta content="Support" itemprop="articleSection"/>
<meta content="" itemprop="keywords"/>
<div itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
<meta content="Redash Discourse" itemprop="name"/>
<div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject">
<meta content="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/c07bc573841e1e4a0013ea3b6fe088a1534228a3.png" itemprop="url"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_1">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/YakobovLior.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/YakobovLior_avatar.png" tabindex="-1" width="48"/><span itemprop="name">YakobovLior</span></a>
</span>
<link href="https://discuss.redash.io/t/schema-refresh-failed-mongodb-datasource/4020" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-06-19T12:48:08Z" itemprop="datePublished">
                    June 19, 2019, 12:48pm
                  </time>
<meta content="2019-06-19T12:48:08Z" itemprop="dateModified"/>
<span itemprop="position">1</span>
</span>
</div>
<div class="post" itemprop="articleBody">
<p>Hello,<br/>
I’m running latest redash docker-compose based, and I’m having issues with MongoDB datasource.<br/>
We are using AWS DocumentDB service and until a few days ago I was able to run queries from redash against the DocumentDB, but now when I’m trying to query I cannot get the database collections and therefore the query fails.<br/>
Anyone has a solution for this? I have tried running redash in debug mode but didn’t find anything useful.<br/>
Thanks,<br/>
Lior</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_2" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/YakobovLior.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/YakobovLior_avatar.png" tabindex="-1" width="48"/><span itemprop="name">YakobovLior</span></a>
</span>
<link href="https://discuss.redash.io/t/schema-refresh-failed-mongodb-datasource/4020" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-06-30T13:15:25Z" itemprop="datePublished">
                    June 30, 2019,  1:15pm
                  </time>
<meta content="2019-06-30T13:15:25Z" itemprop="dateModified"/>
<span itemprop="position">2</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Hello,<br/>
Any help? does anyone familiar with this error?</p>
<p>Thanks,<br/>
Lior</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_3" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/arikfr.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/arikfr_avatar.png" tabindex="-1" width="48"/><span itemprop="name">arikfr</span></a>
</span>
<link href="https://discuss.redash.io/t/schema-refresh-failed-mongodb-datasource/4020" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-07-03T07:34:45Z" itemprop="datePublished">
                    July 3, 2019,  7:34am
                  </time>
<meta content="2019-07-03T07:34:45Z" itemprop="dateModified"/>
<span itemprop="position">3</span>
</span>
</div>
<div class="post" itemprop="text">
<aside class="quote no-group" data-post="1" data-topic="4020">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="assets/1197_2.png" width="20"/> YakobovLior:</div>
<blockquote>
<p>but now when I’m trying to query I cannot get the database collections and therefore the query fails.</p>
</blockquote>
</aside>
<p>Considering it was working, what changed between now and then? What errors do you see in the logs?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="2" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_4" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/YakobovLior.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/YakobovLior_avatar.png" tabindex="-1" width="48"/><span itemprop="name">YakobovLior</span></a>
</span>
<link href="https://discuss.redash.io/t/schema-refresh-failed-mongodb-datasource/4020" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-08-05T13:02:39Z" itemprop="datePublished">
                    August 5, 2019,  1:02pm
                  </time>
<meta content="2019-08-05T13:02:39Z" itemprop="dateModified"/>
<span itemprop="position">4</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Hey Arik,<br/>
Actually I’m not familiar with any change, as I described earlier we are using AWS managed service so maybe something has changed but is out of my sight.<br/>
From other checks I saw that if I start my own MongoDB there are system and admin schemas which are missing in AWS DocumentDB, could that be the issue? (I was able to query my local MongoDB but still cannot query the DocumentDB).</p>
<p>Thanks,<br/>
Lior</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_5" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/YakobovLior.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/YakobovLior_avatar.png" tabindex="-1" width="48"/><span itemprop="name">YakobovLior</span></a>
</span>
<link href="https://discuss.redash.io/t/schema-refresh-failed-mongodb-datasource/4020" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-08-20T07:21:35Z" itemprop="datePublished">
                    August 20, 2019,  7:21am
                  </time>
<meta content="2019-08-20T07:21:35Z" itemprop="dateModified"/>
<span itemprop="position">5</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Hey Arik,<br/>
Any comments about my last response?<br/>
The usage of Redash against the DocumentDB is vital for us - I would appriciate any help possible.<br/>
Thanks,<br/>
Lior</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_6" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/jesse.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/jesse_avatar.png" tabindex="-1" width="48"/><span itemprop="name">jesse</span></a>
</span>
<link href="https://discuss.redash.io/t/schema-refresh-failed-mongodb-datasource/4020" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-09-05T18:29:03Z" itemprop="datePublished">
                    September 5, 2019,  6:29pm
                  </time>
<meta content="2019-09-05T18:29:03Z" itemprop="dateModified"/>
<span itemprop="position">6</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Hi <a class="mention" href="/u/yakobovlior">@YakobovLior</a>, are you able to query the DocumentDB from a command line or other software? Can you share the specific errors that you see?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_7" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/YakobovLior.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/YakobovLior_avatar.png" tabindex="-1" width="48"/><span itemprop="name">YakobovLior</span></a>
</span>
<link href="https://discuss.redash.io/t/schema-refresh-failed-mongodb-datasource/4020" itemprop="mainEntityOfPage"/>
<link href="https://global.discourse-cdn.com/standard17/uploads/redash1/original/2X/a/abc5da7774c28346d6005cdfae73c867ef21a3b1.png" itemprop="image"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-11-10T12:26:51Z" itemprop="datePublished">
                    November 10, 2019, 12:26pm
                  </time>
<meta content="2019-11-10T12:26:51Z" itemprop="dateModified"/>
<span itemprop="position">7</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Hey <a class="mention" href="/u/jesse">@jesse</a>,<br/>
AWS DocumentDB is with MongoDB compatibility, therefore I’m able to query it for exmaple with mongo cli, MongoDB Compass tool, PyMongo library using Python and so on.<br/>
When I try to configure the DocumentDB as a MongoDB data source, it does work and also the test returns success, but when I’m trying to query the data source, this is the error I’m getting:<br/>
<img alt="image" data-base62-sha1="ovzxSfcdzO8AJO97GaCR5nRUILL" height="77" src="assets/abc5da7774c28346d6005cdfae73c867ef21a3b1.png" width="313"/></p>
<p>From AWS DocumentDB documentation, it says that the database does not contain system and admin schemas: (<a class="inline-onebox" href="https://docs.aws.amazon.com/documentdb/latest/developerguide/functional-differences.html#functional-differences.admin-databases" rel="noopener nofollow ugc">Functional Differences: Amazon DocumentDB and MongoDB - Amazon DocumentDB</a>)<br/>
<div class="lightbox-wrapper"><a class="lightbox" data-download-href="/uploads/short-url/zZO5QiIbqm4PUXCN6inshGyjw4H.png?dl=1" href="https://global.discourse-cdn.com/standard17/uploads/redash1/original/2X/f/fc48b4b6a67057e7f48c949969942cdd318ab82b.png" rel="noopener nofollow ugc" title="image"><img alt="image" data-base62-sha1="zZO5QiIbqm4PUXCN6inshGyjw4H" data-small-upload="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/2X/f/fc48b4b6a67057e7f48c949969942cdd318ab82b_2_10x10.png" height="52" src="assets/fc48b4b6a67057e7f48c949969942cdd318ab82b_2_690x52.png" srcset="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/2X/f/fc48b4b6a67057e7f48c949969942cdd318ab82b_2_690x52.png, https://global.discourse-cdn.com/standard17/uploads/redash1/original/2X/f/fc48b4b6a67057e7f48c949969942cdd318ab82b.png 1.5x, https://global.discourse-cdn.com/standard17/uploads/redash1/original/2X/f/fc48b4b6a67057e7f48c949969942cdd318ab82b.png 2x" width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">986×75 8.45 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>Could that be the issue here?</p>
<p>Thanks,<br/>
Lior</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_8" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/nodesocket.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/nodesocket_avatar.png" tabindex="-1" width="48"/><span itemprop="name">nodesocket</span></a>
</span>
<link href="https://discuss.redash.io/t/schema-refresh-failed-mongodb-datasource/4020" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2020-08-02T05:04:39Z" itemprop="datePublished">
                    August 2, 2020,  5:04am
                  </time>
<meta content="2020-08-02T05:04:39Z" itemprop="dateModified"/>
<span itemprop="position">8</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Hello. I am also having this exact same problem. Is AWS DocumentDB not supported? It’s so close it appears, just can’t load the collections. Probably would be a minor patch to the Redash MongoDB driver. Happy to assist is anybody can point in the right direction.</p>
<p>Able to connect to the AWS DocumentDB from Node.js and also using MongoDB Compass as well.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_9" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/k4s1m.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/k4s1m_avatar.png" tabindex="-1" width="48"/><span itemprop="name">k4s1m</span></a>
</span>
<link href="https://discuss.redash.io/t/schema-refresh-failed-mongodb-datasource/4020" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2020-08-03T16:26:56Z" itemprop="datePublished">
                    August 3, 2020,  4:26pm
                  </time>
<meta content="2020-08-03T16:26:56Z" itemprop="dateModified"/>
<span itemprop="position">9</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Here’s the code Redash uses to get the schema for mongodb. I don’t use DocumentDB but maybe you can see what’s missing or broken here?</p>
<aside class="onebox githubblob">
<header class="source">
<a href="https://github.com/getredash/redash/blob/ecb9adf903842694ab01479727709064296ea029/redash/query_runner/mongodb.py#L229-L241" rel="nofollow noopener" target="_blank">github.com</a>
</header>
<article class="onebox-body">
<h4><a href="https://github.com/getredash/redash/blob/ecb9adf903842694ab01479727709064296ea029/redash/query_runner/mongodb.py#L229-L241" rel="nofollow noopener" target="_blank">getredash/redash/blob/ecb9adf903842694ab01479727709064296ea029/redash/query_runner/mongodb.py#L229-L241</a></h4>
<pre class="onebox"><code class="lang-py"><ol class="start lines" start="229" style="counter-reset: li-counter 228 ;">
<li>def get_schema(self, get_stats=False):</li>
<li>    schema = {}</li>
<li>    db = self._get_db()</li>
<li>    for collection_name in db.collection_names():</li>
<li>        if collection_name.startswith("system."):</li>
<li>            continue</li>
<li>        columns = self._get_collection_fields(db, collection_name)</li>
<li>        schema[collection_name] = {</li>
<li>            "name": collection_name,</li>
<li>            "columns": sorted(columns),</li>
<li>        }</li>
<li>
</li><li>    return list(schema.values())</li>
</ol></code></pre>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_10" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/nodesocket.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/nodesocket_avatar.png" tabindex="-1" width="48"/><span itemprop="name">nodesocket</span></a>
</span>
<link href="https://discuss.redash.io/t/schema-refresh-failed-mongodb-datasource/4020" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2020-08-04T21:34:23Z" itemprop="datePublished">
                    August 4, 2020,  9:34pm
                  </time>
<meta content="2020-08-04T21:34:23Z" itemprop="dateModified"/>
<span itemprop="position">10</span>
</span>
</div>
<div class="post" itemprop="text">
<p><a class="mention" href="/u/k4s1m">@k4s1m</a> thanks for this. I am not a Python developer, I use Node.js. If I provision a test DocumentDB instance and give you credentials, do you think you could test the above code out against DocumentDB and find where it’s breaking? I just ask, because I don’t have any of the Python code setup or an environment.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_11" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/nodesocket.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/nodesocket_avatar.png" tabindex="-1" width="48"/><span itemprop="name">nodesocket</span></a>
</span>
<link href="https://discuss.redash.io/t/schema-refresh-failed-mongodb-datasource/4020" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2020-08-04T21:49:58Z" itemprop="datePublished">
                    August 4, 2020,  9:49pm
                  </time>
<meta content="2020-08-04T21:49:58Z" itemprop="dateModified"/>
<span itemprop="position">11</span>
</span>
</div>
<div class="post" itemprop="text">
<p>I also created an issue in Github for this.</p>
<aside class="onebox githubissue">
<header class="source">
<a href="https://github.com/getredash/redash/issues/5089" rel="nofollow noopener" target="_blank">github.com/getredash/redash</a>
</header>
<article class="onebox-body">
<div class="github-row">
<div class="github-icon-container" title="Issue">
<svg aria-hidden="true" class="github-icon" height="60" viewbox="0 0 14 16" width="60"><path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
</div>
<div class="github-info-container">
<h4>
<a href="https://github.com/getredash/redash/issues/5089" rel="nofollow noopener" target="_blank">AWS DocumentDB Support</a>
</h4>
<div class="github-info">
<div class="date">
        opened <span class="discourse-local-date" data-date="2020-08-04" data-format="ll" data-time="21:45:16" data-timezone="UTC">09:45PM - 04 Aug 20 UTC</span>
</div>
<div class="user">
<a href="https://github.com/nodesocket" rel="nofollow noopener" target="_blank">
<img alt="nodesocket" class="onebox-avatar-inline" height="20" src="assets/523312" width="20"/>
          nodesocket
        </a>
</div>
</div>
</div>
</div>
<div class="github-row">
<p class="github-content">Redash Version: Version: 8.0.0+b32245 (a16f551)
Browser/OS: Chrome / MacOS 84.0.4147.105
How did you install Redash: Self hosted AWS AMI (ami-0b97435028ca44fcc)
As it currently stands...</p>
</div>
<div class="labels">
</div>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="overlay" id="modalOverlay" style="display: none;">
<div class="modal-content">
<p>Login or sign up disabled while the site is in read only mode</p>
<hr/>
<button class="btn btn-login">OK</button>
</div>
</div>
<script src="../../js/script.js"></script>
</body>
</html>