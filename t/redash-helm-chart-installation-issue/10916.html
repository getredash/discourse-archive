<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet"/>
<link href="../../css/checklist_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_theme_2_be4cb2b86ec06123c5e974acd20fd933d14b129d.css" rel="stylesheet"/>
<link href="../../css/discourse-adplugin_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-akismet_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-cakeday_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-chat-integration_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-details_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-footnote_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-lazy-videos_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-local-dates_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/color_definitions_base__2_8fd59ae1f286f43b3ff17996df07ea951685249d.css" rel="stylesheet"/>
<link href="../../css/style.css" rel="stylesheet"/>
<title>Redash Helm chart - Installation issue</title></head>
<body>
<div class="navbar">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<div class="navbar-buttons">
<button class="btn btn-signup">Sign Up</button>
<button class="btn btn-login"><i class="fas fa-user"></i> Login</button>
<button class="btn btn-search"><i class="fas fa-search"></i></button>
<div class="navbar-toggle">
<div class="dots"></div>
<div class="dots"></div>
<div class="dots"></div>
</div>
</div>
</div>
<div class="sidebar">
<div class="sidebar-content">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<ul class="sidebar-grid">
<!-- <li><a href="#"><i class="fas fa-list-ul"></i> Topics</a></li> -->
<li><a href="../../page_0.html"><i class="fas fa-layer-group"></i> Topics</a></li>
<li><a href="../../users.html"><i class="fas fa-users"></i> Users</a></li>
<li><a href="../../about.html"><i class="fas fa-info-circle"></i> About</a></li>
<li><a href="../../faq.html"><i class="fas fa-question-circle"></i> FAQ</a></li>
<li><a href="../../groups.html"><i class="fas fa-users"></i> Groups</a></li>
<li><a href="../../badges.html"><i class="fas fa-certificate"></i> Badges</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#categories"><span>▼</span>Categories</a></h3>
<hr/>
<ul class="sidebar-grid categories">
<li>
<a class="badge-wrapper bullet" href="../../c/support/6.html">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name">Support</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/feature-requests/5.html">
<span class="badge-category-bg" style="background-color: #3AB54A"></span>
<span class="badge-category clear-badge">
<span class="category-name">Feature Requests</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/uncategorized/1.html">
<span class="badge-category-bg" style="background-color: #AB9364"></span>
<span class="badge-category clear-badge">
<span class="category-name">Uncategorized</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/development/7.html">
<span class="badge-category-bg" style="background-color: #8C6238"></span>
<span class="badge-category clear-badge">
<span class="category-name">Development</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/tips-tricks-query-examples/11.html">
<span class="badge-category-bg" style="background-color: #652D90"></span>
<span class="badge-category clear-badge" style="white-space: normal;">
<span class="category-name">Tips, Tricks &amp; Query Examples</span>
</span>
</a>
</li>
<li><a href="../../categories.html"><i class="fas fa-list-ul"></i> All categories</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#tags"><span>▼</span>Tags</a></h3>
<hr/>
<ul class="sidebar-grid tags">
<li><a href="../../tag/query_results.html"><i class="fas fa-tag"></i> query_results</a></li>
<li><a href="../../tag/feature-request.html"><i class="fas fa-tag"></i> feature-request</a></li>
<li><a href="../../tag/parameters.html"><i class="fas fa-tag"></i> parameters</a></li>
<li><a href="../../tag/visualizations.html"><i class="fas fa-tag"></i> visualizations</a></li>
<li><a href="../../tag/alerts.html"><i class="fas fa-tag"></i> alerts</a></li>
<li><a href="../../tags.html"><i class="fas fa-list-ul"></i> All tags</a></li>
</ul>
</div>
<div class="sidebar-footer">
            © 2023 <a href="https://discuss.redash.io/" target="_blank">discuss.redash.io</a>
</div>
</div>
<div class="overlay"></div>
<div class="content">
<div class="global-notice">
<div class="row">
<div class="alert alert-info alert-read-only" id="global-notice-alert-read-only">
<span class="text">This site is in read only mode. Please continue to browse, but replying, likes,
                        and other actions are disabled for now.</span>
</div>
</div>
</div>
<div class="imported_page" id="imported_page">
<div class="wrap" id="main-outlet" role="main">
<div id="topic-title">
<h1>
<a href="/t/redash-helm-chart-installation-issue/10916">Redash Helm chart - Installation issue</a>
</h1>
<div class="topic-category" itemscope="" itemtype="http://schema.org/BreadcrumbList">
<span itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
<a class="badge-wrapper bullet" href="../../c/support/6.html" itemprop="item">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name" itemprop="name">Support</span>
</span>
</a>
<meta content="1" itemprop="position"/>
</span>
</div>
</div>
<div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
<meta content="Redash Helm chart - Installation issue" itemprop="headline"/>
<meta content="Support" itemprop="articleSection"/>
<meta content="" itemprop="keywords"/>
<div itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
<meta content="Redash Discourse" itemprop="name"/>
<div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject">
<meta content="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/c07bc573841e1e4a0013ea3b6fe088a1534228a3.png" itemprop="url"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_1">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/ccbeloy.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/ccbeloy_avatar.png" tabindex="-1" width="48"/><span itemprop="name">ccbeloy</span></a>
</span>
<link href="assets/10916" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2022-08-18T03:18:26Z" itemprop="datePublished">
                    August 18, 2022,  3:18am
                  </time>
<meta content="2022-08-18T03:18:26Z" itemprop="dateModified"/>
<span itemprop="position">1</span>
</span>
</div>
<div class="post" itemprop="articleBody">
<p>Hi - I’m trying to install on AWS EKS with external Postgres and external Redis. Having issue with the install job not able to create the tables…although no error logs printed. Please see below logs.</p>
<p>Any idea please?</p>
<p>Installing Redash:<br/>
[2022-08-18 03:13:08,299][PID:64][DEBUG][redash.query_runner] Registering PostgreSQL (pg) query runner.<br/>
[2022-08-18 03:13:08,299][PID:64][DEBUG][redash.query_runner] Registering Redshift (redshift) query runner.<br/>
[2022-08-18 03:13:08,300][PID:64][DEBUG][redash.query_runner] Registering Redshift (with IAM User/Role) (redshift_iam) query runner.<br/>
[2022-08-18 03:13:08,300][PID:64][DEBUG][redash.query_runner] Registering CockroachDB (cockroach) query runner.<br/>
[2022-08-18 03:13:08,302][PID:64][DEBUG][redash.query_runner] Registering MySQL (mysql) query runner.<br/>
[2022-08-18 03:13:08,302][PID:64][DEBUG][redash.query_runner] Registering MySQL (Amazon RDS) (rds_mysql) query runner.<br/>
[2022-08-18 03:13:08,304][PID:64][DEBUG][redash.query_runner] Registering Druid (druid) query runner.<br/>
[2022-08-18 03:13:08,363][PID:64][DEBUG][passlib.utils.compat] loaded lazy attr ‘SafeConfigParser’: &lt;class ‘configparser.ConfigParser’&gt;<br/>
[2022-08-18 03:13:08,363][PID:64][DEBUG][passlib.utils.compat] loaded lazy attr ‘NativeStringIO’: &lt;class ‘_io.StringIO’&gt;<br/>
[2022-08-18 03:13:08,363][PID:64][DEBUG][passlib.utils.compat] loaded lazy attr ‘BytesIO’: &lt;class ‘_io.BytesIO’&gt;<br/>
[2022-08-18 03:13:08,787][PID:64][DEBUG][redash.query_runner] Registering Python (python) query runner.<br/>
[2022-08-18 03:13:08,788][PID:64][DEBUG][redash.destinations] Registering Email (email) destinations.<br/>
Tables created<br/>
Running Redash database migrations after install<br/>
[2022-08-18 03:13:10,214][PID:68][DEBUG][redash.query_runner] Registering PostgreSQL (pg) query runner.<br/>
[2022-08-18 03:13:10,214][PID:68][DEBUG][redash.query_runner] Registering Redshift (redshift) query runner.<br/>
[2022-08-18 03:13:10,214][PID:68][DEBUG][redash.query_runner] Registering Redshift (with IAM User/Role) (redshift_iam) query runner.<br/>
[2022-08-18 03:13:10,214][PID:68][DEBUG][redash.query_runner] Registering CockroachDB (cockroach) query runner.<br/>
[2022-08-18 03:13:10,217][PID:68][DEBUG][redash.query_runner] Registering MySQL (mysql) query runner.<br/>
[2022-08-18 03:13:10,217][PID:68][DEBUG][redash.query_runner] Registering MySQL (Amazon RDS) (rds_mysql) query runner.<br/>
[2022-08-18 03:13:10,218][PID:68][DEBUG][redash.query_runner] Registering Druid (druid) query runner.<br/>
[2022-08-18 03:13:10,281][PID:68][DEBUG][passlib.utils.compat] loaded lazy attr ‘SafeConfigParser’: &lt;class ‘configparser.ConfigParser’&gt;<br/>
[2022-08-18 03:13:10,281][PID:68][DEBUG][passlib.utils.compat] loaded lazy attr ‘NativeStringIO’: &lt;class ‘_io.StringIO’&gt;<br/>
[2022-08-18 03:13:10,281][PID:68][DEBUG][passlib.utils.compat] loaded lazy attr ‘BytesIO’: &lt;class ‘_io.BytesIO’&gt;<br/>
[2022-08-18 03:13:10,716][PID:68][DEBUG][redash.query_runner] Registering Python (python) query runner.<br/>
[2022-08-18 03:13:10,717][PID:68][DEBUG][redash.destinations] Registering Email (email) destinations.<br/>
[2022-08-18 03:13:11,198][PID:68][INFO][alembic.runtime.migration] Context impl PostgresqlImpl.<br/>
[2022-08-18 03:13:11,198][PID:68][INFO][alembic.runtime.migration] Will assume transactional DDL.<br/>
[2022-08-18 03:13:11,223][PID:68][INFO][alembic.runtime.migration] Running upgrade  → 65fc9ede4746, Add is_draft status to queries and dashboards<br/>
Traceback (most recent call last):<br/>
File “/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py”, line 1249, in _execute_context<br/>
cursor, statement, parameters, context<br/>
File “/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py”, line 580, in do_execute<br/>
cursor.execute(statement, parameters)<br/>
psycopg2.errors.InFailedSqlTransaction: current transaction is aborted, commands ignored until end of transaction block</p>
<p>The above exception was the direct cause of the following exception:</p>
<p>Traceback (most recent call last):<br/>
File “/app/manage.py”, line 9, in <br/>
manager()<br/>
File “/usr/local/lib/python3.7/site-packages/click/core.py”, line 722, in <strong>call</strong><br/>
return self.main(*args, **kwargs)<br/>
File “/usr/local/lib/python3.7/site-packages/flask/cli.py”, line 586, in main<br/>
return super(FlaskGroup, self).main(*args, **kwargs)<br/>
File “/usr/local/lib/python3.7/site-packages/click/core.py”, line 697, in main<br/>
rv = self.invoke(ctx)<br/>
File “/usr/local/lib/python3.7/site-packages/click/core.py”, line 1066, in invoke<br/>
return _process_result(sub_ctx.command.invoke(sub_ctx))<br/>
File “/usr/local/lib/python3.7/site-packages/click/core.py”, line 1066, in invoke<br/>
return _process_result(sub_ctx.command.invoke(sub_ctx))<br/>
File “/usr/local/lib/python3.7/site-packages/click/core.py”, line 895, in invoke<br/>
return ctx.invoke(self.callback, **ctx.params)<br/>
File “/usr/local/lib/python3.7/site-packages/click/core.py”, line 535, in invoke<br/>
return callback(*args, **kwargs)<br/>
File “/usr/local/lib/python3.7/site-packages/click/decorators.py”, line 17, in new_func<br/>
return f(get_current_context(), *args, **kwargs)<br/>
File “/usr/local/lib/python3.7/site-packages/flask/cli.py”, line 426, in decorator<br/>
return __ctx.invoke(f, *args, **kwargs)<br/>
File “/usr/local/lib/python3.7/site-packages/click/core.py”, line 535, in invoke<br/>
return callback(*args, **kwargs)<br/>
File “/usr/local/lib/python3.7/site-packages/flask_migrate/cli.py”, line 134, in upgrade<br/>
_upgrade(directory, revision, sql, tag, x_arg)<br/>
File “/usr/local/lib/python3.7/site-packages/flask_migrate/<strong>init</strong>.py”, line 95, in wrapped<br/>
f(*args, **kwargs)<br/>
File “/usr/local/lib/python3.7/site-packages/flask_migrate/<strong>init</strong>.py”, line 280, in upgrade<br/>
command.upgrade(config, revision, sql=sql, tag=tag)<br/>
File “/usr/local/lib/python3.7/site-packages/alembic/command.py”, line 320, in upgrade<br/>
script.run_env()<br/>
File “/usr/local/lib/python3.7/site-packages/alembic/script/base.py”, line 563, in run_env<br/>
util.load_python_file(self.dir, “env.py”)<br/>
File “/usr/local/lib/python3.7/site-packages/alembic/util/pyfiles.py”, line 92, in load_python_file<br/>
module = load_module_py(module_id, path)<br/>
File “/usr/local/lib/python3.7/site-packages/alembic/util/pyfiles.py”, line 108, in load_module_py<br/>
spec.loader.exec_module(module)  # type: ignore<br/>
File “”, line 728, in exec_module<br/>
File “”, line 219, in _call_with_frames_removed<br/>
File “migrations/env.py”, line 93, in <br/>
run_migrations_online()<br/>
File “migrations/env.py”, line 85, in run_migrations_online<br/>
context.run_migrations()<br/>
File “”, line 8, in run_migrations<br/>
File “/usr/local/lib/python3.7/site-packages/alembic/runtime/environment.py”, line 851, in run_migrations<br/>
self.get_context().run_migrations(**kw)<br/>
File “/usr/local/lib/python3.7/site-packages/alembic/runtime/migration.py”, line 619, in run_migrations<br/>
head_maintainer.update_to_step(step)<br/>
File “/usr/local/lib/python3.7/site-packages/alembic/runtime/migration.py”, line 808, in update_to_step<br/>
self._insert_version(vers)<br/>
File “/usr/local/lib/python3.7/site-packages/alembic/runtime/migration.py”, line 750, in _insert_version<br/>
version_num=literal_column(“‘%s’” % version)<br/>
File “/usr/local/lib/python3.7/site-packages/alembic/ddl/impl.py”, line 197, in _exec<br/>
return conn.execute(construct, multiparams)<br/>
File “/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py”, line 988, in execute<br/>
return meth(self, multiparams, params)<br/>
File “/usr/local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py”, line 287, in _execute_on_connection<br/>
return connection._execute_clauseelement(self, multiparams, params)<br/>
File “/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py”, line 1107, in _execute_clauseelement<br/>
distilled_params,<br/>
File “/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py”, line 1253, in _execute_context<br/>
e, statement, parameters, cursor, context<br/>
File “/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py”, line 1473, in _handle_dbapi_exception<br/>
util.raise_from_cause(sqlalchemy_exception, exc_info)<br/>
File “/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py”, line 398, in raise_from_cause<br/>
reraise(type(exception), exception, tb=exc_tb, cause=cause)<br/>
File “/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py”, line 152, in reraise<br/>
raise value.with_traceback(tb)<br/>
File “/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py”, line 1249, in _execute_context<br/>
cursor, statement, parameters, context<br/>
File “/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py”, line 580, in do_execute<br/>
cursor.execute(statement, parameters)<br/>
sqlalchemy.exc.InternalError: (psycopg2.errors.InFailedSqlTransaction) current transaction is aborted, commands ignored until end of transaction block</p>
<p>[SQL: INSERT INTO alembic_version (version_num) VALUES (‘65fc9ede4746’) RETURNING alembic_version.version_num]<br/>
(Background on this error at: <a class="inline-onebox" href="http://sqlalche.me/e/2j85" rel="noopener nofollow ugc">Error Messages — SQLAlchemy 1.4 Documentation</a>)<br/>
Upgrade complete<br/>
Return code: 124</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="overlay" id="modalOverlay" style="display: none;">
<div class="modal-content">
<p>Login or sign up disabled while the site is in read only mode</p>
<hr/>
<button class="btn btn-login">OK</button>
</div>
</div>
<script src="../../js/script.js"></script>
</body>
</html>