<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet"/>
<link href="../../css/checklist_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_theme_2_be4cb2b86ec06123c5e974acd20fd933d14b129d.css" rel="stylesheet"/>
<link href="../../css/discourse-adplugin_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-akismet_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-cakeday_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-chat-integration_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-details_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-footnote_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-lazy-videos_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-local-dates_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/color_definitions_base__2_8fd59ae1f286f43b3ff17996df07ea951685249d.css" rel="stylesheet"/>
<link href="../../css/style.css" rel="stylesheet"/>
<title>[Solved] Error running query: Unknown MySQL server host / But test connection pass</title></head>
<body>
<div class="navbar">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<div class="navbar-buttons">
<button class="btn btn-signup">Sign Up</button>
<button class="btn btn-login"><i class="fas fa-user"></i> Login</button>
<button class="btn btn-search"><i class="fas fa-search"></i></button>
<div class="navbar-toggle">
<div class="dots"></div>
<div class="dots"></div>
<div class="dots"></div>
</div>
</div>
</div>
<div class="sidebar">
<div class="sidebar-content">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<ul class="sidebar-grid">
<!-- <li><a href="#"><i class="fas fa-list-ul"></i> Topics</a></li> -->
<li><a href="../../page_0.html"><i class="fas fa-layer-group"></i> Topics</a></li>
<li><a href="../../users.html"><i class="fas fa-users"></i> Users</a></li>
<li><a href="../../about.html"><i class="fas fa-info-circle"></i> About</a></li>
<li><a href="../../faq.html"><i class="fas fa-question-circle"></i> FAQ</a></li>
<li><a href="../../groups.html"><i class="fas fa-users"></i> Groups</a></li>
<li><a href="../../badges.html"><i class="fas fa-certificate"></i> Badges</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#categories"><span>▼</span>Categories</a></h3>
<hr/>
<ul class="sidebar-grid categories">
<li>
<a class="badge-wrapper bullet" href="../../c/support/6.html">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name">Support</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/feature-requests/5.html">
<span class="badge-category-bg" style="background-color: #3AB54A"></span>
<span class="badge-category clear-badge">
<span class="category-name">Feature Requests</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/uncategorized/1.html">
<span class="badge-category-bg" style="background-color: #AB9364"></span>
<span class="badge-category clear-badge">
<span class="category-name">Uncategorized</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/development/7.html">
<span class="badge-category-bg" style="background-color: #8C6238"></span>
<span class="badge-category clear-badge">
<span class="category-name">Development</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/tips-tricks-query-examples/11.html">
<span class="badge-category-bg" style="background-color: #652D90"></span>
<span class="badge-category clear-badge" style="white-space: normal;">
<span class="category-name">Tips, Tricks &amp; Query Examples</span>
</span>
</a>
</li>
<li><a href="../../categories.html"><i class="fas fa-list-ul"></i> All categories</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#tags"><span>▼</span>Tags</a></h3>
<hr/>
<ul class="sidebar-grid tags">
<li><a href="../../tag/query_results.html"><i class="fas fa-tag"></i> query_results</a></li>
<li><a href="../../tag/feature-request.html"><i class="fas fa-tag"></i> feature-request</a></li>
<li><a href="../../tag/parameters.html"><i class="fas fa-tag"></i> parameters</a></li>
<li><a href="../../tag/visualizations.html"><i class="fas fa-tag"></i> visualizations</a></li>
<li><a href="../../tag/alerts.html"><i class="fas fa-tag"></i> alerts</a></li>
<li><a href="../../tags.html"><i class="fas fa-list-ul"></i> All tags</a></li>
</ul>
</div>
<div class="sidebar-footer">
            © 2023 <a href="https://discuss.redash.io/" target="_blank">discuss.redash.io</a>
</div>
</div>
<div class="overlay"></div>
<div class="content">
<div class="global-notice">
<div class="row">
<div class="alert alert-info alert-read-only" id="global-notice-alert-read-only">
<span class="text">This site is in read only mode. Please continue to browse, but replying, likes,
                        and other actions are disabled for now.</span>
</div>
</div>
</div>
<div class="imported_page" id="imported_page">
<div class="wrap" id="main-outlet" role="main">
<div id="topic-title">
<h1>
<a href="/t/solved-error-running-query-unknown-mysql-server-host-but-test-connection-pass/4270">[Solved] Error running query: Unknown MySQL server host / But test connection pass</a>
</h1>
<div class="topic-category" itemscope="" itemtype="http://schema.org/BreadcrumbList">
<span itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
<a class="badge-wrapper bullet" href="../../c/support/6.html" itemprop="item">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name" itemprop="name">Support</span>
</span>
</a>
<meta content="1" itemprop="position"/>
</span>
<span itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
<a class="badge-wrapper bullet" href="../../c/support/support-self-hosted/9.html" itemprop="item">
<span class="badge-category-bg" style="background-color: #AB9364"></span>
<span class="badge-category clear-badge">
<span class="category-name" itemprop="name">Self Hosted Redash Support</span>
</span>
</a>
<meta content="2" itemprop="position"/>
</span>
</div>
</div>
<div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
<meta content="[Solved] Error running query: Unknown MySQL server host / But test connection pass" itemprop="headline"/>
<meta content="Self Hosted Redash Support" itemprop="articleSection"/>
<meta content="" itemprop="keywords"/>
<div itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
<meta content="Redash Discourse" itemprop="name"/>
<div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject">
<meta content="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/c07bc573841e1e4a0013ea3b6fe088a1534228a3.png" itemprop="url"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_1">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/pipech.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/pipech_avatar.png" tabindex="-1" width="48"/><span itemprop="name">pipech</span></a>
</span>
<link href="https://discuss.redash.io/t/solved-error-running-query-unknown-mysql-server-host-but-test-connection-pass/4270" itemprop="mainEntityOfPage"/>
<link href="https://global.discourse-cdn.com/standard17/uploads/redash1/original/2X/5/5f1d98016602f5ffa5e2b1b36a048a200fe55ed1.png" itemprop="image"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-07-31T16:25:58Z" itemprop="datePublished">
                    July 31, 2019,  4:25pm
                  </time>
<meta content="2019-08-01T14:39:40Z" itemprop="dateModified"/>
<span itemprop="position">1</span>
</span>
</div>
<div class="post" itemprop="articleBody">
<h1>
<a class="anchor" href="#issue-summary-1" name="issue-summary-1"></a>Issue Summary</h1>
<h3>
<a class="anchor" href="#i-cant-execute-query-but-connection-testing-is-pass-and-it-can-load-list-of-table-2" name="i-cant-execute-query-but-connection-testing-is-pass-and-it-can-load-list-of-table-2"></a>I can’t execute Query, but “Connection Testing” is pass and it can load list of table.</h3>
<p>It respond with <code>Error running query: Unknown MySQL server host 'frappe' (0)</code>.<br/>
<code>frappe</code> is a container which has MySQL server running in it.</p>
<p><div class="lightbox-wrapper"><a class="lightbox" data-download-href="/uploads/short-url/dzqLn1Mn7bMQZmPjQMwI5FHh5ip.png?dl=1" href="https://global.discourse-cdn.com/standard17/uploads/redash1/original/2X/5/5f1d98016602f5ffa5e2b1b36a048a200fe55ed1.png" rel="noopener nofollow ugc" title="Capture"><img alt="Capture" data-base62-sha1="dzqLn1Mn7bMQZmPjQMwI5FHh5ip" data-small-upload="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/2X/5/5f1d98016602f5ffa5e2b1b36a048a200fe55ed1_2_10x10.png" height="500" src="assets/5f1d98016602f5ffa5e2b1b36a048a200fe55ed1_2_680x500.png" srcset="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/2X/5/5f1d98016602f5ffa5e2b1b36a048a200fe55ed1_2_680x500.png, https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/2X/5/5f1d98016602f5ffa5e2b1b36a048a200fe55ed1_2_1020x750.png 1.5x, https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/2X/5/5f1d98016602f5ffa5e2b1b36a048a200fe55ed1_2_1360x1000.png 2x" width="680"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">Capture</span><span class="informations">1920×1411 83.3 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
<p><div class="lightbox-wrapper"><a class="lightbox" data-download-href="/uploads/short-url/saIJqY7vAcl1Bu9rLAaeEBnFjB5.png?dl=1" href="https://global.discourse-cdn.com/standard17/uploads/redash1/original/2X/c/c57322071009e38370048b574b0bf10522cbc1cf.png" rel="noopener nofollow ugc" title="Capture2"><img alt="Capture2" data-base62-sha1="saIJqY7vAcl1Bu9rLAaeEBnFjB5" data-small-upload="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/2X/c/c57322071009e38370048b574b0bf10522cbc1cf_2_10x10.png" height="500" src="assets/c57322071009e38370048b574b0bf10522cbc1cf_2_680x500.png" srcset="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/2X/c/c57322071009e38370048b574b0bf10522cbc1cf_2_680x500.png, https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/2X/c/c57322071009e38370048b574b0bf10522cbc1cf_2_1020x750.png 1.5x, https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/2X/c/c57322071009e38370048b574b0bf10522cbc1cf_2_1360x1000.png 2x" width="680"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">Capture2</span><span class="informations">1920×1411 152 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
<hr/>
<h3>
<a class="anchor" href="#technical-details-3" name="technical-details-3"></a>Technical details:</h3>
<ul>
<li>Redash Version: I’ve tried both <code>redash/redash:7.0.0.b17489</code> and <code>redash/redash:7.0.0.b18042</code>
</li>
<li>Browser/OS: [Opera, Chrome, Firefox] / Windows 10</li>
<li>How did you install Redash: I use docker-compose on Windows 10 (This is Dev server not Production server)</li>
</ul>
<p><code>docker-compose.yml</code><br/>
<code>11-1-14_py3_devcontainer_default</code> network is network which <code>frappe</code> container use.</p>
<pre><code>	version: '2'

	x-redash-service: &amp;redash-service
	  image: redash/redash:7.0.0.b18042
	  depends_on:
		- postgres
		- redis
	  env_file: ./env
	  restart: always

	services:
	  server:
		&lt;&lt;: *redash-service
		command: server
		ports:
		  - "5000:5000"
		environment:
		  REDASH_WEB_WORKERS: 4
		networks:
		  - default
		  - 11-1-14_py3_devcontainer_default

	  scheduler:
		&lt;&lt;: *redash-service
		command: scheduler
		environment:
		  QUEUES: "celery"
		  WORKERS_COUNT: 1
	  scheduled_worker:
		&lt;&lt;: *redash-service
		command: worker
		environment:
		  QUEUES: "scheduled_queries,schemas"
		  WORKERS_COUNT: 1
	  adhoc_worker:
		&lt;&lt;: *redash-service
		command: worker
		environment:
		  QUEUES: "queries"
		  WORKERS_COUNT: 2

	  redis:
		image: redis:5.0-alpine
		restart: always
		networks:
		  - default
		  - 11-1-14_py3_devcontainer_default

	  postgres:
		image: postgres:9.5-alpine
		env_file: ./env
		restart: always
		networks:
		  - default
		  - 11-1-14_py3_devcontainer_default

	  nginx:
		image: redash/nginx:latest
		ports:
		  - "80:80"
		depends_on:
		  - server
		links:
		  - server:redash
		restart: always
		networks:
		  - default
		  - 11-1-14_py3_devcontainer_default


	networks:
	  11-1-14_py3_devcontainer_default:
		external: true
</code></pre>
<hr/>
<p><code>.env</code></p>
<pre><code>	PYTHONUNBUFFERED=0
	REDASH_LOG_LEVEL=INFO
	REDASH_REDIS_URL=redis://redis:6379/0
	REDASH_DATABASE_URL=postgresql://postgres:12345@postgres/postgres

	POSTGRES_PASSWORD=12345
</code></pre>
<hr/>
<p>Error log from <code>adhoc_worker</code> container</p>
<pre><code>	[2019-07-31 16:15:56,665][PID:1][INFO][MainProcess] Received task: redash.tasks.execute_query[1dce61d3-356c-45ba-9e58-7603476063a6]
	[2019-07-31 16:15:56,667][PID:110][INFO][ForkPoolWorker-2] task_name=redash.tasks.execute_query task_id=1dce61d3-356c-45ba-9e58-7603476063a6 task=execute_query state=load_ds ds_id=1
	[2019-07-31 16:15:56,672][PID:110][INFO][ForkPoolWorker-2] task_name=redash.tasks.execute_query task_id=1dce61d3-356c-45ba-9e58-7603476063a6 task=execute_query state=executing_query query_hash=d42cbeb354900af9a4ec3e24a377a25f type=mysql ds_id=1  task_id=1dce61d3-356c-45ba-9e58-7603476063a6 queue=queries query_id=1 username=p@pipech.com
	[2019-07-31 16:16:11,689][PID:110][INFO][ForkPoolWorker-2] task_name=redash.tasks.execute_query task_id=1dce61d3-356c-45ba-9e58-7603476063a6 task=execute_query query_hash=d42cbeb354900af9a4ec3e24a377a25f data_length=None error=[Unknown MySQL server host 'frappe' (0)]
	[2019-07-31 16:16:11,690][PID:110][ERROR][ForkPoolWorker-2] Task redash.tasks.execute_query[1dce61d3-356c-45ba-9e58-7603476063a6] raised unexpected: QueryExecutionError("Unknown MySQL server host 'frappe' (0)",)
	Traceback (most recent call last):
	  File "/usr/local/lib/python2.7/dist-packages/celery/app/trace.py", line 382, in trace_task
		R = retval = fun(*args, **kwargs)
	  File "/app/redash/worker.py", line 64, in __call__
		return TaskBase.__call__(self, *args, **kwargs)
	  File "/usr/local/lib/python2.7/dist-packages/celery/app/trace.py", line 641, in __protected_call__
		return self.run(*args, **kwargs)
	  File "/app/redash/tasks/queries.py", line 390, in execute_query
		scheduled_query).run()
	  File "/app/redash/tasks/queries.py", line 333, in run
		raise result
	QueryExecutionError: Unknown MySQL server host 'frappe' (0)
</code></pre>
<hr/>
<h3>
<a class="anchor" href="#any-help-would-be-really-appreciated-grinning-4" name="any-help-would-be-really-appreciated-grinning-4"></a>Any help would be really appreciated. <img alt=":grinning:" class="emoji" height="20" loading="lazy" src="assets/grinning.png" title=":grinning:" width="20"/>
</h3>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_2" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/arikfr.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/arikfr_avatar.png" tabindex="-1" width="48"/><span itemprop="name">arikfr</span></a>
</span>
<link href="https://discuss.redash.io/t/solved-error-running-query-unknown-mysql-server-host-but-test-connection-pass/4270" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-08-01T13:12:31Z" itemprop="datePublished">
                    August 1, 2019,  1:12pm
                  </time>
<meta content="2019-08-01T13:12:31Z" itemprop="dateModified"/>
<span itemprop="position">2</span>
</span>
</div>
<div class="post" itemprop="text">
<p>You connected the <code>server</code> container to the other network, but didn’t do it for the worker containers. You can add it to the shared definition (<code>x-redash-service:</code>) to reduce copy-paste.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_3" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/pipech.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/pipech_avatar.png" tabindex="-1" width="48"/><span itemprop="name">pipech</span></a>
</span>
<link href="https://discuss.redash.io/t/solved-error-running-query-unknown-mysql-server-host-but-test-connection-pass/4270" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-08-01T14:39:13Z" itemprop="datePublished">
                    August 1, 2019,  2:39pm
                  </time>
<meta content="2019-08-01T14:39:13Z" itemprop="dateModified"/>
<span itemprop="position">3</span>
</span>
</div>
<div class="post" itemprop="text">
<p>It works!</p>
<p>Thank you very much for your support. <img alt=":grinning:" class="emoji" src="assets/grinning.png" title=":grinning:"/><img alt=":grinning:" class="emoji" src="assets/grinning.png" title=":grinning:"/><img alt=":grinning:" class="emoji" src="assets/grinning.png" title=":grinning:"/></p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="overlay" id="modalOverlay" style="display: none;">
<div class="modal-content">
<p>Login or sign up disabled while the site is in read only mode</p>
<hr/>
<button class="btn btn-login">OK</button>
</div>
</div>
<script src="../../js/script.js"></script>
</body>
</html>