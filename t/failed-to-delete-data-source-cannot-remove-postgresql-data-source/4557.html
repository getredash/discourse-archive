<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet"/>
<link href="../../css/checklist_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_theme_2_be4cb2b86ec06123c5e974acd20fd933d14b129d.css" rel="stylesheet"/>
<link href="../../css/discourse-adplugin_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-akismet_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-cakeday_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-chat-integration_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-details_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-footnote_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-lazy-videos_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-local-dates_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/color_definitions_base__2_8fd59ae1f286f43b3ff17996df07ea951685249d.css" rel="stylesheet"/>
<link href="../../css/style.css" rel="stylesheet"/>
<title>"Failed to delete data source". Cannot remove postgresql data source</title></head>
<body>
<div class="navbar">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<div class="navbar-buttons">
<button class="btn btn-signup">Sign Up</button>
<button class="btn btn-login"><i class="fas fa-user"></i> Login</button>
<button class="btn btn-search"><i class="fas fa-search"></i></button>
<div class="navbar-toggle">
<div class="dots"></div>
<div class="dots"></div>
<div class="dots"></div>
</div>
</div>
</div>
<div class="sidebar">
<div class="sidebar-content">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<ul class="sidebar-grid">
<!-- <li><a href="#"><i class="fas fa-list-ul"></i> Topics</a></li> -->
<li><a href="../../page_0.html"><i class="fas fa-layer-group"></i> Topics</a></li>
<li><a href="../../users.html"><i class="fas fa-users"></i> Users</a></li>
<li><a href="../../about.html"><i class="fas fa-info-circle"></i> About</a></li>
<li><a href="../../faq.html"><i class="fas fa-question-circle"></i> FAQ</a></li>
<li><a href="../../groups.html"><i class="fas fa-users"></i> Groups</a></li>
<li><a href="../../badges.html"><i class="fas fa-certificate"></i> Badges</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#categories"><span>▼</span>Categories</a></h3>
<hr/>
<ul class="sidebar-grid categories">
<li>
<a class="badge-wrapper bullet" href="../../c/support/6.html">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name">Support</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/feature-requests/5.html">
<span class="badge-category-bg" style="background-color: #3AB54A"></span>
<span class="badge-category clear-badge">
<span class="category-name">Feature Requests</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/uncategorized/1.html">
<span class="badge-category-bg" style="background-color: #AB9364"></span>
<span class="badge-category clear-badge">
<span class="category-name">Uncategorized</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/development/7.html">
<span class="badge-category-bg" style="background-color: #8C6238"></span>
<span class="badge-category clear-badge">
<span class="category-name">Development</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/tips-tricks-query-examples/11.html">
<span class="badge-category-bg" style="background-color: #652D90"></span>
<span class="badge-category clear-badge" style="white-space: normal;">
<span class="category-name">Tips, Tricks &amp; Query Examples</span>
</span>
</a>
</li>
<li><a href="../../categories.html"><i class="fas fa-list-ul"></i> All categories</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#tags"><span>▼</span>Tags</a></h3>
<hr/>
<ul class="sidebar-grid tags">
<li><a href="../../tag/query_results.html"><i class="fas fa-tag"></i> query_results</a></li>
<li><a href="../../tag/feature-request.html"><i class="fas fa-tag"></i> feature-request</a></li>
<li><a href="../../tag/parameters.html"><i class="fas fa-tag"></i> parameters</a></li>
<li><a href="../../tag/visualizations.html"><i class="fas fa-tag"></i> visualizations</a></li>
<li><a href="../../tag/alerts.html"><i class="fas fa-tag"></i> alerts</a></li>
<li><a href="../../tags.html"><i class="fas fa-list-ul"></i> All tags</a></li>
</ul>
</div>
<div class="sidebar-footer">
            © 2023 <a href="https://discuss.redash.io/" target="_blank">discuss.redash.io</a>
</div>
</div>
<div class="overlay"></div>
<div class="content">
<div class="global-notice">
<div class="row">
<div class="alert alert-info alert-read-only" id="global-notice-alert-read-only">
<span class="text">This site is in read only mode. Please continue to browse, but replying, likes,
                        and other actions are disabled for now.</span>
</div>
</div>
</div>
<div class="imported_page" id="imported_page">
<div class="wrap" id="main-outlet" role="main">
<div id="topic-title">
<h1>
<a href="/t/failed-to-delete-data-source-cannot-remove-postgresql-data-source/4557">"Failed to delete data source". Cannot remove postgresql data source</a>
</h1>
<div class="topic-category" itemscope="" itemtype="http://schema.org/BreadcrumbList">
<span itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
<a class="badge-wrapper bullet" href="../../c/support/6.html" itemprop="item">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name" itemprop="name">Support</span>
</span>
</a>
<meta content="1" itemprop="position"/>
</span>
<span itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
<a class="badge-wrapper bullet" href="../../c/support/support-self-hosted/9.html" itemprop="item">
<span class="badge-category-bg" style="background-color: #AB9364"></span>
<span class="badge-category clear-badge">
<span class="category-name" itemprop="name">Self Hosted Redash Support</span>
</span>
</a>
<meta content="2" itemprop="position"/>
</span>
</div>
</div>
<div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
<meta content='"Failed to delete data source". Cannot remove postgresql data source' itemprop="headline"/>
<meta content="Self Hosted Redash Support" itemprop="articleSection"/>
<meta content="" itemprop="keywords"/>
<div itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
<meta content="Redash Discourse" itemprop="name"/>
<div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject">
<meta content="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/c07bc573841e1e4a0013ea3b6fe088a1534228a3.png" itemprop="url"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_1">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/rnd.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/rnd_avatar.png" tabindex="-1" width="48"/><span itemprop="name">rnd</span></a>
</span>
<link href="https://discuss.redash.io/t/failed-to-delete-data-source-cannot-remove-postgresql-data-source/4557" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-09-23T10:16:07Z" itemprop="datePublished">
                    September 23, 2019, 10:16am
                  </time>
<meta content="2019-09-23T10:16:07Z" itemprop="dateModified"/>
<span itemprop="position">1</span>
</span>
</div>
<div class="post" itemprop="articleBody">
<h3>Issue Summary</h3>
<p>A summary of the issue and the browser/OS environment in which it occurs.</p>
<h3>Technical details:</h3>
<ul>
<li>Redash Version: 4.0.1.b4038 / 7.0.0.b18042</li>
<li>Browser/OS: Firefox/Chrome/Safari Ubuntu 18.04/Mojave</li>
<li>How did you install Redash: docker-compose, image: redash:7.0.0.b18042</li>
</ul>
<p>Hi, I have a problem with removing Postgresql data sources in Redash. In our process, we’re constantly adding/removing whole db’s, so there’s a lot of data sources added/removed to/from Redash on a regular basis.</p>
<p>My problem occurs inconsistently, because it can either happen or not, for the sources coming from the same DB. For example:</p>
<p>There’s 2 datasources pointed to the same endpoint, same authentication (same postgres user/pass), just different db names. Both of them had the same queries and dashboards. Then, I can easily delete one, but not the other (it get’s stuck on deleting process, then error “failed to delete data source” shows up). Sometimes, manually removing (unpublishing, then archiving) all related dashboards/queries help, but that is also inconsistent. For example, right now I am stuck with a datasource that no longer exists (db was purged), no dashboard/query uses it, yet still, I’m unable to remove it from data sources on Redash.</p>
<p>Is there any reason said behaviour is happening? It’s possible I’m doing things in the wrong order, so I’d like to know, what is a “proper” way to remove a data source? Is there a single operation that removed a data source and all related queries/dashboards?</p>
<p>At the moment, the process that works most of the time is:</p>
<ol>
<li>Downing the DB</li>
<li>Purging aforementioned DB out of existence</li>
<li>Removing data source from Redash</li>
<li>If point 3 fails, then manually remove (unpublish/archive) all related dashboards/queries to said DB and trying point 3 again.</li>
<li>If point 4 fails, get stuck with a data source that isn’t used anywhere and cannot be removed.</li>
</ol>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_2" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/jesse.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/jesse_avatar.png" tabindex="-1" width="48"/><span itemprop="name">jesse</span></a>
</span>
<link href="https://discuss.redash.io/t/failed-to-delete-data-source-cannot-remove-postgresql-data-source/4557" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-09-23T10:21:09Z" itemprop="datePublished">
                    September 23, 2019, 10:21am
                  </time>
<meta content="2019-09-23T10:21:09Z" itemprop="dateModified"/>
<span itemprop="position">2</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Welcome to the forum and thank you for a detailed issue report. One clarifying question: what version of Redash do you run? It says v4 and v7.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="2" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_3" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/rnd.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/rnd_avatar.png" tabindex="-1" width="48"/><span itemprop="name">rnd</span></a>
</span>
<link href="https://discuss.redash.io/t/failed-to-delete-data-source-cannot-remove-postgresql-data-source/4557" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-09-23T10:23:09Z" itemprop="datePublished">
                    September 23, 2019, 10:23am
                  </time>
<meta content="2019-09-23T10:23:09Z" itemprop="dateModified"/>
<span itemprop="position">3</span>
</span>
</div>
<div class="post" itemprop="text">
<p>it happens both on v4, and currently on v7 (as per listed docker image)</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
<span class="post-likes">1 Like</span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_4" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/rnd.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/rnd_avatar.png" tabindex="-1" width="48"/><span itemprop="name">rnd</span></a>
</span>
<link href="https://discuss.redash.io/t/failed-to-delete-data-source-cannot-remove-postgresql-data-source/4557" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-09-23T10:31:47Z" itemprop="datePublished">
                    September 23, 2019, 10:31am
                  </time>
<meta content="2019-09-23T10:31:47Z" itemprop="dateModified"/>
<span itemprop="position">4</span>
</span>
</div>
<div class="post" itemprop="text">
<p>to clarify, I’ve checked the behaviour when the problem initially happened on all available browsers/OS listed (Firefox/Chrome/Safari Ubuntu 18.04/Mojave) on v 4.0.1.b4038. Then upgraded the image to 7.0.0.b18042, tried it on all of the same browsers/OS again, and it still didn’t work. As in original post, the one solution to the problem that worked a couple of times already was manually removing dashboards/queries, but this time I just cannot remove the data source, no matter what I’m trying to do. The DB doesn’t exist already, queries and dashboards are unpublished and archived</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_5" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/jesse.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/jesse_avatar.png" tabindex="-1" width="48"/><span itemprop="name">jesse</span></a>
</span>
<link href="https://discuss.redash.io/t/failed-to-delete-data-source-cannot-remove-postgresql-data-source/4557" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-09-23T11:43:31Z" itemprop="datePublished">
                    September 23, 2019, 11:43am
                  </time>
<meta content="2019-09-23T11:43:31Z" itemprop="dateModified"/>
<span itemprop="position">5</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Can you share a screenshot of the error?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="2" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_6" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/rnd.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/rnd_avatar.png" tabindex="-1" width="48"/><span itemprop="name">rnd</span></a>
</span>
<link href="https://discuss.redash.io/t/failed-to-delete-data-source-cannot-remove-postgresql-data-source/4557" itemprop="mainEntityOfPage"/>
<link href="https://global.discourse-cdn.com/standard17/uploads/redash1/original/2X/f/f2c94234b906894fee69f292f7cd37ad97b8b40b.png" itemprop="image"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-09-23T11:56:38Z" itemprop="datePublished">
                    September 23, 2019, 11:56am
                  </time>
<meta content="2019-09-23T12:00:26Z" itemprop="dateModified"/>
<span itemprop="position">6</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Sure, it appears like this:</p>
<p><div class="lightbox-wrapper"><a class="lightbox" data-download-href="/uploads/short-url/yDMK1XT3PJ3T5FPG9kxLJioCAYz.png?dl=1" href="https://global.discourse-cdn.com/standard17/uploads/redash1/original/2X/f/f2c94234b906894fee69f292f7cd37ad97b8b40b.png" rel="noopener nofollow ugc" title="redasherror1"><img alt="redasherror1" data-base62-sha1="yDMK1XT3PJ3T5FPG9kxLJioCAYz" data-small-upload="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/2X/f/f2c94234b906894fee69f292f7cd37ad97b8b40b_2_10x10.png" height="372" src="assets/f2c94234b906894fee69f292f7cd37ad97b8b40b_2_690x372.png" srcset="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/2X/f/f2c94234b906894fee69f292f7cd37ad97b8b40b_2_690x372.png, https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/2X/f/f2c94234b906894fee69f292f7cd37ad97b8b40b_2_1035x558.png 1.5x, https://global.discourse-cdn.com/standard17/uploads/redash1/original/2X/f/f2c94234b906894fee69f292f7cd37ad97b8b40b.png 2x" width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">redasherror1</span><span class="informations">1328×717 16.9 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>SSL mode doesn’t affect the error, it behaves the same way in “disable” and “prefer” setting.</p>
<p><span class="mention">@edit</span>: also, the “Delete” field becomes unclickable after pressing it once and the wheel is ever turning.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_7" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/rnd.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/rnd_avatar.png" tabindex="-1" width="48"/><span itemprop="name">rnd</span></a>
</span>
<link href="https://discuss.redash.io/t/failed-to-delete-data-source-cannot-remove-postgresql-data-source/4557" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-09-25T06:56:25Z" itemprop="datePublished">
                    September 25, 2019,  6:56am
                  </time>
<meta content="2019-09-25T06:56:25Z" itemprop="dateModified"/>
<span itemprop="position">7</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Is there any idea what might be the reason for this behaviour? Or could You please respond to the other point of the post: “I’d like to know, what is a “proper” way to remove a data source? Is there a single operation that removed a data source and all related queries/dashboards?”</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_8" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/jesse.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/jesse_avatar.png" tabindex="-1" width="48"/><span itemprop="name">jesse</span></a>
</span>
<link href="https://discuss.redash.io/t/failed-to-delete-data-source-cannot-remove-postgresql-data-source/4557" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-09-25T23:33:39Z" itemprop="datePublished">
                    September 25, 2019, 11:33pm
                  </time>
<meta content="2019-09-25T23:33:39Z" itemprop="dateModified"/>
<span itemprop="position">8</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Do you see this data source in the Redash metadata database? Have you tried to delete the data source with the CLI?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_9" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/rnd.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/rnd_avatar.png" tabindex="-1" width="48"/><span itemprop="name">rnd</span></a>
</span>
<link href="https://discuss.redash.io/t/failed-to-delete-data-source-cannot-remove-postgresql-data-source/4557" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-09-26T09:34:31Z" itemprop="datePublished">
                    September 26, 2019,  9:34am
                  </time>
<meta content="2019-09-26T09:34:31Z" itemprop="dateModified"/>
<span itemprop="position">9</span>
</span>
</div>
<div class="post" itemprop="text">
<p>I do not know how to check Redash metadata database, nor the CLI command to remove the data source. I would appreciate pointer or links to Your knowledge base/documentation where I can check it, or could You provide aforementioned command Yourself? I have full access to machine running the containers, so permissions are not an issue for me</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_10" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/jesse.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/jesse_avatar.png" tabindex="-1" width="48"/><span itemprop="name">jesse</span></a>
</span>
<link href="https://discuss.redash.io/t/failed-to-delete-data-source-cannot-remove-postgresql-data-source/4557" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-09-27T00:50:07Z" itemprop="datePublished">
                    September 27, 2019, 12:50am
                  </time>
<meta content="2019-09-27T00:50:07Z" itemprop="dateModified"/>
<span itemprop="position">10</span>
</span>
</div>
<div class="post" itemprop="text">
<aside class="onebox githubissue" data-onebox-src="https://github.com/getredash/redash/issues/3843">
<header class="source">
<a href="https://github.com/getredash/redash/issues/3843" rel="noopener" target="_blank">github.com/getredash/redash</a>
</header>
<article class="onebox-body">
<div class="github-row">
<div class="github-icon-container" title="Issue">
<svg aria-hidden="true" class="github-icon" height="60" viewbox="0 0 14 16" width="60"><path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
</div>
<div class="github-info-container">
<h4>
<a href="https://github.com/getredash/redash/issues/3843" rel="noopener" target="_blank">Can't delete a data source if one of the queries references query result from it but uses a different data source</a>
</h4>
<div class="github-info">
<div class="date">
        opened <span class="discourse-local-date" data-date="2019-05-29" data-format="ll" data-time="08:26:03" data-timezone="UTC">08:26AM - 29 May 19 UTC</span>
</div>
<div class="user">
<a href="https://github.com/arikfr" rel="noopener" target="_blank">
<img alt="arikfr" class="onebox-avatar-inline" height="20" src="assets/71468" width="20"/>
          arikfr
        </a>
</div>
</div>
<div class="labels">
<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">
          Bug
        </span>
<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">
          Backend
        </span>
<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">
          help wanted
        </span>
</div>
</div>
</div>
<div class="github-row">
<p class="github-body-container">### Issue Summary

When you have the following situation:

&gt; Query A referen<span class="show-more-container"><a class="show-more" href="" rel="noopener">…</a></span><span class="excerpt hidden">ces query result from data source A, but itself references data source B.

You will not be able to delete data source A, because it will fail to delete the query results using it.

### Steps to Reproduce

The way the above can happen is if:

1. You execute query A while it uses data source A and update it to use data source B.
2. If the data source update happens right after [this query](https://github.com/getredash/redash/blob/9292ae8d3fe3d22b10554a10ce4cefe76214c5d4/redash/models/__init__.py#L304-L307) was executed but before we [actually update the query result reference](https://github.com/getredash/redash/blob/9292ae8d3fe3d22b10554a10ce4cefe76214c5d4/redash/models/__init__.py#L309).

It's an edge case, but happened already twice for people who reported it.

The correct solution here is to update the `latest_query_data_id` reference to get nullified if the query result is deleted.

### Technical details:

* Redash Version: 7</span></p>
</div>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
<p>I’m wonder if this is the same issue.</p>
<aside class="quote no-group" data-post="9" data-topic="4557" data-username="rnd">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="https://avatars.discourse-cdn.com/v4/letter/r/f0a364/40.png" width="20"/> rnd:</div>
<blockquote>
<p>I do not know how to check Redash metadata database</p>
</blockquote>
</aside>
<p>Instructions are on the forum <a href="http://discuss.redash.io/t/accessing-redash-database/4110">here</a>.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="overlay" id="modalOverlay" style="display: none;">
<div class="modal-content">
<p>Login or sign up disabled while the site is in read only mode</p>
<hr/>
<button class="btn btn-login">OK</button>
</div>
</div>
<script src="../../js/script.js"></script>
</body>
</html>