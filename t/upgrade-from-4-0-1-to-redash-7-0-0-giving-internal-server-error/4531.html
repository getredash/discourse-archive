<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet"/>
<link href="../../css/checklist_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_theme_2_be4cb2b86ec06123c5e974acd20fd933d14b129d.css" rel="stylesheet"/>
<link href="../../css/discourse-adplugin_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-akismet_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-cakeday_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-chat-integration_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-details_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-footnote_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-lazy-videos_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-local-dates_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/color_definitions_base__2_8fd59ae1f286f43b3ff17996df07ea951685249d.css" rel="stylesheet"/>
<link href="../../css/style.css" rel="stylesheet"/>
<title>Upgrade from 4.0.1 to redash 7.0.0 giving "Internal Server Error"</title></head>
<body>
<div class="navbar">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<div class="navbar-buttons">
<button class="btn btn-signup">Sign Up</button>
<button class="btn btn-login"><i class="fas fa-user"></i> Login</button>
<button class="btn btn-search"><i class="fas fa-search"></i></button>
<div class="navbar-toggle">
<div class="dots"></div>
<div class="dots"></div>
<div class="dots"></div>
</div>
</div>
</div>
<div class="sidebar">
<div class="sidebar-content">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<ul class="sidebar-grid">
<!-- <li><a href="#"><i class="fas fa-list-ul"></i> Topics</a></li> -->
<li><a href="../../page_0.html"><i class="fas fa-layer-group"></i> Topics</a></li>
<li><a href="../../users.html"><i class="fas fa-users"></i> Users</a></li>
<li><a href="../../about.html"><i class="fas fa-info-circle"></i> About</a></li>
<li><a href="../../faq.html"><i class="fas fa-question-circle"></i> FAQ</a></li>
<li><a href="../../groups.html"><i class="fas fa-users"></i> Groups</a></li>
<li><a href="../../badges.html"><i class="fas fa-certificate"></i> Badges</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#categories"><span>▼</span>Categories</a></h3>
<hr/>
<ul class="sidebar-grid categories">
<li>
<a class="badge-wrapper bullet" href="../../c/support/6.html">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name">Support</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/feature-requests/5.html">
<span class="badge-category-bg" style="background-color: #3AB54A"></span>
<span class="badge-category clear-badge">
<span class="category-name">Feature Requests</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/uncategorized/1.html">
<span class="badge-category-bg" style="background-color: #AB9364"></span>
<span class="badge-category clear-badge">
<span class="category-name">Uncategorized</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/development/7.html">
<span class="badge-category-bg" style="background-color: #8C6238"></span>
<span class="badge-category clear-badge">
<span class="category-name">Development</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/tips-tricks-query-examples/11.html">
<span class="badge-category-bg" style="background-color: #652D90"></span>
<span class="badge-category clear-badge" style="white-space: normal;">
<span class="category-name">Tips, Tricks &amp; Query Examples</span>
</span>
</a>
</li>
<li><a href="../../categories.html"><i class="fas fa-list-ul"></i> All categories</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#tags"><span>▼</span>Tags</a></h3>
<hr/>
<ul class="sidebar-grid tags">
<li><a href="../../tag/query_results.html"><i class="fas fa-tag"></i> query_results</a></li>
<li><a href="../../tag/feature-request.html"><i class="fas fa-tag"></i> feature-request</a></li>
<li><a href="../../tag/parameters.html"><i class="fas fa-tag"></i> parameters</a></li>
<li><a href="../../tag/visualizations.html"><i class="fas fa-tag"></i> visualizations</a></li>
<li><a href="../../tag/alerts.html"><i class="fas fa-tag"></i> alerts</a></li>
<li><a href="../../tags.html"><i class="fas fa-list-ul"></i> All tags</a></li>
</ul>
</div>
<div class="sidebar-footer">
            © 2023 <a href="https://discuss.redash.io/" target="_blank">discuss.redash.io</a>
</div>
</div>
<div class="overlay"></div>
<div class="content">
<div class="global-notice">
<div class="row">
<div class="alert alert-info alert-read-only" id="global-notice-alert-read-only">
<span class="text">This site is in read only mode. Please continue to browse, but replying, likes,
                        and other actions are disabled for now.</span>
</div>
</div>
</div>
<div class="imported_page" id="imported_page">
<div class="wrap" id="main-outlet" role="main">
<div id="topic-title">
<h1>
<a href="/t/upgrade-from-4-0-1-to-redash-7-0-0-giving-internal-server-error/4531">Upgrade from 4.0.1 to redash 7.0.0 giving "Internal Server Error"</a>
</h1>
<div class="topic-category" itemscope="" itemtype="http://schema.org/BreadcrumbList">
<span itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
<a class="badge-wrapper bullet" href="../../c/support/6.html" itemprop="item">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name" itemprop="name">Support</span>
</span>
</a>
<meta content="1" itemprop="position"/>
</span>
<span itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
<a class="badge-wrapper bullet" href="../../c/support/support-self-hosted/9.html" itemprop="item">
<span class="badge-category-bg" style="background-color: #AB9364"></span>
<span class="badge-category clear-badge">
<span class="category-name" itemprop="name">Self Hosted Redash Support</span>
</span>
</a>
<meta content="2" itemprop="position"/>
</span>
</div>
</div>
<div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
<meta content='Upgrade from 4.0.1 to redash 7.0.0 giving "Internal Server Error"' itemprop="headline"/>
<meta content="Self Hosted Redash Support" itemprop="articleSection"/>
<meta content="" itemprop="keywords"/>
<div itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
<meta content="Redash Discourse" itemprop="name"/>
<div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject">
<meta content="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/c07bc573841e1e4a0013ea3b6fe088a1534228a3.png" itemprop="url"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_1">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/tanay.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/tanay_avatar.png" tabindex="-1" width="48"/><span itemprop="name">tanay</span></a>
</span>
<link href="https://discuss.redash.io/t/upgrade-from-4-0-1-to-redash-7-0-0-giving-internal-server-error/4531" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-09-18T10:39:34Z" itemprop="datePublished">
                    September 18, 2019, 10:39am
                  </time>
<meta content="2019-09-20T13:51:07Z" itemprop="dateModified"/>
<span itemprop="position">1</span>
</span>
</div>
<div class="post" itemprop="articleBody">
<p>Receiving following error under /var/log/supervisor/redash_server-stderr—supervisor-xxxxxxx.log</p>
<pre><code>[2019-09-18 08:39:50,528][PID:150][ERROR][redash] Exception on / [GET]
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/flask/app.py", line 1988, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/local/lib/python2.7/dist-packages/flask/app.py", line 1641, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/local/lib/python2.7/dist-packages/flask_restful/__init__.py", line 271, in error_router
    return original_handler(e)
  File "/usr/local/lib/python2.7/dist-packages/flask/app.py", line 1544, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/local/lib/python2.7/dist-packages/flask/app.py", line 1639, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/local/lib/python2.7/dist-packages/flask/app.py", line 1625, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/usr/local/lib/python2.7/dist-packages/flask_login/utils.py", line 228, in decorated_view
    return func(*args, **kwargs)
  File "/opt/redash/redash-7.0.0/redash/handlers/static.py", line 27, in index
    return render_index()
  File "/opt/redash/redash-7.0.0/redash/handlers/static.py", line 18, in render_index
    response = send_file(full_path, **dict(cache_timeout=0, conditional=True))
  File "/usr/local/lib/python2.7/dist-packages/flask/helpers.py", line 536, in send_file
    file = open(filename, 'rb')
IOError: [Errno 2] No such file or directory: '/opt/redash/redash-7.0.0/redash/settings/../../client/dist/index.html'
</code></pre>
<p>What could be the possible issue ?.. I’m using legacy deployment (not using docker-compose approach, modified bootstrap.sh file)</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_2" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/jesse.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/jesse_avatar.png" tabindex="-1" width="48"/><span itemprop="name">jesse</span></a>
</span>
<link href="https://discuss.redash.io/t/upgrade-from-4-0-1-to-redash-7-0-0-giving-internal-server-error/4531" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-09-18T12:28:18Z" itemprop="datePublished">
                    September 18, 2019, 12:28pm
                  </time>
<meta content="2019-09-18T12:28:18Z" itemprop="dateModified"/>
<span itemprop="position">2</span>
</span>
</div>
<div class="post" itemprop="text">
<p>It looks like you haven’t built the front-end. Try running <code>npm run build</code>.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_3" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/tanay.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/tanay_avatar.png" tabindex="-1" width="48"/><span itemprop="name">tanay</span></a>
</span>
<link href="https://discuss.redash.io/t/upgrade-from-4-0-1-to-redash-7-0-0-giving-internal-server-error/4531" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-09-19T08:37:36Z" itemprop="datePublished">
                    September 19, 2019,  8:37am
                  </time>
<meta content="2019-09-19T09:45:26Z" itemprop="dateModified"/>
<span itemprop="position">3</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Receiving following error now, after running “npm run build”</p>
<pre><code>&gt; redash-client@7.0.0 build /opt/redash/redash-7.0.0
&gt; npm run clean &amp;&amp; NODE_ENV=production node --max-old-space-size=4096 node_modules/.bin/webpack
&gt; redash-client@7.0.0 clean /opt/redash/redash-7.0.0
&gt; rm -rf ./client/dist/

e[91msh: 1: node: not found
e[0me[91m
e[0me[91mnpme[0me[91m e[0me[91mERR! Linux 4.14.33-51.37.amzn1.x86_64
e[0me[91mnpm ERR! argve[0me[91m "/usr/bin/nodejs" "/usr/bin/npm" "run" "build"
npm ERR! node v4.2.6
npm e[0me[91mERR!e[0me[91m npm  v3.5.2
npm e[0me[91mERR! filee[0me[91m sh
e[0me[91mnpm ERR! code ELIFECYCLE
npm ERR! e[0me[91merrno ENOENT
npm ERR! syscall spawn
npm ERR!e[0me[91m redash-client@7.0.0 build: `npm run clean &amp;&amp; NODE_ENV=production node --max-old-space-size=4096 node_modules/.bin/webpack`
e[0me[91mnpm ERR! spawn ENOENT
npm ERR!e[0me[91m 
npm ERR! Failed at the redash-client@7.0.0 build script 'npm run clean &amp;&amp; NODE_ENV=production node --max-old-space-size=4096 node_modules/.bin/webpack'.
npm ERR!e[0me[91m Make sure you have the latest version of node.js and npm installed.
npm ERR! If you do, this is most likely a problem with the redash-client package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     npm run clean &amp;&amp; NODE_ENV=production node --max-old-space-size=4096 node_modules/.bin/webpack
e[0me[91mnpm ERR! You can get information on how to open an issue for this project with:
npm ERR!     npm bugs redash-client
npm ERR! Or if that isn't available, you can get their info via:
npm ERR!     npm owner ls redash-client
e[0me[91mnpm ERR!e[0me[91m There is likely additional logging output above.
e[0me[91m
e[0me[91mnpm ERR! Please include the following file with any support request:
npm ERR!e[0me[91m     /opt/redash/redash-7.0.0/npm-debug.log
e[0mThe command '/bin/sh -c cd /opt/redash/redash-7.0.0/ &amp;&amp; npm run build' returned a non-zero code: 1</code></pre>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_4" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/jesse.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/jesse_avatar.png" tabindex="-1" width="48"/><span itemprop="name">jesse</span></a>
</span>
<link href="https://discuss.redash.io/t/upgrade-from-4-0-1-to-redash-7-0-0-giving-internal-server-error/4531" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-09-19T10:49:36Z" itemprop="datePublished">
                    September 19, 2019, 10:49am
                  </time>
<meta content="2019-09-19T10:49:36Z" itemprop="dateModified"/>
<span itemprop="position">4</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Next, upgrade Node from v4 to at least v10. Your system version of Node is pretty old.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_5" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/tanay.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/tanay_avatar.png" tabindex="-1" width="48"/><span itemprop="name">tanay</span></a>
</span>
<link href="https://discuss.redash.io/t/upgrade-from-4-0-1-to-redash-7-0-0-giving-internal-server-error/4531" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-09-19T12:08:38Z" itemprop="datePublished">
                    September 19, 2019, 12:08pm
                  </time>
<meta content="2019-09-19T12:08:38Z" itemprop="dateModified"/>
<span itemprop="position">5</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Hey <a class="mention" href="/u/jesse">@jesse</a>, while upgrading node v4 to v12, receiving following error</p>
<blockquote>
<p>redash-client@7.0.0 build /opt/redash/redash-7.0.0<br/>
npm run clean &amp;&amp; NODE_ENV=production node --max-old-space-size=4096 node_modules/.bin/webpack</p>
<p>redash-client@7.0.0 clean /opt/redash/redash-7.0.0<br/>
rm -rf ./client/dist/</p>
<p>e[91minternal/modules/cjs/loader.js:775<br/>
throw err;<br/>
^</p>
<p>Error: Cannot find module ‘/opt/redash/redash-7.0.0/node_modules/.bin/webpack’<br/>
at Function.Module._resolveFilename (internal/modules/cjs/loader.js:772:15)<br/>
at Function.Module._load (internal/modules/cjs/loader.js:677:27)<br/>
at Function.Module.runMain (internal/modules/cjs/loader.js:999:10)<br/>
at internal/main/run_main_module.js:17:11 {<br/>
code: ‘MODULE_NOT_FOUND’,<br/>
requireStack: <span class="chcklst-box fa fa-square-o fa-fw"></span><br/>
}<br/>
e[0me[91mnpme[0me[91m ERR! code ELIFECYCLE<br/>
e[0me[91mnpm ERR! errno 1<br/>
e[0me[91mnpme[0me[91m ERR! redash-client@7.0.0 build: <code>npm run clean &amp;&amp; NODE_ENV=production node --max-old-space-size=4096 node_modules/.bin/webpack</code><br/>
npm ERR!e[0me[91m Exit status 1<br/>
e[0me[91mnpm ERR!e[0me[91m<br/>
npm ERR!e[0me[91m Failed at the redash-client@7.0.0 build script.<br/>
npme[0me[91m ERR! This is probably not a problem with npm. There is likely additional logging output above.<br/>
e[0me[91mnpm WARNe[0me[91m Local package.json exists, but node_modules missing, did you mean to install?<br/>
e[0me[91m<br/>
e[0me[91mnpm ERR! A complete log of this run can be found in:<br/>
npm ERR!e[0me[91m     /root/.npm/_logs/2019-09-19T12_04_47_988Z-debug.log<br/>
e[0mThe command ‘/bin/sh -c cd /opt/redash/redash-7.0.0/ &amp;&amp; npm run build’ returned a non-zero code: 1</p>
</blockquote>
<p>I’m using following command to install nodejs</p>
<blockquote>
<p>curl -sL <a href="https://deb.nodesource.com/setup_12.x" rel="nofollow noopener">https://deb.nodesource.com/setup_12.x</a> | sudo -E bash -<br/>
apt-get install -y nodejs</p>
</blockquote>
<p>What could be the possible issue ?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_6" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/jesse.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/jesse_avatar.png" tabindex="-1" width="48"/><span itemprop="name">jesse</span></a>
</span>
<link href="https://discuss.redash.io/t/upgrade-from-4-0-1-to-redash-7-0-0-giving-internal-server-error/4531" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-09-19T12:13:21Z" itemprop="datePublished">
                    September 19, 2019, 12:13pm
                  </time>
<meta content="2019-09-19T12:13:21Z" itemprop="dateModified"/>
<span itemprop="position">6</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Look closely at the stack trace. It says that <code>build</code> failed because you’re missing the <code>webpack</code> module. Run <code>npm install</code> before you try to build again.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_7" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/tanay.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/tanay_avatar.png" tabindex="-1" width="48"/><span itemprop="name">tanay</span></a>
</span>
<link href="https://discuss.redash.io/t/upgrade-from-4-0-1-to-redash-7-0-0-giving-internal-server-error/4531" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-09-20T06:40:29Z" itemprop="datePublished">
                    September 20, 2019,  6:40am
                  </time>
<meta content="2019-09-20T09:02:08Z" itemprop="dateModified"/>
<span itemprop="position">7</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Hi <a class="mention" href="/u/jesse">@jesse</a>, After “npm install” seeing folllowing error. I’m not a nodejs expert. So it is hard to figure out the issue.</p>
<blockquote>
<p>e[91mnpme[0me[91m WARN deprecated bfj-node4@5.3.1: Switch to the <code>bfj</code> package for fixes and new features!<br/>
e[0me[91mnpm WARN deprecated browserslist@1.7.7: Browserslist 2 could fail on reading Browserslist &gt;3.0 config used in other tools.<br/>
e[0me[91mnpm WARN e[0me[91mdeprecated left-pad@1.3.0: use String.prototype.padStart()<br/>
e[0me[91mnpm WARN deprecated <span class="mention">@mapbox</span>/gl-matrix@0.0.1: This<br/>
e[0me[91mnpm WARN e[0me[91mdeprecated flatten@1.0.2: I wrote this module a very long time ago; you should use something else.<br/>
e[0me[91mnpm WARN deprecated core-js@1.2.7: core-js@&lt;2.6.8 is no longer maintained. Please, upgrade to core-js@3 or at least to actual version of core-js@2.<br/>
e[0me[91mnpm WARN e[0me[91mdeprecated os-homedir@2.0.0: This is not needed anymore. Use <code>require('os').homedir()</code> instead.<br/>
e[0me[91mnpm ERR! e[0me[91mcodee[0me[91m ENOENT<br/>
npm ERR! syscalle[0me[91m spawn git<br/>
e[0me[91mnpm ERR! path git<br/>
npm ERR! errnoe[0me[91m ENOENT<br/>
e[0me[91mnpm ERR! enoente[0me[91m Error while executing:<br/>
npm ERR! enoent undefined ls-remote -h -t <a href="https://github.com/restorando/cornelius.git" rel="nofollow noopener">https://github.com/restorando/cornelius.git</a><br/>
npm ERR! enoent<br/>
npm ERR! e[0me[91menoent<br/>
npm ERR!e[0me[91m enoent spawn git ENOENT<br/>
npm ERR! enoent This is related to npm not being able to find a file.<br/>
npm ERR! enoent<br/>
e[0me[91m<br/>
e[0me[91mnpme[0me[91m ERR!e[0me[91m A complete log of this run can be found in:<br/>
npm ERR!     /root/.npm/_logs/2019-09-20T08_42_53_599Z-debug.log<br/>
e[0mThe command ‘/bin/sh -c npm install’ returned a non-zero code: 1</p>
</blockquote>
<p>Can you please let me know what could be the possible issue ?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_8" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/tanay.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/tanay_avatar.png" tabindex="-1" width="48"/><span itemprop="name">tanay</span></a>
</span>
<link href="https://discuss.redash.io/t/upgrade-from-4-0-1-to-redash-7-0-0-giving-internal-server-error/4531" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-09-20T13:09:57Z" itemprop="datePublished">
                    September 20, 2019,  1:09pm
                  </time>
<meta content="2019-09-20T13:09:57Z" itemprop="dateModified"/>
<span itemprop="position">8</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Hey <a class="mention" href="/u/jesse">@jesse</a>, I’ve modified few steps before I performed npm install. Now <code>npm install</code> step is passing. But, during <code>npm run build</code> getting following error</p>
<blockquote>
<p>redash-client@7.0.0 build /opt/redash/redash-7.0.0<br/>
npm run clean &amp;&amp; NODE_ENV=production node --max-old-space-size=4096 node_modules/.bin/webpack</p>
<p>redash-client@7.0.0 clean /opt/redash/redash-7.0.0<br/>
rm -rf ./client/dist/</p>
<p>e[91m<br/>
WARNING: We noticed you’re using the <code>useBuiltIns</code> option without declaring a core-js version. Currently, we assume version 2.x when no version is passed. Since this default version will likely change in future versions of Babel, we recommend explicitly setting the core-js version you are using via the <code>corejs</code> option.</p>
<p>You should also be sure that the version you pass to the <code>corejs</code> option matches the version specified in your <code>package.json</code>'s <code>dependencies</code> section. If it doesn’t, you need to run one of the following commands:</p>
<p>npm install --save core-js@2    npm install --save core-js@3<br/>
yarn add core-js@2              yarn add core-js@3</p>
<p>e[0mHash: ea3e183b6921d81f9b09<br/>
Version: webpack 4.40.2<br/>
Time: 125161ms<br/>
Built at: 09/20/2019 1:06:07 PM<br/>
102 assets<br/>
Entrypoint app = vendors~app.41e2ceb2d218f2baf6b3.css vendors~app.41e2ceb2d218f2baf6b3.js vendors~app.41e2ceb2d218f2baf6b3.css.map vendors~app.41e2ceb2d218f2baf6b3.js.map app.449cf4d9a133b9678c6d.css app.449cf4d9a133b9678c6d.js app.449cf4d9a133b9678c6d.css.map app.449cf4d9a133b9678c6d.js.map<br/>
Entrypoint server = server.7d948fd1146c89c80d5b.css server.7d948fd1146c89c80d5b.js server.7d948fd1146c89c80d5b.css.map server.7d948fd1146c89c80d5b.js.map</p>
<p>WARNING in ./client/app/components/PreviewCard.jsx<br/>
Module Warning (from ./node_modules/eslint-loader/index.js):</p>
<p>/opt/redash/redash-7.0.0/client/app/components/PreviewCard.jsx<br/>
36:53  warning  ‘user.id’ is missing in props validation        react/prop-types<br/>
63:66  warning  ‘dataSource.id’ is missing in props validation  react/prop-types</p>
<p><img alt=":heavy_multiplication_x:" class="emoji" src="assets/heavy_multiplication_x.png" title=":heavy_multiplication_x:"/> 2 problems (0 errors, 2 warnings)</p>
<p>@ ./client/app/pages/users/UsersList.jsx 38:0-59 138:33-48<br/>
@ ./client/app/pages sync ^((?![\/.]test[\./]).)*.jsx?$<br/>
@ ./client/app/config/index.js<br/>
@ ./client/app/index.js<br/>
@ multi ./client/app/index.js ./client/app/assets/less/main.less ./client/app/assets/less/ant.less</p>
<p>WARNING in ./client/app/components/dashboards/EditParameterMappingsDialog.jsx<br/>
Module Warning (from ./node_modules/eslint-loader/index.js):</p>
<p>/opt/redash/redash-7.0.0/client/app/components/dashboards/EditParameterMappingsDialog.jsx<br/>
87:16  warning  ‘toastr.error’ is missing in props validation  react/prop-types</p>
<p><img alt=":heavy_multiplication_x:" class="emoji" src="assets/heavy_multiplication_x.png" title=":heavy_multiplication_x:"/> 1 problem (0 errors, 1 warning)</p>
<p>@ [\/.]test[\./]).)*.jsx?<span class="math"> (./client/app/components sync ^((?![\\\/.]test[\\.\/]).)*\.jsx?</span>) ./dashboards/EditParameterMappingsDialog.jsx<br/>
@ ./client/app/config/index.js<br/>
@ ./client/app/index.js<br/>
@ multi ./client/app/index.js ./client/app/assets/less/main.less ./client/app/assets/less/ant.less</p>
<p>WARNING in ./client/app/components/groups/GroupName.jsx<br/>
Module Warning (from ./node_modules/eslint-loader/index.js):</p>
<p>/opt/redash/redash-7.0.0/client/app/components/groups/GroupName.jsx<br/>
17:49  warning  ‘group.type’ is missing in props validation  react/prop-types</p>
<p><img alt=":heavy_multiplication_x:" class="emoji" src="assets/heavy_multiplication_x.png" title=":heavy_multiplication_x:"/> 1 problem (0 errors, 1 warning)</p>
<p>@ ./client/app/pages/groups/GroupDataSources.jsx 49:0-54 257:29-38<br/>
@ ./client/app/pages sync ^((?![\/.]test[\./]).)*.jsx?$<br/>
@ ./client/app/config/index.js<br/>
@ ./client/app/index.js<br/>
@ multi ./client/app/index.js ./client/app/assets/less/main.less ./client/app/assets/less/ant.less</p>
<p>ERROR in ./client/app/components/admin/CeleryStatus.jsx<br/>
Module Error (from ./node_modules/eslint-loader/index.js):</p>
<p>/opt/redash/redash-7.0.0/client/app/components/admin/CeleryStatus.jsx<br/>
3:1  error  <code>@/services/ng</code> import should occur after import of <code>lodash/values</code>  import/order</p>
<p><img alt=":heavy_multiplication_x:" class="emoji" src="assets/heavy_multiplication_x.png" title=":heavy_multiplication_x:"/> 1 problem (1 error, 0 warnings)<br/>
1 error and 0 warnings potentially fixable with the <code>--fix</code> option.</p>
<p>@ ./client/app/pages/admin/tasks/index.js 3:0-59 11:56-68<br/>
@ ./client/app/pages sync ^((?![\/.]test[\./]).)*.jsx?$<br/>
@ ./client/app/config/index.js<br/>
@ ./client/app/index.js<br/>
@ multi ./client/app/index.js ./client/app/assets/less/main.less ./client/app/assets/less/ant.less<br/>
Child html-webpack-plugin for “index.html”:<br/>
1 asset<br/>
Entrypoint undefined = index.html<br/>
Child html-webpack-plugin for “multi_org.html”:<br/>
1 asset<br/>
Entrypoint undefined = multi_org.html<br/>
Child mini-css-extract-plugin node_modules/css-loader/index.js??ref–6-1!client/app/components/QueryEditor.css:<br/>
Entrypoint mini-css-extract-plugin = *<br/>
Child mini-css-extract-plugin node_modules/css-loader/index.js??ref–6-1!client/app/components/app-header/app-header.css:<br/>
Entrypoint mini-css-extract-plugin = *<br/>
Child mini-css-extract-plugin node_modules/css-loader/index.js??ref–6-1!client/app/components/queries/ScheduleDialog.css:<br/>
Entrypoint mini-css-extract-plugin = *<br/>
Child mini-css-extract-plugin node_modules/css-loader/index.js??ref–6-1!client/app/pages/dashboards/dashboard-list.css:<br/>
Entrypoint mini-css-extract-plugin = *<br/>
Child mini-css-extract-plugin node_modules/css-loader/index.js??ref–6-1!client/app/pages/queries-list/queries-list.css:<br/>
Entrypoint mini-css-extract-plugin = *<br/>
Child mini-css-extract-plugin node_modules/css-loader/index.js??ref–6-1!node_modules/cornelius/src/cornelius.css:<br/>
Entrypoint mini-css-extract-plugin = *<br/>
Child mini-css-extract-plugin node_modules/css-loader/index.js??ref–6-1!node_modules/gridstack/dist/gridstack.css:<br/>
Entrypoint mini-css-extract-plugin = *<br/>
Child mini-css-extract-plugin node_modules/css-loader/index.js??ref–6-1!node_modules/leaflet-fullscreen/dist/leaflet.fullscreen.css:<br/>
Entrypoint mini-css-extract-plugin = *<br/>
Child mini-css-extract-plugin node_modules/css-loader/index.js??ref–6-1!node_modules/leaflet.markercluster/dist/MarkerCluster.Default.css:<br/>
Entrypoint mini-css-extract-plugin = *<br/>
Child mini-css-extract-plugin node_modules/css-loader/index.js??ref–6-1!node_modules/leaflet.markercluster/dist/MarkerCluster.css:<br/>
Entrypoint mini-css-extract-plugin = *<br/>
Child mini-css-extract-plugin node_modules/css-loader/index.js??ref–6-1!node_modules/leaflet/dist/leaflet.css:<br/>
Entrypoint mini-css-extract-plugin = *<br/>
Child mini-css-extract-plugin node_modules/css-loader/index.js??ref–6-1!node_modules/pivottable/dist/pivot.css:<br/>
Entrypoint mini-css-extract-plugin = *<br/>
Child mini-css-extract-plugin node_modules/css-loader/index.js??ref–7-1!node_modules/less-loader/dist/cjs.js??ref–7-2!client/app/assets/less/ant.less:<br/>
Entrypoint mini-css-extract-plugin = *<br/>
Child mini-css-extract-plugin node_modules/css-loader/index.js??ref–7-1!node_modules/less-loader/dist/cjs.js??ref–7-2!client/app/assets/less/main.less:<br/>
Entrypoint mini-css-extract-plugin = *<br/>
Child mini-css-extract-plugin node_modules/css-loader/index.js??ref–7-1!node_modules/less-loader/dist/cjs.js??ref–7-2!client/app/assets/less/server.less:<br/>
Entrypoint mini-css-extract-plugin = *<br/>
Child mini-css-extract-plugin node_modules/css-loader/index.js??ref–7-1!node_modules/less-loader/dist/cjs.js??ref–7-2!client/app/components/HelpTrigger.less:<br/>
Entrypoint mini-css-extract-plugin = *<br/>
Child mini-css-extract-plugin node_modules/css-loader/index.js??ref–7-1!node_modules/less-loader/dist/cjs.js??ref–7-2!client/app/components/ParameterMappingInput.less:<br/>
Entrypoint mini-css-extract-plugin = *<br/>
Child mini-css-extract-plugin node_modules/css-loader/index.js??ref–7-1!node_modules/less-loader/dist/cjs.js??ref–7-2!client/app/components/dashboards/AddTextboxDialog.less:<br/>
Entrypoint mini-css-extract-plugin = *<br/>
Child mini-css-extract-plugin node_modules/css-loader/index.js??ref–7-1!node_modules/less-loader/dist/cjs.js??ref–7-2!client/app/components/dashboards/gridstack/gridstack.less:<br/>
Entrypoint mini-css-extract-plugin = *<br/>
Child mini-css-extract-plugin node_modules/css-loader/index.js??ref–7-1!node_modules/less-loader/dist/cjs.js??ref–7-2!client/app/components/dashboards/widget-dialog.less:<br/>
Entrypoint mini-css-extract-plugin = *<br/>
Child mini-css-extract-plugin node_modules/css-loader/index.js??ref–7-1!node_modules/less-loader/dist/cjs.js??ref–7-2!client/app/components/dashboards/widget.less:<br/>
Entrypoint mini-css-extract-plugin = *<br/>
Child mini-css-extract-plugin node_modules/css-loader/index.js??ref–7-1!node_modules/less-loader/dist/cjs.js??ref–7-2!client/app/components/dynamic-table/dynamic-table.less:<br/>
Entrypoint mini-css-extract-plugin = *<br/>
Child mini-css-extract-plugin node_modules/css-loader/index.js??ref–7-1!node_modules/less-loader/dist/cjs.js??ref–7-2!client/app/components/dynamic-table/json-cell/json-view-interactive.less:<br/>
Entrypoint mini-css-extract-plugin = *<br/>
Child mini-css-extract-plugin node_modules/css-loader/index.js??ref–7-1!node_modules/less-loader/dist/cjs.js??ref–7-2!client/app/components/empty-state/empty-state.less:<br/>
Entrypoint mini-css-extract-plugin = *<br/>
Child mini-css-extract-plugin node_modules/css-loader/index.js??ref–7-1!node_modules/less-loader/dist/cjs.js??ref–7-2!client/app/components/layouts/content-with-sidebar.less:<br/>
Entrypoint mini-css-extract-plugin = *<br/>
Child mini-css-extract-plugin node_modules/css-loader/index.js??ref–7-1!node_modules/less-loader/dist/cjs.js??ref–7-2!client/app/pages/dashboards/dashboard.less:<br/>
Entrypoint mini-css-extract-plugin = *<br/>
Child mini-css-extract-plugin node_modules/css-loader/index.js??ref–7-1!node_modules/less-loader/dist/cjs.js??ref–7-2!client/app/pages/users/settings.less:<br/>
Entrypoint mini-css-extract-plugin = *<br/>
Child mini-css-extract-plugin node_modules/css-loader/index.js??ref–7-1!node_modules/less-loader/dist/cjs.js??ref–7-2!client/app/redash-font/style.less:<br/>
Entrypoint mini-css-extract-plugin = *<br/>
Child mini-css-extract-plugin node_modules/css-loader/index.js??ref–7-1!node_modules/less-loader/dist/cjs.js??ref–7-2!client/app/visualizations/funnel/funnel.less:<br/>
Entrypoint mini-css-extract-plugin = *<br/>
Child mini-css-extract-plugin node_modules/css-loader/index.js??ref–7-1!node_modules/less-loader/dist/cjs.js??ref–7-2!client/app/visualizations/pivot/pivot.less:<br/>
Entrypoint mini-css-extract-plugin = *<br/>
Child mini-css-extract-plugin node_modules/css-loader/index.js??ref–7-1!node_modules/less-loader/dist/cjs.js??ref–7-2!client/app/visualizations/table/table-editor.less:<br/>
Entrypoint mini-css-extract-plugin = *<br/>
e[91mnpm ERR!e[0me[91m code ELIFECYCLE<br/>
e[0me[91mnpm e[0me[91mERR! errnoe[0me[91m 2<br/>
e[0me[91mnpme[0me[91m ERR! redash-client@7.0.0 build: <code>npm run clean &amp;&amp; NODE_ENV=production node --max-old-space-size=4096 node_modules/.bin/webpack</code><br/>
npm e[0me[91mERR! Exit status 2<br/>
e[0me[91mnpm ERR!<br/>
e[0me[91mnpm ERR! Failed at the redash-client@7.0.0 build script.<br/>
npme[0me[91m ERR! This is probably not a problem with npm. There is likely additional logging output above.<br/>
e[0me[91m<br/>
npme[0me[91m ERR! A complete log of this run can be found in:<br/>
npm ERR!     /root/.npm/_logs/2019-09-20T13_06_08_106Z-debug.log<br/>
e[0mThe command ‘/bin/sh -c npm run build’ returned a non-zero code: 2</p>
</blockquote>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_9" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/jesse.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/jesse_avatar.png" tabindex="-1" width="48"/><span itemprop="name">jesse</span></a>
</span>
<link href="https://discuss.redash.io/t/upgrade-from-4-0-1-to-redash-7-0-0-giving-internal-server-error/4531" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-09-20T13:47:41Z" itemprop="datePublished">
                    September 20, 2019,  1:47pm
                  </time>
<meta content="2019-09-20T13:47:41Z" itemprop="dateModified"/>
<span itemprop="position">9</span>
</span>
</div>
<div class="post" itemprop="text">
<p>What steps made <code>npm install</code> work? The issue two posts ago was that you installed node v10+ but you were still using node v4 to run the install script. The errors in your newest post still suggest a version mismatch and some weird flags. I don’t believe we run the linter in production.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_10" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/jesse.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/jesse_avatar.png" tabindex="-1" width="48"/><span itemprop="name">jesse</span></a>
</span>
<link href="https://discuss.redash.io/t/upgrade-from-4-0-1-to-redash-7-0-0-giving-internal-server-error/4531" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-09-20T13:51:00Z" itemprop="datePublished">
                    September 20, 2019,  1:51pm
                  </time>
<meta content="2019-09-20T13:51:00Z" itemprop="dateModified"/>
<span itemprop="position">10</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Thinking about this further, I think something went haywire during your upgrade. Many of those errors are because of outdated NPM packages. What steps did you take to upgrade your installation?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_11" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/tanay.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/tanay_avatar.png" tabindex="-1" width="48"/><span itemprop="name">tanay</span></a>
</span>
<link href="https://discuss.redash.io/t/upgrade-from-4-0-1-to-redash-7-0-0-giving-internal-server-error/4531" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-09-20T14:17:42Z" itemprop="datePublished">
                    September 20, 2019,  2:17pm
                  </time>
<meta content="2019-09-20T14:17:42Z" itemprop="dateModified"/>
<span itemprop="position">11</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Hi <a class="mention" href="/u/jesse">@jesse</a>,</p>
<p>Steps I followed to install node 12 version</p>
<blockquote>
<p>curl -sL <a href="https://deb.nodesource.com/setup_12.x" rel="nofollow noopener">https://deb.nodesource.com/setup_12.x</a> | sudo -E bash -<br/>
apt-get install -y nodejs</p>
</blockquote>
<p>Under /opt/redash/redash-7.0.0/</p>
<blockquote>
<p>rm -rf package-lock.json node_modules/<br/>
npm cache clear --force<br/>
npm install<br/>
npm run build</p>
</blockquote>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_12" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/tanay.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/tanay_avatar.png" tabindex="-1" width="48"/><span itemprop="name">tanay</span></a>
</span>
<link href="https://discuss.redash.io/t/upgrade-from-4-0-1-to-redash-7-0-0-giving-internal-server-error/4531" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-09-24T10:52:07Z" itemprop="datePublished">
                    September 24, 2019, 10:52am
                  </time>
<meta content="2019-09-24T10:52:07Z" itemprop="dateModified"/>
<span itemprop="position">12</span>
</span>
</div>
<div class="post" itemprop="text">
<p><a class="mention" href="/u/jesse">@jesse</a> Anything else should I try apart from the steps I mentioned above ?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_13" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/jesse.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/jesse_avatar.png" tabindex="-1" width="48"/><span itemprop="name">jesse</span></a>
</span>
<link href="https://discuss.redash.io/t/upgrade-from-4-0-1-to-redash-7-0-0-giving-internal-server-error/4531" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-09-24T10:54:13Z" itemprop="datePublished">
                    September 24, 2019, 10:54am
                  </time>
<meta content="2019-09-24T10:54:13Z" itemprop="dateModified"/>
<span itemprop="position">13</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Can you tell me about your installation? How did you set up Redash? Docker?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_14" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/tanay.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/tanay_avatar.png" tabindex="-1" width="48"/><span itemprop="name">tanay</span></a>
</span>
<link href="https://discuss.redash.io/t/upgrade-from-4-0-1-to-redash-7-0-0-giving-internal-server-error/4531" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-09-24T10:57:57Z" itemprop="datePublished">
                    September 24, 2019, 10:57am
                  </time>
<meta content="2019-09-24T10:57:57Z" itemprop="dateModified"/>
<span itemprop="position">14</span>
</span>
</div>
<div class="post" itemprop="text">
<p><a class="mention" href="/u/jesse">@jesse</a></p>
<p>Here is the Snippet of my installation. We modified .env, bootstrap.sh and supervisord.conf as per requirements.</p>
<blockquote>
<p>FROM ubuntu:16.04</p>
<p>RUN apt-get update &amp;&amp; apt-get install -y <br/>
curl <br/>
git <br/>
postgresql <br/>
redis-server <br/>
sudo <br/>
wget <br/>
&amp;&amp; apt-get clean <br/>
&amp;&amp; rm -rf /var/lib/apt/lists/*</p>
<p>RUN adduser --system --no-create-home --disabled-login --gecos “” redash</p>
<p><span class="hashtag">#COPY</span> .env /opt/redash/<br/>
<span class="hashtag">#RUN</span> chown redash /opt/redash/.env</p>
<p>COPY supervisord.conf /etc/supervisor/conf.d/</p>
<p>RUN service postgresql start &amp;&amp; service redis-server start<br/>
COPY bootstrap.sh /opt/redash/</p>
<p>RUN /bin/sh /opt/redash/bootstrap.sh</p>
<p>COPY .env /opt/redash/redash-7.0.0/<br/>
RUN chown redash /opt/redash/redash-7.0.0/.env</p>
<p><span class="hashtag">#RUN</span> service redis-server start</p>
<p>RUN service supervisor stop</p>
<p>RUN curl -sL <a href="https://deb.nodesource.com/setup_12.x" rel="nofollow noopener">https://deb.nodesource.com/setup_12.x</a> | sudo -E bash -</p>
<p>RUN apt-get install -y nodejs build-essential</p>
<p>WORKDIR /opt/redash/redash-7.0.0/</p>
<p>RUN rm -rf package-lock.json node_modules/<br/>
RUN npm cache clear --force<br/>
RUN npm update<br/>
RUN npm install --no-optional</p>
<p>RUN npm install --save core-js@^3</p>
<p><span class="hashtag">#create</span> build manifest<br/>
RUN npm run build<br/>
…<br/>
…<br/>
…<br/>
…</p>
</blockquote>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_15" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/jesse.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/jesse_avatar.png" tabindex="-1" width="48"/><span itemprop="name">jesse</span></a>
</span>
<link href="https://discuss.redash.io/t/upgrade-from-4-0-1-to-redash-7-0-0-giving-internal-server-error/4531" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-09-24T11:08:01Z" itemprop="datePublished">
                    September 24, 2019, 11:08am
                  </time>
<meta content="2019-09-24T11:08:01Z" itemprop="dateModified"/>
<span itemprop="position">15</span>
</span>
</div>
<div class="post" itemprop="text">
<p>I think you will have better success if you manually upgrade your V4 instance to V5, V6, and then V7.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_16" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/tanay.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/tanay_avatar.png" tabindex="-1" width="48"/><span itemprop="name">tanay</span></a>
</span>
<link href="https://discuss.redash.io/t/upgrade-from-4-0-1-to-redash-7-0-0-giving-internal-server-error/4531" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-09-26T06:40:43Z" itemprop="datePublished">
                    September 26, 2019,  6:40am
                  </time>
<meta content="2019-09-26T06:40:43Z" itemprop="dateModified"/>
<span itemprop="position">16</span>
</span>
</div>
<div class="post" itemprop="text">
<p><a class="mention" href="/u/jesse">@jesse</a></p>
<p>I successfully managed to upgrade Redash from 4.0.1 to 7.0.0. I think Work directory for Dockerfile  to run <code>npm install</code> and <code>npm run build</code> command must be under <code>/opt/redash/redash-7.0.0/client</code>, NOT the<code>/opt/redash/redash-7.0.0/</code></p>
<p>Thanks for your help!</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
<span class="post-likes">1 Like</span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="overlay" id="modalOverlay" style="display: none;">
<div class="modal-content">
<p>Login or sign up disabled while the site is in read only mode</p>
<hr/>
<button class="btn btn-login">OK</button>
</div>
</div>
<script src="../../js/script.js"></script>
</body>
</html>