<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet"/>
<link href="../../css/checklist_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_theme_2_be4cb2b86ec06123c5e974acd20fd933d14b129d.css" rel="stylesheet"/>
<link href="../../css/discourse-adplugin_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-akismet_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-cakeday_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-chat-integration_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-details_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-footnote_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-lazy-videos_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-local-dates_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/color_definitions_base__2_8fd59ae1f286f43b3ff17996df07ea951685249d.css" rel="stylesheet"/>
<link href="../../css/style.css" rel="stylesheet"/>
<title>Teradata data source support</title></head>
<body>
<div class="navbar">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<div class="navbar-buttons">
<button class="btn btn-signup">Sign Up</button>
<button class="btn btn-login"><i class="fas fa-user"></i> Login</button>
<button class="btn btn-search"><i class="fas fa-search"></i></button>
<div class="navbar-toggle">
<div class="dots"></div>
<div class="dots"></div>
<div class="dots"></div>
</div>
</div>
</div>
<div class="sidebar">
<div class="sidebar-content">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<ul class="sidebar-grid">
<!-- <li><a href="#"><i class="fas fa-list-ul"></i> Topics</a></li> -->
<li><a href="../../page_0.html"><i class="fas fa-layer-group"></i> Topics</a></li>
<li><a href="../../users.html"><i class="fas fa-users"></i> Users</a></li>
<li><a href="../../about.html"><i class="fas fa-info-circle"></i> About</a></li>
<li><a href="../../faq.html"><i class="fas fa-question-circle"></i> FAQ</a></li>
<li><a href="../../groups.html"><i class="fas fa-users"></i> Groups</a></li>
<li><a href="../../badges.html"><i class="fas fa-certificate"></i> Badges</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#categories"><span>▼</span>Categories</a></h3>
<hr/>
<ul class="sidebar-grid categories">
<li>
<a class="badge-wrapper bullet" href="../../c/support/6.html">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name">Support</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/feature-requests/5.html">
<span class="badge-category-bg" style="background-color: #3AB54A"></span>
<span class="badge-category clear-badge">
<span class="category-name">Feature Requests</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/uncategorized/1.html">
<span class="badge-category-bg" style="background-color: #AB9364"></span>
<span class="badge-category clear-badge">
<span class="category-name">Uncategorized</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/development/7.html">
<span class="badge-category-bg" style="background-color: #8C6238"></span>
<span class="badge-category clear-badge">
<span class="category-name">Development</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/tips-tricks-query-examples/11.html">
<span class="badge-category-bg" style="background-color: #652D90"></span>
<span class="badge-category clear-badge" style="white-space: normal;">
<span class="category-name">Tips, Tricks &amp; Query Examples</span>
</span>
</a>
</li>
<li><a href="../../categories.html"><i class="fas fa-list-ul"></i> All categories</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#tags"><span>▼</span>Tags</a></h3>
<hr/>
<ul class="sidebar-grid tags">
<li><a href="../../tag/query_results.html"><i class="fas fa-tag"></i> query_results</a></li>
<li><a href="../../tag/feature-request.html"><i class="fas fa-tag"></i> feature-request</a></li>
<li><a href="../../tag/parameters.html"><i class="fas fa-tag"></i> parameters</a></li>
<li><a href="../../tag/visualizations.html"><i class="fas fa-tag"></i> visualizations</a></li>
<li><a href="../../tag/alerts.html"><i class="fas fa-tag"></i> alerts</a></li>
<li><a href="../../tags.html"><i class="fas fa-list-ul"></i> All tags</a></li>
</ul>
</div>
<div class="sidebar-footer">
            © 2023 <a href="https://discuss.redash.io/" target="_blank">discuss.redash.io</a>
</div>
</div>
<div class="overlay"></div>
<div class="content">
<div class="global-notice">
<div class="row">
<div class="alert alert-info alert-read-only" id="global-notice-alert-read-only">
<span class="text">This site is in read only mode. Please continue to browse, but replying, likes,
                        and other actions are disabled for now.</span>
</div>
</div>
</div>
<div class="imported_page" id="imported_page">
<div class="wrap" id="main-outlet" role="main">
<div id="topic-title">
<h1>
<a href="/t/teradata-data-source-support/83">Teradata data source support</a>
</h1>
<div class="topic-category" itemscope="" itemtype="http://schema.org/BreadcrumbList">
<span itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
<a class="badge-wrapper bullet" href="../../c/feature-requests/5.html" itemprop="item">
<span class="badge-category-bg" style="background-color: #3AB54A"></span>
<span class="badge-category clear-badge">
<span class="category-name" itemprop="name">Feature Requests</span>
</span>
</a>
<meta content="1" itemprop="position"/>
</span>
</div>
</div>
<div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
<meta content="Teradata data source support" itemprop="headline"/>
<meta content="Feature Requests" itemprop="articleSection"/>
<meta content="" itemprop="keywords"/>
<div itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
<meta content="Redash Discourse" itemprop="name"/>
<div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject">
<meta content="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/c07bc573841e1e4a0013ea3b6fe088a1534228a3.png" itemprop="url"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_1">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/german.oviedo.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/german.oviedo_avatar.png" tabindex="-1" width="48"/><span itemprop="name">german.oviedo</span></a>
</span>
<link href="https://discuss.redash.io/t/teradata-data-source-support/83" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2016-06-17T02:33:24Z" itemprop="datePublished">
                    June 17, 2016,  2:33am
                  </time>
<meta content="2016-06-17T02:33:24Z" itemprop="dateModified"/>
<span itemprop="position">1</span>
</span>
</div>
<div class="post" itemprop="articleBody">
<p>Redash is a very powerful tool and we’re already using it with Big Query for some use cases. Unfortunately we’re tied to a Teradata MPP Datawarehouse for highly sensible and critical data.</p>
<p>Teradata published a Python module (<a href="https://developer.teradata.com/tools/reference/teradata-python-module" rel="nofollow noopener">https://developer.teradata.com/tools/reference/teradata-python-module</a>) last year. Since we’re already used to this module we made a first approach (<a href="https://gist.github.com/mrbungie/5fcc076e67e047c8a61de706403b1138" rel="nofollow noopener">https://gist.github.com/mrbungie/5fcc076e67e047c8a61de706403b1138</a>) but it’s still in rough shape.</p>
<p>There are a few problems about our current implementation:</p>
<ul>
<li>Teradata’s module uses ODBC, so there are a few dependencies (unixodbc and Teradata ODBC driver) that may add complexity to the entire project.</li>
<li>It also handles datatypes in such a way that we’re getting NaNs and Infinite values via json.dumps. That means invalid JSON. We made a workaround via a custom JSON Encoder, but is dirty. Another workaround would involve using a custom datatype handler.</li>
</ul>
<p>Both Redash and Teradata are excellent tools by themselves but we think integrating them would make them even more powerful.</p>
<p>PS: Sorry about my english.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
<div class="crawler-linkback-list" itemscope="" itemtype="http://schema.org/ItemList">
<div itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
<a href="http://discuss.redash.io/t/teradata-connector/383" itemprop="url">Teradata Connector</a>
<meta content="3" itemprop="position"/>
</div>
</div>
</div>
<div class="topic-body crawler-post" id="post_2" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/arikfr.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/arikfr_avatar.png" tabindex="-1" width="48"/><span itemprop="name">arikfr</span></a>
</span>
<link href="https://discuss.redash.io/t/teradata-data-source-support/83" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2016-06-17T15:21:31Z" itemprop="datePublished">
                    June 17, 2016,  3:21pm
                  </time>
<meta content="2016-06-17T15:21:31Z" itemprop="dateModified"/>
<span itemprop="position">2</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Teradata query runner will be very welcomed. And yours looks OK.</p>
<p>As for the problems you mentioned:</p>
<ul>
<li>Support for NaN: maybe we should add it to <code>redash.utils.JSONEncoder</code> as other data sources might return a NaN as well. Maybe instead of the <code>is_finite</code> check we can use <code>math.isnan</code>?</li>
<li>Some other data sources require custom packages as well (system or Python). That’s OK. If they are too complex to install (like in the case of Oracle) then we just not include them by default, and only document it. Although I’m thinking of splitting out the query runners into separate PyPi packages, to make it easier to manage their dependencies. We can start with the Teradata query runner as a first pilot, if you’re interested.</li>
</ul>
<p>Btw, no need to apologize for your English - it’s great and anyway I’m not a native speaker myself.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_3" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/german.oviedo.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/german.oviedo_avatar.png" tabindex="-1" width="48"/><span itemprop="name">german.oviedo</span></a>
</span>
<link href="https://discuss.redash.io/t/teradata-data-source-support/83" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2016-06-17T19:22:14Z" itemprop="datePublished">
                    June 17, 2016,  7:22pm
                  </time>
<meta content="2016-06-17T19:22:14Z" itemprop="dateModified"/>
<span itemprop="position">3</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Thanks for your prompt response.</p>
<ul>
<li>I think that’s an option, but Teradata may also return Decimal(‘Infinity’) or Decimal(’-Infinity’). That’s why we used is_finite, as it covers those three cases.</li>
<li>We would be glad to work on it, but we need some guidance over how it should be designed.</li>
</ul>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_4" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/arikfr.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/arikfr_avatar.png" tabindex="-1" width="48"/><span itemprop="name">arikfr</span></a>
</span>
<link href="https://discuss.redash.io/t/teradata-data-source-support/83" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2016-06-19T14:11:18Z" itemprop="datePublished">
                    June 19, 2016,  2:11pm
                  </time>
<meta content="2016-06-19T14:11:18Z" itemprop="dateModified"/>
<span itemprop="position">4</span>
</span>
</div>
<div class="post" itemprop="text">
<p>OK, let’s keep <code>is_finite</code> then.</p>
<blockquote>
<p>We would be glad to work on it, but we need some guidance over how it should be designed.</p>
</blockquote>
<p>I’ll be happy to provide guidance. What you did so far looks good to me. You’re welcome to make a pull request (with an update to the documentation with instructions on what dependencies it needs).</p>
<p>If you have the time and patience, we can use the Teradata connector as a pilot for having the query runners in a separate project.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
<span class="post-likes">1 Like</span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_5" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/neouber.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/neouber_avatar.png" tabindex="-1" width="48"/><span itemprop="name">neouber</span></a>
</span>
<link href="https://discuss.redash.io/t/teradata-data-source-support/83" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2017-01-18T18:21:35Z" itemprop="datePublished">
                    January 18, 2017,  6:21pm
                  </time>
<meta content="2017-01-18T18:21:35Z" itemprop="dateModified"/>
<span itemprop="position">5</span>
</span>
</div>
<div class="post" itemprop="text">
<p><a class="mention" href="/u/german.oviedo">@german.oviedo</a>  , Hey , I have tried to use your gist of td.py and have installed unixodbc and Teradata ODBC driver but still no success.  Just wondering if you have got this running successfully.</p>
<p>Thanks</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_6" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/german.oviedo.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/german.oviedo_avatar.png" tabindex="-1" width="48"/><span itemprop="name">german.oviedo</span></a>
</span>
<link href="https://discuss.redash.io/t/teradata-data-source-support/83" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2017-01-19T00:26:37Z" itemprop="datePublished">
                    January 19, 2017, 12:26am
                  </time>
<meta content="2017-01-19T00:26:37Z" itemprop="dateModified"/>
<span itemprop="position">6</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Hi <a class="mention" href="/u/neouber">@neouber</a>.</p>
<p>It’s a shame we couldn’t develop this any further, being time the main issue here.  Anyways, I would say the main thing here is to test Teradata’s python module and try to use the gist once you’re sure <em>pytd</em> is working by itself.</p>
<p>Some insights about configuring Teradata ODBC in Linux.</p>
<ol>
<li>You don’t need unixodbc for using TD ODBC Driver. Yes I know I said it before, but we learned this some time after.</li>
<li>You should have the following TD packages installed: <strong>tdicu, TeraGSS, tdodbc, cliv2, piom, sqlpp.</strong>
</li>
<li>Make sure you have your environment set correctly. At least you should have <strong>ODBCINST, ODBCINI,  COPLIB, COPERR</strong> set to the ODBC directories. Also check you’re including Teradata’s lib/lib64 in LD_LIBRARY_PATH.</li>
<li>Install teradata’s python module using pip: pip install teradata.</li>
<li>Test the connection using pytd. Check this guide: <a href="https://developer.teradata.com/tools/reference/teradata-python-module" rel="nofollow noopener">https://developer.teradata.com/tools/reference/teradata-python-module</a>
</li>
</ol>
<p>Now, remember some time has passed since we last tested this code. I don’t know if there’s been any changes in APIs or whatsoever that would’ve rendered my gist useless.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_7" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/neouber.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/neouber_avatar.png" tabindex="-1" width="48"/><span itemprop="name">neouber</span></a>
</span>
<link href="https://discuss.redash.io/t/teradata-data-source-support/83" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2017-01-19T11:02:06Z" itemprop="datePublished">
                    January 19, 2017, 11:02am
                  </time>
<meta content="2017-01-19T11:02:06Z" itemprop="dateModified"/>
<span itemprop="position">7</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Thanks <a class="mention" href="/u/german.oviedo">@german.oviedo</a> ,<br/>
I have got pytd up and running separately using the link <a href="http://crashthatch.tumblr.com/post/66957708538/teradata-odbc-connection-using-python-on-ubuntu" rel="nofollow noopener">http://crashthatch.tumblr.com/post/66957708538/teradata-odbc-connection-using-python-on-ubuntu</a>  , so from command line below commands works successfully</p>
<pre><code>import teradata
udaExec = teradata.UdaExec (appName="HelloWorld", version="1.0",logConsole=False)
session = udaExec.connect(method="odbc", system="12.34.56.78" ,username="XXXX" , password="XXXX");
for row in session.execute("SELECT * from xyztable"):
    print(row)
</code></pre>
<p>For setup I have followed the below steps</p>
<ol>
<li>
<p>Created a new file as redash/query_runner/td.py and pasted the gist</p>
</li>
<li>
<p>Added ‘redash.query_runner.td’ in settings.py</p>
</li>
<li>
<p>Add teradata in requirements_all_ds.txt and I have manually installed teradata python module above as well.</p>
</li>
</ol>
<p>4 . Then I tried to create a new connection from redash<br/>
But using the same credentials when I am trying to test connection , its saying Connection Failed . Also can’t see any useful error message even with DEBUG mode on redash side.(REDASH_LOG_LEVEL). This link has all the debug logs - <a href="http://pastebin.com/hfHxhfL0" rel="nofollow noopener">http://pastebin.com/hfHxhfL0</a></p>
<p>Even though connection test was unsuccessful , i tried querying using the same connection and it gives me an error something like “TypeError: run_query() takes exactly 2 arguments (3 given)” , so it is expecting 2 params and got 3 in run_query function.<br/>
To fix this I have added 3rd param “user” as below in your gist code.</p>
<p><code>def run_query(self, query, user):</code></p>
<p>Still the connection test was unsuccessful with Connection Failed error but on Querying i have started getting the below error<br/>
“Error running query: ‘module’ object has no attribute ‘api’”</p>
<p>More detailed error –</p>
<pre><code>[2017-01-19 10:57:07,653: WARNING/Worker-9] Unexpected error while running query:
Traceback (most recent call last):
  File "/opt/redash/current/redash/tasks/queries.py", line 410, in run
    data, error = query_runner.run_query(annotated_query, self.user)
  File "/opt/redash/current/redash/query_runner/td.py", line 99, in run_query
    except teradata.api.Error, e:
AttributeError: 'module' object has no attribute 'api'
</code></pre>
<p>Don’t know where to go from here now. Any help will be really appreciated.</p>
<p>Thanks</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_8" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/german.oviedo.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/german.oviedo_avatar.png" tabindex="-1" width="48"/><span itemprop="name">german.oviedo</span></a>
</span>
<link href="https://discuss.redash.io/t/teradata-data-source-support/83" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2017-01-19T12:56:31Z" itemprop="datePublished">
                    January 19, 2017, 12:56pm
                  </time>
<meta content="2017-01-19T12:56:31Z" itemprop="dateModified"/>
<span itemprop="position">8</span>
</span>
</div>
<div class="post" itemprop="text">
<p>I made some changes to my gist. Take a look and check whether it works <a href="https://gist.github.com/mrbungie/5fcc076e67e047c8a61de706403b1138" rel="nofollow noopener">https://gist.github.com/mrbungie/5fcc076e67e047c8a61de706403b1138</a></p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
<span class="post-likes">1 Like</span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_9" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/neouber.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/neouber_avatar.png" tabindex="-1" width="48"/><span itemprop="name">neouber</span></a>
</span>
<link href="https://discuss.redash.io/t/teradata-data-source-support/83" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2017-01-19T16:23:41Z" itemprop="datePublished">
                    January 19, 2017,  4:23pm
                  </time>
<meta content="2017-01-19T16:23:41Z" itemprop="dateModified"/>
<span itemprop="position">9</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Using your new gist code now . Still unsuccessful.<br/>
To debug the issue , I have removed try /except from run_query function and now its throwing me error as</p>
<pre><code>[2017-01-19 16:15:56,343: WARNING/Worker-2] Unexpected error while running query:
Traceback (most recent call last):
  File "/opt/redash/current/redash/tasks/queries.py", line 410, in run
    data, error = query_runner.run_query(annotated_query, self.user)
  File "/opt/redash/current/redash/query_runner/td.py", line 101, in run_query
    udaExec = teradata.UdaExec(appName="redash", version="1.0",logConsole=False)
**AttributeError: 'module' object has no attribute 'UdaExec'**
</code></pre>
<p>For me it looks like that its not able to import teradata module and thats why it cannot understand attribute ‘UdaExec’.</p>
<p>Funny thing is I can run the below code from command line successfully but from redash it not able to import teradata module in td.py</p>
<pre><code>import teradata
udaExec = teradata.UdaExec (appName="HelloWorld", version="1.0",logConsole=False)
session = udaExec.connect(method="odbc", system="12.34.56.78" ,username="XXXX" , password="XXXX");
for row in session.execute("SELECT * from xyztable"):
    print(row)
</code></pre>
<p>I have even mentioned below variables in env</p>
<ul>
<li>ODBCINI=/usr/local/etc/odbc.ini</li>
<li>ODBCINST=/usr/local/etc/odbcinst.ini</li>
<li>NLSPATH=/opt/teradata/client/14.10/odbc_64/msg/tdodbc.cat</li>
<li>LD_LIBRARY_PATH=/opt/teradata/client/14.10/odbc_64/lib</li>
</ul>
<p>Any way to debug this ?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_10" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/german.oviedo.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/german.oviedo_avatar.png" tabindex="-1" width="48"/><span itemprop="name">german.oviedo</span></a>
</span>
<link href="https://discuss.redash.io/t/teradata-data-source-support/83" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2017-01-19T16:44:27Z" itemprop="datePublished">
                    January 19, 2017,  4:44pm
                  </time>
<meta content="2017-01-19T16:44:27Z" itemprop="dateModified"/>
<span itemprop="position">10</span>
</span>
</div>
<div class="post" itemprop="text">
<p>It’s redash running under the same user/environment/profile you’re running your “test” code?</p>
<p>I would check that, maybe you’re running Redash under a different python environment. What’s weird is that there are no import errors though.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_11" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/neouber.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/neouber_avatar.png" tabindex="-1" width="48"/><span itemprop="name">neouber</span></a>
</span>
<link href="https://discuss.redash.io/t/teradata-data-source-support/83" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2017-01-19T16:57:16Z" itemprop="datePublished">
                    January 19, 2017,  4:57pm
                  </time>
<meta content="2017-01-19T16:57:16Z" itemprop="dateModified"/>
<span itemprop="position">11</span>
</span>
</div>
<div class="post" itemprop="text">
<p>I am running all this in Docker , I am sshing into the redash docker container and then running the python script …  But when using through web means Redash UI from the same container I am getting this error.<br/>
In my docker-compose.yml i have added below env variables</p>
<pre><code>- ODBCINI=/usr/local/etc/odbc.ini
- ODBCINST=/usr/local/etc/odbcinst.ini
- NLSPATH=/opt/teradata/client/14.10/odbc_64/msg/tdodbc.cat
- LD_LIBRARY_PATH=/opt/teradata/client/14.10/odbc_64/lib</code></pre>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_12" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/german.oviedo.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/german.oviedo_avatar.png" tabindex="-1" width="48"/><span itemprop="name">german.oviedo</span></a>
</span>
<link href="https://discuss.redash.io/t/teradata-data-source-support/83" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2017-01-19T17:47:56Z" itemprop="datePublished">
                    January 19, 2017,  5:47pm
                  </time>
<meta content="2017-01-19T20:17:04Z" itemprop="dateModified"/>
<span itemprop="position">12</span>
</span>
</div>
<div class="post" itemprop="text">
<p>And the myredash/v1:latest Dockerfile?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_13" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/neouber.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/neouber_avatar.png" tabindex="-1" width="48"/><span itemprop="name">neouber</span></a>
</span>
<link href="https://discuss.redash.io/t/teradata-data-source-support/83" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2017-01-19T18:25:51Z" itemprop="datePublished">
                    January 19, 2017,  6:25pm
                  </time>
<meta content="2017-01-19T18:25:51Z" itemprop="dateModified"/>
<span itemprop="position">13</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Here you go …  my docker-compose.yml</p>
<pre><code>  redash:
    #  image: redash/redash:latest
      image: myredash/v1:latest
      ports:
        - "5000:5000"
      links:
        - redis
        - postgres
      environment:
        - REDASH_LOG_LEVEL=DEBUG
        - REDASH_REDIS_URL=redis://redis:6379/0
        - REDASH_DATABASE_URL=postgresql://postgres@postgres/postgres
        - REDASH_COOKIE_SECRET=yoyosecret
        - REDASH_NAME=TestDash
        - REDASH_MAIL_SERVER=relay.testmail.com
        - REDASH_MAIL_DEFAULT_SENDER=noreply@testmail.com
        - REDASH_HOST=http://192.168.99.100
        - ODBCINI=/usr/local/etc/odbc.ini
        - ODBCINST=/usr/local/etc/odbcinst.ini
        - NLSPATH=/opt/teradata/client/14.10/odbc_64/msg/tdodbc.cat
        - LD_LIBRARY_PATH=/opt/teradata/client/14.10/odbc_64/lib
    redis:
      image: redis:2.8
    postgres:
      image: postgres:9.3
    #  environment:
    #    - POSTGRES_PASSWORD=supersecret
      volumes:
        - /home/docker/postgres-data:/var/lib/postgresql/data
    redash-nginx:
      image: redash/nginx:latest
      ports:
        - "80:80"
      links:
        - redash</code></pre>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_14" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/neouber.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/neouber_avatar.png" tabindex="-1" width="48"/><span itemprop="name">neouber</span></a>
</span>
<link href="https://discuss.redash.io/t/teradata-data-source-support/83" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2017-01-19T20:51:10Z" itemprop="datePublished">
                    January 19, 2017,  8:51pm
                  </time>
<meta content="2017-01-19T20:51:10Z" itemprop="dateModified"/>
<span itemprop="position">14</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Ohh sorry , I have pasted the docker-compose.yml instead of Dockerfile.</p>
<p>I haven’t created “myredash/v1” image from Dockerfile, what i did is this below —</p>
<ol>
<li>
<p>Started the official Redash Docker image</p>
</li>
<li>
<p>SSH into that image</p>
</li>
<li>
<p>Installed all the Teradata Drivers and odbc related files referring - <a href="http://crashthatch.tumblr.com/post/66957708538/teradata-odbc-connection-using-python-on-ubuntu" rel="nofollow noopener">http://crashthatch.tumblr.com/post/66957708538/teradata-odbc-connection-using-python-on-ubuntu</a></p>
</li>
<li>
<p>added below variables in ~/.bashrc<br/>
ODBCINI=/usr/local/etc/odbc.ini<br/>
ODBCINST=/usr/local/etc/odbcinst.ini<br/>
NLSPATH=/opt/teradata/client/14.10/odbc_64/msg/tdodbc.cat<br/>
LD_LIBRARY_PATH=/opt/teradata/client/14.10/odbc_64/lib</p>
</li>
<li>
<p>Commit the container and named it as “myredash/v1”</p>
</li>
</ol>
<p>How did you installed your Teradata Drivers ? and yes I am also wondering that how come it is not throwing error while “import teradata” command</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_15" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/german.oviedo.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/german.oviedo_avatar.png" tabindex="-1" width="48"/><span itemprop="name">german.oviedo</span></a>
</span>
<link href="https://discuss.redash.io/t/teradata-data-source-support/83" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2017-01-19T22:45:09Z" itemprop="datePublished">
                    January 19, 2017, 10:45pm
                  </time>
<meta content="2017-01-19T23:07:35Z" itemprop="dateModified"/>
<span itemprop="position">15</span>
</span>
</div>
<div class="post" itemprop="text">
<p>That might explain the problem, when I used it I built a specific Dockerfile for Redash. Maybe as redash is running as a daemon, it can’t see new modules on runtime. It has happened to me in other cases, so it’s posible.</p>
<p>Also, I don’t remember doing as much as that guide, try the following:</p>
<ol>
<li>Download/clone this repo: <a href="https://github.com/getredash/redash" rel="nofollow noopener">https://github.com/getredash/redash</a>
</li>
<li>Put td.py inside redash/query_runners</li>
<li>Add ‘redash.query_runner.td’ in settings.py</li>
<li>Add teradata in requirements_all_ds.txt.</li>
<li>Download and replace the repo Dockerfile with it: <a href="https://gist.github.com/mrbungie/585d8ed1389b624efbf691dc134c366c" rel="nofollow noopener">https://gist.github.com/mrbungie/585d8ed1389b624efbf691dc134c366c</a>
</li>
<li>Copy tdodbc__linux_imdep.14.10.00.00-1.tar inside the root</li>
<li>Build it with: docker build -t redashtd:latest .</li>
</ol>
<p>Tell me if it works.</p>
<p>P.S.: Check the tar command in the modified Dockerfile, just in case.</p>
<p>Edit: I just reread your comment and you commited with teradata’s files. That’s really weird then, but give the gist Dockerfile a try <img alt=":wink:" class="emoji" src="assets/wink.png" title=":wink:"/></p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_16" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/neouber.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/neouber_avatar.png" tabindex="-1" width="48"/><span itemprop="name">neouber</span></a>
</span>
<link href="https://discuss.redash.io/t/teradata-data-source-support/83" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2017-01-20T16:45:45Z" itemprop="datePublished">
                    January 20, 2017,  4:45pm
                  </time>
<meta content="2017-01-20T16:45:45Z" itemprop="dateModified"/>
<span itemprop="position">16</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Hooooo … Finally got it up and running using the above steps.<br/>
I have done few more changes and below is my updated gist which works</p>
<p><a href="https://gist.github.com/shamsulbuddy/97cbd89954a9da9acb4a4bf43ff60ff0" rel="nofollow noopener">Redash-Teradata Dockerfile</a></p>
<p>One thing which i am seeing is that when querying date or timestamps , its just returning null.<br/>
So below queries will return null</p>
<pre><code>SELECT CURRENT_DATE
SELECT CURRENT_TIMESTAMP
</code></pre>
<p>Running them on command line using the below code is returning results but not in Redash. Other datatypes are coming fine.</p>
<pre><code>import teradata
udaExec = teradata.UdaExec (appName="HelloWorld", version="1.0",logConsole=False)
session = udaExec.connect(method="odbc", system="12.34.56.78" ,username="XXXX" , password="XXXX");
for row in session.execute("SELECT CURRENT_TIMESTAMP"):
    print(row)
</code></pre>
<p>I suspect the culprit might be Line 116 in gist of td.py , as thats the place where retured data from cursor is getting manipulated</p>
<p>Let me know your thoughts.</p>
<p>Thanks a lot for your help and guidance till now. I really appreciate it</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_17" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/neouber.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/neouber_avatar.png" tabindex="-1" width="48"/><span itemprop="name">neouber</span></a>
</span>
<link href="https://discuss.redash.io/t/teradata-data-source-support/83" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2017-01-23T13:42:51Z" itemprop="datePublished">
                    January 23, 2017,  1:42pm
                  </time>
<meta content="2017-01-23T13:42:51Z" itemprop="dateModified"/>
<span itemprop="position">17</span>
</span>
</div>
<div class="post" itemprop="text">
<p><a class="mention" href="/u/german.oviedo">@german.oviedo</a> <a class="mention" href="/u/arikfr">@arikfr</a> … any thoughts on above issue of Dates/Timestamps coming as NULL.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="overlay" id="modalOverlay" style="display: none;">
<div class="modal-content">
<p>Login or sign up disabled while the site is in read only mode</p>
<hr/>
<button class="btn btn-login">OK</button>
</div>
</div>
<script src="../../js/script.js"></script>
</body>
</html>