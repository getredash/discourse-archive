<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>302 moved permanently (from disk cache) redirect on login - Support - Redash Discourse</title>
    <meta name="description" content="I have HTTPS and Google OAuth set up but everytime I login I am taken back to the login page; however, if I change the url to say https://&amp;lt;mydomain&amp;gt;/dashboards I can get into redash just fine. Looking at the network atta&amp;hellip;">
    <meta name="generator" content="Discourse 3.2.0.beta2-dev - https://github.com/discourse/discourse version 83621ccbe797223b48b624b00ef04f24672e1f03">
<link rel="icon" type="image/png" href="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/1X/01e20869afc0877e3e5aee0f94419b9e9bffa961_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/1X/e1838a8a0c506503a22e0c60e2334374b2895c87_2_180x180.png">
<meta name="theme-color" media="all" content="#ffffff">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="https://discuss.redash.io/t/302-moved-permanently-from-disk-cache-redirect-on-login/10427" />

<link rel="search" type="application/opensearchdescription+xml" href="https://discuss.redash.io/opensearch.xml" title="Redash Discourse Search">

    <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/color_definitions_base__2_8fd59ae1f286f43b3ff17996df07ea951685249d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" class="light-scheme"/>

  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/desktop_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="desktop"  />



  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/checklist_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="checklist"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/discourse-adplugin_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="discourse-adplugin"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/discourse-akismet_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="discourse-akismet"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/discourse-cakeday_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="discourse-cakeday"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/discourse-chat-integration_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="discourse-chat-integration"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/discourse-details_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="discourse-details"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/discourse-footnote_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="discourse-footnote"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/discourse-lazy-videos_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/discourse-local-dates_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/discourse-narrative-bot_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/discourse-presence_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="discourse-presence"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/discourse-solved_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="discourse-solved"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/discourse-spoiler-alert_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="discourse-spoiler-alert"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/hosted-site_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="hosted-site"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/poll_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="poll"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/poll_desktop_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/desktop_theme_2_be4cb2b86ec06123c5e974acd20fd933d14b129d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2" data-theme-name="default"/>

    
    <meta id="data-ga-universal-analytics" data-tracking-code="UA-47088186-6" data-json="{&quot;cookieDomain&quot;:&quot;auto&quot;}" data-auto-link-domains="">

  <link rel="preload" href="https://global.discourse-cdn.com/standard17/assets/google-universal-analytics-v3-08add7ec997ab472fcd9f821d32ff7caf4b8b9a5de2ec18ca723a040be07a098.gz.js" as="script">
<script defer src="https://global.discourse-cdn.com/standard17/assets/google-universal-analytics-v3-08add7ec997ab472fcd9f821d32ff7caf4b8b9a5de2ec18ca723a040be07a098.gz.js"></script>


        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;302 moved permanently (from disk cache) redirect on login&#39;" href="https://discuss.redash.io/t/302-moved-permanently-from-disk-cache-redirect-on-login/10427.rss" />
    <meta property="og:site_name" content="Redash Discourse" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/e1838a8a0c506503a22e0c60e2334374b2895c87.png" />
<meta property="og:image" content="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/e1838a8a0c506503a22e0c60e2334374b2895c87.png" />
<meta property="og:url" content="https://discuss.redash.io/t/302-moved-permanently-from-disk-cache-redirect-on-login/10427" />
<meta name="twitter:url" content="https://discuss.redash.io/t/302-moved-permanently-from-disk-cache-redirect-on-login/10427" />
<meta property="og:title" content="302 moved permanently (from disk cache) redirect on login" />
<meta name="twitter:title" content="302 moved permanently (from disk cache) redirect on login" />
<meta property="og:description" content="I have HTTPS and Google OAuth set up but everytime I login I am taken back to the login page; however, if I change the url to say https://&lt;mydomain&gt;/dashboards I can get into redash just fine. Looking at the network attachment in chrome I can see I get a 302 moved permanently (from disk cache) which redirects back to the login page. I saw there was a similar issue to this but I am using the AMI from us-east-1 so not able to configure the flask module" />
<meta name="twitter:description" content="I have HTTPS and Google OAuth set up but everytime I login I am taken back to the login page; however, if I change the url to say https://&lt;mydomain&gt;/dashboards I can get into redash just fine. Looking at the network attachment in chrome I can see I get a 302 moved permanently (from disk cache) which redirects back to the login page. I saw there was a similar issue to this but I am using the AMI from us-east-1 so not able to configure the flask module" />
<meta property="og:article:section" content="Support" />
<meta property="og:article:section:color" content="BF1E2E" />
<meta property="article:published_time" content="2022-05-04T20:56:39+00:00" />
<meta property="og:ignore_canonical" content="true" />


    <script type="application/ld+json">{"@context":"http://schema.org","@type":"QAPage","name":"302 moved permanently (from disk cache) redirect on login","mainEntity":{"@type":"Question","name":"302 moved permanently (from disk cache) redirect on login","text":"I have HTTPS and Google OAuth set up but everytime I login I am taken back to the login page; however, if I change the url to say https://&lt;mydomain&gt;/dashboards I can get into redash just fine. Looking at the network attachment in chrome I can see I get a 302 moved permanently (from disk cache) which&hellip;","upvoteCount":0,"answerCount":1,"dateCreated":"2022-05-04T20:56:39.173Z","author":{"@type":"Person","name":""},"acceptedAnswer":{"@type":"Answer","text":"Solution to everything above in this thread:\n\nEssentially using AWS CloudFront and Certificate Manager was causing a lot of 302 redirects since we were doing HTTP to HTTPS. When I would successfully login the redirect 302 would just take me back to the login page (due to cloudfront). The Google OAut&hellip;","upvoteCount":0,"dateCreated":"2022-05-06T16:29:01.840Z","url":"https://discuss.redash.io/t/302-moved-permanently-from-disk-cache-redirect-on-login/10427/4","author":{"@type":"Person","name":"jmmiz"}}}}</script>
  </head>
  <body class="crawler ">
    
    <header>
  <a href="/">
    Redash Discourse
  </a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="/t/302-moved-permanently-from-disk-cache-redirect-on-login/10427">302 moved permanently (from disk cache) redirect on login</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://discuss.redash.io/c/support/6" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #BF1E2E'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Support</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='302 moved permanently (from disk cache) redirect on login'>
        <meta itemprop='articleSection' content='Support'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='Redash Discourse'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/c07bc573841e1e4a0013ea3b6fe088a1534228a3.png'>
          </div>
      </div>

          <div id='post_1'  class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://discuss.redash.io/u/jmmiz'><span itemprop='name'>jmmiz</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://discuss.redash.io/t/302-moved-permanently-from-disk-cache-redirect-on-login/10427">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2022-05-04T20:56:39Z' class='post-time'>
                    May 4, 2022,  8:56pm
                  </time>
                  <meta itemprop='dateModified' content='2022-05-04T20:56:39Z'>
              <span itemprop='position'>1</span>
              </span>
            </div>
            <div class='post' itemprop='articleBody'>
              <p>I have HTTPS and Google OAuth set up but everytime I login I am taken back to the login page; however, if I change the url to say <code>https://&lt;mydomain&gt;/dashboards</code> I can get into redash just fine. Looking at the network attachment in chrome I can see I get a <code>302 moved permanently (from disk cache)</code> which redirects back to the login page. I saw there was a similar issue to this but I am using the AMI from us-east-1 so not able to configure the flask module</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="0" />
              </div>

          </div>
          <div id='post_2' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://discuss.redash.io/u/jmmiz'><span itemprop='name'>jmmiz</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://discuss.redash.io/t/302-moved-permanently-from-disk-cache-redirect-on-login/10427">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2022-05-05T16:52:30Z' class='post-time'>
                    May 5, 2022,  4:52pm
                  </time>
                  <meta itemprop='dateModified' content='2022-05-05T16:52:30Z'>
              <span itemprop='position'>2</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>I dug into my logs and these are what I find. When I authenticate with google I get a redirect 302 but it just takes me back to the login page and not the application</p>
<pre><code class="lang-auto">server_1            | [2022-05-05 13:40:38,362][PID:14][INFO][metrics] method=POST path=/ endpoint=unknown status=405 content_type=text/html content_length=178 duration=0.42 query_count=0 query_duration=0.00
server_1            | [2022-05-05 13:40:38,574][PID:9][INFO][metrics] method=GET path=/.env endpoint=redash_index status=302 content_type=text/html; charset=utf-8 content_length=297 duration=0.56 query_count=0 query_duration=0.00
server_1            | [2022-05-05 14:04:24,095][PID:10][INFO][metrics] method=GET path=/static/server.5cdfe7b4f652b665b03f.css endpoint=static status=304 content_type=text/css; charset=utf-8 content_length=187882 duration=0.57 query_count=2 query_duration=5.70
server_1            | [2022-05-05 14:04:24,095][PID:9][INFO][metrics] method=GET path=/static/js/jquery.min.js endpoint=static status=304 content_type=application/javascript content_length=86927 duration=1.72 query_count=2 query_duration=4.55
server_1            | [2022-05-05 14:04:25,654][PID:14][INFO][metrics] method=GET path=/oauth/google endpoint=google_oauth_authorize status=302 content_type=text/html; charset=utf-8 content_length=999 duration=0.66 query_count=2 query_duration=2.56
server_1            | [2022-05-05 14:24:25,534][PID:14][INFO][metrics] method=GET path=/.env endpoint=redash_index status=302 content_type=text/html; charset=utf-8 content_length=297 duration=0.56 query_count=0 query_duration=0.00
server_1            | [2022-05-05 14:24:25,552][PID:12][INFO][metrics] method=POST path=/ endpoint=unknown status=405 content_type=text/html content_length=178 duration=0.41 query_count=0 query_duration=0.00
server_1            | [2022-05-05 14:32:10,448][PID:12][INFO][metrics] method=GET path=/.env endpoint=redash_index status=302 content_type=text/html; charset=utf-8 content_length=297 duration=0.62 query_count=0 query_duration=0.00
server_1            | [2022-05-05 14:32:10,481][PID:9][INFO][metrics] method=GET path=/login endpoint=redash_login status=200 content_type=text/html; charset=utf-8 content_length=2027 duration=4.93 query_count=1 query_duration=1.17
server_1            | [2022-05-05 14:32:10,498][PID:10][INFO][metrics] method=GET path=/vendor/phpunit/phpunit/phpunit.xml endpoint=redash_index status=302 content_type=text/html; charset=utf-8 content_length=369 duration=0.58 query_count=0 query_duration=0.00
server_1            | [2022-05-05 14:32:10,559][PID:14][INFO][metrics] method=GET path=/login endpoint=redash_login status=200 content_type=text/html; charset=utf-8 content_length=2063 duration=4.31 query_count=1 query_duration=1.20
server_1            | [2022-05-05 14:42:05,671][PID:10][INFO][metrics] method=GET path=/.env endpoint=redash_index status=302 content_type=text/html; charset=utf-8 content_length=297 duration=0.58 query_count=0 query_duration=0.00
server_1            | [2022-05-05 14:42:07,424][PID:14][INFO][metrics] method=POST path=/ endpoint=unknown status=405 content_type=text/html content_length=178 duration=0.42 query_count=0 query_duration=0.00
server_1            | [2022-05-05 15:21:00,737][PID:9][INFO][metrics] method=POST path=/ endpoint=unknown status=405 content_type=text/html content_length=178 duration=0.39 query_count=0 query_duration=0.00
server_1            | [2022-05-05 15:21:00,933][PID:14][INFO][metrics] method=GET path=/.env endpoint=redash_index status=302 content_type=text/html; charset=utf-8 content_length=297 duration=0.58 query_count=0 query_duration=0.00
</code></pre>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="0" />
              </div>

          </div>
          <div id='post_3' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://discuss.redash.io/u/jmmiz'><span itemprop='name'>jmmiz</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://discuss.redash.io/t/302-moved-permanently-from-disk-cache-redirect-on-login/10427">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2022-05-05T19:34:04Z' class='post-time'>
                    May 5, 2022,  7:34pm
                  </time>
                  <meta itemprop='dateModified' content='2022-05-05T19:34:04Z'>
              <span itemprop='position'>3</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Oddly enough the redirect started working; however, I have a weird security issue now where I had a user try to login and every time they login it is logging in under me now. They are on a separate device in incognito mode and when “Sign in with google” is clicked and they use their google account it signs in as me. Not entirely sure what is going on but any help would be greatly appreciated</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="0" />
              </div>

          </div>
          <div id='post_4' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://discuss.redash.io/u/jmmiz'><span itemprop='name'>jmmiz</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://discuss.redash.io/t/302-moved-permanently-from-disk-cache-redirect-on-login/10427">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2022-05-06T16:29:01Z' class='post-time'>
                    May 6, 2022,  4:29pm
                  </time>
                  <meta itemprop='dateModified' content='2022-05-06T16:29:01Z'>
              <span itemprop='position'>4</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Solution to everything above in this thread:</p>
<p>Essentially using AWS CloudFront and Certificate Manager was causing a lot of 302 redirects since we were doing HTTP to HTTPS. When I would successfully login the redirect 302 would just take me back to the login page (due to cloudfront). The Google OAuth issue when a user would login from a different device and click “Sign in With Google” it would essentially store the cookies on the server so basically anyone could just sign in as me.</p>
<p>To fix this, I set up our own NGINX server and built the config with docker. We used Letsencrypt with the docker build so we can renew every so often and also use a cron job to automate this. Everything works perfect and users can login as their own account with Google OAuth.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="0" />
              </div>

          </div>
    </div>






    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='/guidelines' itemprop="url">FAQ/Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='http://redash.io/terms.html' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='http://redash.io/privacy.html' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
