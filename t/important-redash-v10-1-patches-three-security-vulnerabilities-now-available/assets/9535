<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>IMPORTANT: Redash V10.1 patches three security vulnerabilities, now available - Announcements - Redash Discourse</title>
    <meta name="description" content="Summary
Today, we are releasing V10.1 which includes fixes for three security vulnerabilities. Click the links for complete details to see whether your installation is affected: 

Insecure default configuration affects &amp;hellip;">
    <meta name="generator" content="Discourse 3.2.0.beta2-dev - https://github.com/discourse/discourse version 83621ccbe797223b48b624b00ef04f24672e1f03">
<link rel="icon" type="image/png" href="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/1X/01e20869afc0877e3e5aee0f94419b9e9bffa961_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/1X/e1838a8a0c506503a22e0c60e2334374b2895c87_2_180x180.png">
<meta name="theme-color" media="all" content="#ffffff">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="https://discuss.redash.io/t/important-redash-v10-1-patches-three-security-vulnerabilities-now-available/9535" />

<link rel="search" type="application/opensearchdescription+xml" href="https://discuss.redash.io/opensearch.xml" title="Redash Discourse Search">

    <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/color_definitions_base__2_8fd59ae1f286f43b3ff17996df07ea951685249d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" class="light-scheme"/>

  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/desktop_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="desktop"  />



  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/checklist_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="checklist"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/discourse-adplugin_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="discourse-adplugin"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/discourse-akismet_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="discourse-akismet"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/discourse-cakeday_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="discourse-cakeday"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/discourse-chat-integration_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="discourse-chat-integration"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/discourse-details_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="discourse-details"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/discourse-footnote_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="discourse-footnote"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/discourse-lazy-videos_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/discourse-local-dates_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/discourse-narrative-bot_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/discourse-presence_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="discourse-presence"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/discourse-solved_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="discourse-solved"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/discourse-spoiler-alert_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="discourse-spoiler-alert"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/hosted-site_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="hosted-site"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/poll_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="poll"  />
  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/poll_desktop_d86c892d7cd5311243d31a8f11787f4b0342874d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://sjc6.discourse-cdn.com/standard17/stylesheets/desktop_theme_2_be4cb2b86ec06123c5e974acd20fd933d14b129d.css?__ws=discuss.redash.io" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2" data-theme-name="default"/>

    
    <meta id="data-ga-universal-analytics" data-tracking-code="UA-47088186-6" data-json="{&quot;cookieDomain&quot;:&quot;auto&quot;}" data-auto-link-domains="">

  <link rel="preload" href="https://global.discourse-cdn.com/standard17/assets/google-universal-analytics-v3-08add7ec997ab472fcd9f821d32ff7caf4b8b9a5de2ec18ca723a040be07a098.gz.js" as="script">
<script defer src="https://global.discourse-cdn.com/standard17/assets/google-universal-analytics-v3-08add7ec997ab472fcd9f821d32ff7caf4b8b9a5de2ec18ca723a040be07a098.gz.js"></script>


        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;IMPORTANT: Redash V10.1 patches three security vulnerabilities, now available&#39;" href="https://discuss.redash.io/t/important-redash-v10-1-patches-three-security-vulnerabilities-now-available/9535.rss" />
    <meta property="og:site_name" content="Redash Discourse" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/e1838a8a0c506503a22e0c60e2334374b2895c87.png" />
<meta property="og:image" content="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/e1838a8a0c506503a22e0c60e2334374b2895c87.png" />
<meta property="og:url" content="https://discuss.redash.io/t/important-redash-v10-1-patches-three-security-vulnerabilities-now-available/9535" />
<meta name="twitter:url" content="https://discuss.redash.io/t/important-redash-v10-1-patches-three-security-vulnerabilities-now-available/9535" />
<meta property="og:title" content="IMPORTANT: Redash V10.1 patches three security vulnerabilities, now available" />
<meta name="twitter:title" content="IMPORTANT: Redash V10.1 patches three security vulnerabilities, now available" />
<meta property="og:description" content="Summary Today, we are releasing V10.1 which includes fixes for three security vulnerabilities. Click the links for complete details to see whether your installation is affected:   Insecure default configuration affects installations where REDASH_COOKIE_SECRET is not set explicitly (CVE-2021-41192) SSRF vulnerability affects installations that enabled URL-loading data sources (CVE-2021-43780) Incorrect usage of state parameter in OAuth client code affects installations where Google Login is enab..." />
<meta name="twitter:description" content="Summary Today, we are releasing V10.1 which includes fixes for three security vulnerabilities. Click the links for complete details to see whether your installation is affected:   Insecure default configuration affects installations where REDASH_COOKIE_SECRET is not set explicitly (CVE-2021-41192) SSRF vulnerability affects installations that enabled URL-loading data sources (CVE-2021-43780) Incorrect usage of state parameter in OAuth client code affects installations where Google Login is enab..." />
<meta property="og:article:section" content="Announcements" />
<meta property="og:article:section:color" content="AB9364" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="3 mins üïë" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="2 ‚ù§" />
<meta property="article:published_time" content="2021-11-24T04:11:46+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    
    <header>
  <a href="/">
    Redash Discourse
  </a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="/t/important-redash-v10-1-patches-three-security-vulnerabilities-now-available/9535">IMPORTANT: Redash V10.1 patches three security vulnerabilities, now available</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://discuss.redash.io/c/announcements/8" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #AB9364'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Announcements</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='IMPORTANT: Redash V10.1 patches three security vulnerabilities, now available'>
        <meta itemprop='articleSection' content='Announcements'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='Redash Discourse'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/c07bc573841e1e4a0013ea3b6fe088a1534228a3.png'>
          </div>
      </div>

          <div id='post_1'  class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://discuss.redash.io/u/jesse'><span itemprop='name'>jesse</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://discuss.redash.io/t/important-redash-v10-1-patches-three-security-vulnerabilities-now-available/9535">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-11-24T04:11:46Z' class='post-time'>
                    November 24, 2021,  4:11am
                  </time>
                  <meta itemprop='dateModified' content='2021-11-24T04:11:46Z'>
              <span itemprop='position'>1</span>
              </span>
            </div>
            <div class='post' itemprop='articleBody'>
              <h1>
<a name="summary-1" class="anchor" href="#summary-1"></a>Summary</h1>
<p>Today, we are releasing V10.1 which includes fixes for three security vulnerabilities. Click the links for complete details to see whether your installation is affected:</p>
<ul>
<li>Insecure default configuration affects installations where <code>REDASH_COOKIE_SECRET</code> is not set explicitly (<a href="https://github.com/getredash/redash/security/advisories/GHSA-g8xr-f424-h2rv">CVE-2021-41192</a>)</li>
<li>SSRF vulnerability affects installations that enabled URL-loading data sources (<a href="https://github.com/getredash/redash/security/advisories/GHSA-fcpv-hgq6-87h7">CVE-2021-43780</a>)</li>
<li>Incorrect usage of <code>state</code> parameter in OAuth client code affects installations where Google Login is enabled (<a href="https://github.com/getredash/redash/security/advisories/GHSA-vhc7-w7r8-8m34">CVE-2021-43777</a>)</li>
</ul>
<p>The <a href="https://github.com/getredash/redash/releases/tag/v10.1.0">V10.1 release page</a> is live on Github now.</p>
<p>As always we recommend upgrading to the latest version, especially if any of the security issues affect your deployment. If this is not possible, please refer to the disclosures for information about possible workarounds and mitigation steps.</p>
<p>This release also incorporates these two PR‚Äôs which didn‚Äôt merge before the V10 release:</p>
<ul>
<li>Speed up big query schema loading (<a href="https://github.com/getredash/redash/pull/5632">#5632</a>)</li>
<li>Add support for Firebolt data source (<a href="https://github.com/getredash/redash/pull/5606">#5606</a>)</li>
</ul>
<p>The docker tag for this release is <code>redash/redash:10.1.0.b50633</code></p>
<p>Huge thanks to <a href="https://github.com/iangcarroll">Ian Carroll</a> and a reporter who wished to remain anonymous for disclosing these vulnerabilities and helping us make Redash safer.</p>
<h1>
<a name="upgrading-2" class="anchor" href="#upgrading-2"></a>Upgrading</h1>
<p><em>These instructions are duplicated from the <a href="https://github.com/getredash/redash/releases/tag/v10.1.0">V10.1 Release Page</a></em></p>
<h2>
<a name="from-v100-3" class="anchor" href="#from-v100-3"></a>From V10.0:</h2>
<p>Follow our standard upgrade process (reproduced below).</p>
<ol>
<li>Make sure to backup your data. You only need to backup Redash‚Äôs PostgreSQL database (the database Redash stores metadata in, not the ones you might be querying) as the data in Redis is transient.</li>
<li>Change directory to /opt/redash.</li>
<li>Update <code>/opt/redash/docker-compose.yml</code> Redash image reference to <code>redash/redash:10.1.0.b50633</code>
</li>
<li>Stop Redash services: <code>docker-compose stop server scheduler scheduled_worker adhoc_worker</code> (you might need to list additional services if you updated your configuration)</li>
<li>(No migrations are needed when upgrading from 10.0)</li>
<li>Read the <code>Impact</code> segment at <a href="https://github.com/getredash/redash/security/advisories/GHSA-g8xr-f424-h2rv">this link</a>. If your installation is affected, follow the instructions under the <code>Patches</code> heading to secure the secret fields in your database.</li>
<li>Start services with docker-compose up -d</li>
</ol>
<h2>
<a name="from-v9-4" class="anchor" href="#from-v9-4"></a>From V9:</h2>
<p>Follow the same steps as V10 but for step 5:</p>
<ol start="5">
<li>Apply migration: <code>docker-compose run --rm server manage db upgrade</code>
</li>
</ol>
<h2>
<a name="from-v8-or-earlier-5" class="anchor" href="#from-v8-or-earlier-5"></a>From V8 or earlier</h2>
<ol>
<li>Follow the complete steps outlined in the <a href="https://github.com/getredash/redash/releases/tag/v10.0.0">V10.0 release </a> but use this Docker Tag in step 3: <code>redash/redash:10.1.0.b50633</code>
</li>
<li>Read the <code>Impact</code> segment at <a href="https://github.com/getredash/redash/security/advisories/GHSA-g8xr-f424-h2rv">this link</a>. If your installation is affected, follow the instructions under the <code>Patches</code> heading to secure the secret fields in your database.</li>
</ol>
<h1>
<a name="vulnerabilities-6" class="anchor" href="#vulnerabilities-6"></a>Vulnerabilities</h1>
<p>We have reproduced the formal disclosure for each vulnerability below.</p>
<h2>
<a name="cve-2021-41192-high-severity-insecure-default-configuration-of-secret-keys-7" class="anchor" href="#cve-2021-41192-high-severity-insecure-default-configuration-of-secret-keys-7"></a><a href="https://github.com/getredash/redash/security/advisories/GHSA-g8xr-f424-h2rv">CVE-2021-41192</a> - HIGH SEVERITY - Insecure default configuration of secret keys</h2>
<h3>
<a name="impact-8" class="anchor" href="#impact-8"></a>Impact</h3>
<p>If you configured Redash without explicitly specifying the <code>REDASH_COOKIE_SECRET</code> environment variable, Redash instead used a default value that is the same across all installations. In such cases, the instance is vulnerable to attackers being able to forge sessions using the known default value.</p>
<p>In conjunction with removing the default value to make sure that a value is always provided, we have added a page to our documentation about <a href="https://redash.io/help/open-source/admin-guide/secrets#Changing-the-Application-Secret">setting and managing secret keys in Redash</a>.</p>
<p>Our thanks to Ian Carroll (<span class="mention">@iangcarroll</span> on Github) for responsibly disclosing this vulnerability.</p>
<h4>
<a name="how-can-i-tell-if-my-instance-is-affected-9" class="anchor" href="#how-can-i-tell-if-my-instance-is-affected-9"></a>How can I tell if my instance is affected?</h4>
<p>You can verify whether your instance is affected by checking whether the <code>REDASH_COOKIE_SECRET</code> environment variable is set for your installation. If it is not present in your configuration then you should follow the steps to secure instance, outlined in the Patches section below</p>
<p>If you are using any of Redash‚Äôs official cloud images (AWS, GCE, Digital Ocean) or used our setup script to generate your Docker installation this vulnerability is most likely mitigated already. Please check <code>/opt/redash/env</code> to confirm that an explicit value for <code>REDASH_COOKIE_SECRET</code> has been set.</p>
<h3>
<a name="patches-10" class="anchor" href="#patches-10"></a>Patches</h3>
<p>A software patch is not required to fix this vulnerability. Instead, an admin must modify Redash‚Äôs configuration through environment variables. Depending on the version of Redash, an admin may also need to run a CLI command to re-encrypt some fields in the database (see below).</p>
<p>The current <code>master</code> and <code>release/10.0.x</code> branches have removed the default value for <code>REDASH_COOKIE_SECRET</code>. All future releases will also require this to be set explicitly. For Docker installations, you can upgrade to Docker Tag <code>redash/redash:10.1.0.b50633</code>.</p>
<p>For existing installations, you will need to ensure that explicit values are set for the <code>REDASH_COOKIE_SECRET</code> <em>and</em> <code>REDASH_SECRET_KEY</code> variables.</p>
<h4>
<a name="v7-and-later-11" class="anchor" href="#v7-and-later-11"></a>V7 and later</h4>
<p>Starting in version 7, Redash encrypts data source and alert destination details in the database using the <code>REDASH_SECRET_KEY</code> environment variable.</p>
<p>If you <em>have not</em> set <code>REDASH_SECRET_KEY</code> explicitly:</p>
<ol>
<li>Set the <code>REDASH_SECRET_KEY</code> environment variable to be the default (current) cookie_secret : <code>c292a0a3aa32397cdb050e233733900f</code>
</li>
<li>Set <code>REDASH_COOKIE_SECRET</code> to a different value [^1]</li>
<li>Use the Redash CLI to re-encrypt using a secret key different from step 1 (see <a href="http://redash.io/help/open-source/admin-guide/secrets#Changing-the-Application-Secret">docs</a>)</li>
<li>Set the <code>REDASH_SECRET_KEY</code> environment variable to the new value you used in step 3</li>
<li>Restart Redash</li>
</ol>
<p>If you <em>have</em> set <code>REDASH_SECRET_KEY</code> explicitly:</p>
<ol>
<li>Set the <code>REDASH_COOKIE_SECRET</code> environment variable [^1]</li>
<li>Restart Redash</li>
</ol>
<h4>
<a name="v6-and-earlier-12" class="anchor" href="#v6-and-earlier-12"></a>V6 and earlier</h4>
<p>If you‚Äôre using Redash version 6 or older (before we introduced data sources encryption):</p>
<ol>
<li>Set the <code>REDASH_COOKIE_SECRET</code> environment variable [^1]</li>
<li>Restart Redash</li>
</ol>
<h3>
<a name="for-more-information-13" class="anchor" href="#for-more-information-13"></a>For more information</h3>
<p>If you have any questions or comments about this advisory:</p>
<ul>
<li>Open an issue in <a href="https://github.com/getredash/redash">getredash/redash</a> if you believe further development is needed.</li>
<li>Start a thread in <a href="http://discuss.redash.io/">the forum</a>.</li>
</ul>
<p>[^1]: Read about how to pick a secret key in our <a href="http://redash.io/help/open-source/admin-guide/secrets#Choosing-a-Secret-Key">docs</a></p>
<h2>
<a name="cve-2021-43777-moderate-severity-insecure-use-of-state-parameter-for-google-login-14" class="anchor" href="#cve-2021-43777-moderate-severity-insecure-use-of-state-parameter-for-google-login-14"></a><a href="https://github.com/getredash/redash/security/advisories/GHSA-vhc7-w7r8-8m34">CVE-2021-43777</a> - MODERATE SEVERITY - Insecure use of state parameter for Google Login</h2>
<h3>
<a name="impact-15" class="anchor" href="#impact-15"></a>Impact</h3>
<p><strong>If you do not use Google Login for your instance of Redash, this vulnerability does not affect you.</strong></p>
<p>The current implementation of Google Login (via OAuth) incorrectly uses the <code>state</code> parameter to pass the next URL to redirect the user to after login. The <code>state</code> parameter should be used for a CSRF token, not a static and easily predicted value.</p>
<p>Our thanks to the reporter of this vulnerability, who wished to remain anonymous.</p>
<h3>
<a name="patches-16" class="anchor" href="#patches-16"></a>Patches</h3>
<p>The current <code>master</code> and <code>release/10.x.x</code> branches address this by replacing <code>Flask-Oauthlib</code> with <a href="https://github.com/lepture/authlib">Authlib</a> which automatically provides and validates a CSRF token for the <code>state</code> variable. The new implementation stores the next URL on the user session object.</p>
<p>Affected users should upgrade to V10.1. For Docker installations, you can upgrade to Docker Tag <code>redash/redash:10.1.0.b50633</code>.</p>
<h3>
<a name="workarounds-17" class="anchor" href="#workarounds-17"></a>Workarounds</h3>
<p>Disabling Google Login will mitigate the vulnerability.</p>
<ol>
<li>First you should re-enable password login for your instance.</li>
<li>Then disable Google login.</li>
<li>After this, each user will need to reset their password from the log-in screen.</li>
</ol>
<h3>
<a name="references-18" class="anchor" href="#references-18"></a>References</h3>
<p><a href="https://redash.io/help/user-guide/users/authentication-options">Redash Authentication Guide</a><br>
<a href="https://developers.google.com/identity/protocols/oauth2/openid-connect?hl=en#createxsrftoken">Google‚Äôs Official guidance on the state token</a></p>
<h3>
<a name="for-more-information-19" class="anchor" href="#for-more-information-19"></a>For more information</h3>
<p>If you have any questions or comments about this advisory:</p>
<ul>
<li>Open an issue in <a href="https://github.com/getredash/redash">getredash/redash</a> if you believe further development is needed.</li>
<li>Start a thread in <a href="http://discuss.redash.io/">the forum</a>.</li>
</ul>
<h2>
<a name="cve-2021-43780-moderate-severity-url-loading-data-sources-subject-to-ssrf-vulnerability-20" class="anchor" href="#cve-2021-43780-moderate-severity-url-loading-data-sources-subject-to-ssrf-vulnerability-20"></a><a href="https://github.com/getredash/redash/security/advisories/GHSA-fcpv-hgq6-87h7">CVE-2021-43780</a> - MODERATE SEVERITY - URL-loading data sources subject to SSRF vulnerability</h2>
<h3>
<a name="impact-21" class="anchor" href="#impact-21"></a>Impact</h3>
<p>The current implementation of URL-loading data sources like JSON, CSV, or Excel is vulnerable to advanced methods of Server Side Request Forgery (SSRF). These vulnerabilities are only exploitable on installations where a URL-loading data source is enabled.</p>
<p>Our thanks to Ian Carroll (<span class="mention">@iangcarroll</span> on Github) for responsibly disclosing this vulnerability.</p>
<h3>
<a name="patches-22" class="anchor" href="#patches-22"></a>Patches</h3>
<p>The current <code>master</code> and <code>release/10.x.x</code> branches address this by applying the <a href="https://github.com/JordanMilne/Advocate">Advocate library</a> for making http requests instead of the requests library directly. Users should upgrade to version 10.1 to receive this patch. For Docker installations, you can upgrade to Docker Tag <code>redash/redash:10.1.0.b50633</code>.</p>
<h3>
<a name="workarounds-23" class="anchor" href="#workarounds-23"></a>Workarounds</h3>
<p>To mitigate the vulnerability without upgrading:</p>
<ol>
<li>You can disable the vulnerable data sources entirely, by adding the following env variable to your configuration. This will make them unavailable inside the webapp.</li>
</ol>
<pre><code class="lang-bash">REDASH_DISABLED_QUERY_RUNNERS = "redash.query_runner.excel,redash.query_runner.csv,redash.query_runner.json_ds,redash.query_runner.url,redash.query_runner.drill,redash.query_runner.jira"
</code></pre>
<ol start="2">
<li>You can switch any data source of the following types to be ‚ÄúView Only‚Äù for all groups on the Settings &gt; Groups &gt; Data Sources screen:</li>
</ol>
<ul>
<li>JSON</li>
<li>CSV</li>
<li>Excel</li>
<li>Apache Drill</li>
<li>Jira</li>
<li>URL</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/17067911/140547237-db269f31-8cbb-482e-a978-77105e47603a.png" alt="CleanShot 2021-11-05 at 11 44 35@2x" width="690" height="345"></p>
<h3>
<a name="for-more-information-24" class="anchor" href="#for-more-information-24"></a>For more information</h3>
<p>If you have any questions or comments about this advisory:</p>
<ul>
<li>Open an issue in <a href="https://github.com/getredash/redash">getredash/redash</a> if you believe further development is needed.</li>
<li>Start a thread in <a href="http://discuss.redash.io/">the forum</a>.</li>
</ul>
<hr>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="2" />
              <span class='post-likes'>2 Likes</span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="0" />
              </div>

          </div>
          <div id='post_4' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://discuss.redash.io/u/jesse'><span itemprop='name'>jesse</span></a>
                
                  Pinned 
              </span>

              <link itemprop="mainEntityOfPage" href="https://discuss.redash.io/t/important-redash-v10-1-patches-three-security-vulnerabilities-now-available/9535">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-11-24T04:12:42Z' class='post-time'>
                    November 24, 2021,  4:12am
                  </time>
                  <meta itemprop='dateModified' content='2021-11-24T04:12:42Z'>
              <span itemprop='position'>4</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="0" />
              </div>

          </div>
    </div>






    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='/guidelines' itemprop="url">FAQ/Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='http://redash.io/terms.html' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='http://redash.io/privacy.html' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
