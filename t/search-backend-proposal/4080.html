<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet"/>
<link href="../../css/checklist_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_theme_2_be4cb2b86ec06123c5e974acd20fd933d14b129d.css" rel="stylesheet"/>
<link href="../../css/discourse-adplugin_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-akismet_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-cakeday_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-chat-integration_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-details_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-footnote_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-lazy-videos_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-local-dates_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/color_definitions_base__2_8fd59ae1f286f43b3ff17996df07ea951685249d.css" rel="stylesheet"/>
<link href="../../css/style.css" rel="stylesheet"/>
<title>Search backend proposal</title></head>
<body>
<div class="navbar">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<div class="navbar-buttons">
<button class="btn btn-signup">Sign Up</button>
<button class="btn btn-login"><i class="fas fa-user"></i> Login</button>
<button class="btn btn-search"><i class="fas fa-search"></i></button>
<div class="navbar-toggle">
<div class="dots"></div>
<div class="dots"></div>
<div class="dots"></div>
</div>
</div>
</div>
<div class="sidebar">
<div class="sidebar-content">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<ul class="sidebar-grid">
<!-- <li><a href="#"><i class="fas fa-list-ul"></i> Topics</a></li> -->
<li><a href="../../page_0.html"><i class="fas fa-layer-group"></i> Topics</a></li>
<li><a href="../../users.html"><i class="fas fa-users"></i> Users</a></li>
<li><a href="../../about.html"><i class="fas fa-info-circle"></i> About</a></li>
<li><a href="../../faq.html"><i class="fas fa-question-circle"></i> FAQ</a></li>
<li><a href="../../groups.html"><i class="fas fa-users"></i> Groups</a></li>
<li><a href="../../badges.html"><i class="fas fa-certificate"></i> Badges</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#categories"><span>▼</span>Categories</a></h3>
<hr/>
<ul class="sidebar-grid categories">
<li>
<a class="badge-wrapper bullet" href="../../c/support/6.html">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name">Support</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/feature-requests/5.html">
<span class="badge-category-bg" style="background-color: #3AB54A"></span>
<span class="badge-category clear-badge">
<span class="category-name">Feature Requests</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/uncategorized/1.html">
<span class="badge-category-bg" style="background-color: #AB9364"></span>
<span class="badge-category clear-badge">
<span class="category-name">Uncategorized</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/development/7.html">
<span class="badge-category-bg" style="background-color: #8C6238"></span>
<span class="badge-category clear-badge">
<span class="category-name">Development</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/tips-tricks-query-examples/11.html">
<span class="badge-category-bg" style="background-color: #652D90"></span>
<span class="badge-category clear-badge" style="white-space: normal;">
<span class="category-name">Tips, Tricks &amp; Query Examples</span>
</span>
</a>
</li>
<li><a href="../../categories.html"><i class="fas fa-list-ul"></i> All categories</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#tags"><span>▼</span>Tags</a></h3>
<hr/>
<ul class="sidebar-grid tags">
<li><a href="../../tag/query_results.html"><i class="fas fa-tag"></i> query_results</a></li>
<li><a href="../../tag/feature-request.html"><i class="fas fa-tag"></i> feature-request</a></li>
<li><a href="../../tag/parameters.html"><i class="fas fa-tag"></i> parameters</a></li>
<li><a href="../../tag/visualizations.html"><i class="fas fa-tag"></i> visualizations</a></li>
<li><a href="../../tag/alerts.html"><i class="fas fa-tag"></i> alerts</a></li>
<li><a href="../../tags.html"><i class="fas fa-list-ul"></i> All tags</a></li>
</ul>
</div>
<div class="sidebar-footer">
            © 2023 <a href="https://discuss.redash.io/" target="_blank">discuss.redash.io</a>
</div>
</div>
<div class="overlay"></div>
<div class="content">
<div class="global-notice">
<div class="row">
<div class="alert alert-info alert-read-only" id="global-notice-alert-read-only">
<span class="text">This site is in read only mode. Please continue to browse, but replying, likes,
                        and other actions are disabled for now.</span>
</div>
</div>
</div>
<div class="imported_page" id="imported_page">
<div class="wrap" id="main-outlet" role="main">
<div id="topic-title">
<h1>
<a href="/t/search-backend-proposal/4080">Search backend proposal</a>
</h1>
<div class="topic-category" itemscope="" itemtype="http://schema.org/BreadcrumbList">
<span itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
<a class="badge-wrapper bullet" href="../../c/development/7.html" itemprop="item">
<span class="badge-category-bg" style="background-color: #8C6238"></span>
<span class="badge-category clear-badge">
<span class="category-name" itemprop="name">Development</span>
</span>
</a>
<meta content="1" itemprop="position"/>
</span>
</div>
</div>
<div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
<meta content="Search backend proposal" itemprop="headline"/>
<meta content="Development" itemprop="articleSection"/>
<meta content="" itemprop="keywords"/>
<div itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
<meta content="Redash Discourse" itemprop="name"/>
<div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject">
<meta content="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/c07bc573841e1e4a0013ea3b6fe088a1534228a3.png" itemprop="url"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_1">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/jezdez.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/jezdez_avatar.png" tabindex="-1" width="48"/><span itemprop="name">jezdez</span></a>
</span>
<link href="https://discuss.redash.io/t/search-backend-proposal/4080" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-07-01T14:57:10Z" itemprop="datePublished">
                    July 1, 2019,  2:57pm
                  </time>
<meta content="2019-07-01T14:57:10Z" itemprop="dateModified"/>
<span itemprop="position">1</span>
</span>
</div>
<div class="post" itemprop="articleBody">
<p>Following the opening of <a href="https://github.com/getredash/redash/pull/3908" rel="nofollow noopener">pull request 3908</a> and my past work on adding full text search (Postgres tsvector based) on the Redash backend I thought I share my concerns with the current design of it and offer options for ways out of it. I’m not sure if this should block PR 3908 (I don’t think it needs to), but I would certainly encourage pausing for a moment to consider an extended approach.</p>
<p>Looking back, I’m not super convinced the tsvector based search delivered what we hoped to get – smooth deployment and improved results. Especially given the fact that the tsvector backend is limited in many ways and excludes a huge part of the market, e.g. for non-latin languages like Chinese and Japanese.</p>
<h2>My suggestion</h2>
<ul>
<li>adding a search backend system (like the query runner registry) that can be extended with additional Python packages (it would only need to have a CRUD interface, so could be pretty simplistic, see below)</li>
<li>revert to the “old” (read: pre-tsvector) ILIKE based search as the default backend (including multibyte-search as proposed in the PR)</li>
<li>but implement more complex (pg tsvector, <a href="https://whoosh.readthedocs.io/en/latest/intro.html" rel="nofollow noopener">Whoosh</a>, <a href="https://www.algolia.com/" rel="nofollow noopener">Algolia</a> or <a href="https://www.elastic.co/de/products/elasticsearch" rel="nofollow noopener">Elasticsearch</a>) backends as well, either by the Redash team/contributors or 3rd parties</li>
<li>given the design of the tsvector backend which requires it to be part of the individual data models (e.g. the Query.search_vector column) I think we need to stick with it for a bit but eventually should demote and then deprecate it</li>
</ul>
<h2>Code example</h2>
<pre><code class="lang-python">class SearchRegistry(object):

    def __init__(self):
        self.backends = {}
        for backend in settings.REDASH_DEFAULT_SEARCH_BACKENDS:
            self.register(backend)

    def register(self, class):
        self.backends[class.type()] = class
        return class

    def unregister(self, class):
        self.backends.pop(class.type())


search_backends = SearchRegistry()


class SearchBackend(object):
    def search(self, term, filters, *args, **kwargs):
        raise NotImplementedError

    def add(self, obj):
        raise NotImplementedError

    def remove(self, obj):
        raise NotImplementedError

    def update(self, obj):
        raise NotImplementedError


@search_backends.register
class SimpleSearchBackend(SearchBackend):

    def add(self, obj):
        pass  # since it uses plain database fields

    remove = update = add

    def search(self, model, term, filters, limit=None, *args, **kwargs):
        pattern = u'%{}%'.format(term)
        return model.all_queries().filter(
            or_(
                model.name.ilike(pattern),
                model.description.ilike(pattern)
            )
        ).order_by(model.id).limit(limit)


@search_backends.register
class TsvectorSearchBackend(SimpleSearchBackend):

    def search(self, model, term, filters, limit=None, *args, **kwargs):
        return model.all_queries().search(term, sort=True).limit(limit)


@search_backends.register
class AlgoliaSearchBackend(SearchBackend):

    def __init__(self):
        self.client = SearchClient.create('YourApplicationID', 'YourAdminAPIKey')
        self.index = client.init_index('redash_acme')

    def create(self, obj):
        self.index.save_object(object_to_dict(obj, objectID=obj.id))

    update = create

    def remove(self, obj):
        self.index.delete_object(obj.id)


    def search(self, model, term, filters, limit=None, *args, **kwargs):
        return requests.get(ALGOLIA_API_URL + "/?object={}&amp;term={}&amp;filters={}".format(model.__class__.__name__, term, filters)).json().get('results')

</code></pre>
<p>This is obviously pseudo-code, but I hope you get the idea. Individual search backends could also get more APIs like reindexing all objects via the command line, support for other data models such as alerts and dashboards etc.</p>
<p>What do you think?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
<span class="post-likes">1 Like</span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_2" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/justinclift.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/justinclift_avatar.png" tabindex="-1" width="48"/><span itemprop="name">justinclift</span></a>
</span>
<link href="https://discuss.redash.io/t/search-backend-proposal/4080" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-07-01T15:22:25Z" itemprop="datePublished">
                    July 1, 2019,  3:22pm
                  </time>
<meta content="2019-07-01T15:22:25Z" itemprop="dateModified"/>
<span itemprop="position">2</span>
</span>
</div>
<div class="post" itemprop="text">
<aside class="quote no-group" data-post="1" data-topic="4080">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="assets/607_2.png" width="20"/> jezdez:</div>
<blockquote>
<p>Especially given the fact that the tsvector backend is limited in many ways and excludes a huge part of the market, e.g. for non-latin languages like Chinese and Japanese.</p>
</blockquote>
</aside>
<p>People do have full text search working with Chinese.  It’s not something I’ve personally taken a look at, but (in theory) it “should work”:</p>
<aside class="onebox whitelistedgeneric">
<header class="source">
<img class="site-icon" height="16" src="assets/favicon.ico" width="16"/>
<a href="https://github.com/amutu/zhparser/" rel="nofollow noopener" target="_blank">GitHub</a>
</header>
<article class="onebox-body">
<img class="thumbnail onebox-avatar" height="60" src="assets/3396938" width="60"/>
<h3><a href="https://github.com/amutu/zhparser/" rel="nofollow noopener" target="_blank">amutu/zhparser</a></h3>
<p>zhparser is a PostgreSQL extension for full-text search of Chinese - amutu/zhparser</p>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
<p>Guessing you’ve already been down this path already, and it’s not suitable?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_3" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/jezdez.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/jezdez_avatar.png" tabindex="-1" width="48"/><span itemprop="name">jezdez</span></a>
</span>
<link href="https://discuss.redash.io/t/search-backend-proposal/4080" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-07-01T15:36:27Z" itemprop="datePublished">
                    July 1, 2019,  3:36pm
                  </time>
<meta content="2019-07-01T15:36:27Z" itemprop="dateModified"/>
<span itemprop="position">3</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Oh absolutely, didn’t mean to imply ft search is impossible with Postgres (which I love). But from an operational standpoint it’s more complicated to deploy and maintain custom Postgres extensions for differently sized deployments like Redash (OSS and SaaS)  in my experience. Happy to be convinced otherwise though!</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="3" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_4" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/justinclift.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/justinclift_avatar.png" tabindex="-1" width="48"/><span itemprop="name">justinclift</span></a>
</span>
<link href="https://discuss.redash.io/t/search-backend-proposal/4080" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-07-01T15:40:03Z" itemprop="datePublished">
                    July 1, 2019,  3:40pm
                  </time>
<meta content="2019-07-01T15:40:03Z" itemprop="dateModified"/>
<span itemprop="position">4</span>
</span>
</div>
<div class="post" itemprop="text">
<p>No worries at all, that makes sense. <img alt=":slight_smile:" class="emoji" src="assets/slight_smile.png" title=":slight_smile:"/></p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_5" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/arikfr.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/arikfr_avatar.png" tabindex="-1" width="48"/><span itemprop="name">arikfr</span></a>
</span>
<link href="https://discuss.redash.io/t/search-backend-proposal/4080" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-07-01T18:28:58Z" itemprop="datePublished">
                    July 1, 2019,  6:28pm
                  </time>
<meta content="2019-07-01T18:28:58Z" itemprop="dateModified"/>
<span itemprop="position">5</span>
</span>
</div>
<div class="post" itemprop="text">
<aside class="quote no-group" data-post="3" data-topic="4080">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="assets/607_2.png" width="20"/> jezdez:</div>
<blockquote>
<p>But from an operational standpoint it’s more complicated to deploy and maintain custom Postgres extensions for differently sized deployments like Redash</p>
</blockquote>
</aside>
<p>100% agree here.</p>
<p>Also I’m on board with the backends idea. I just wonder if there is a good approach to managing permissions in search results. Today, when we use queries on the db tables, we can reuse the permission check logic we use in regular select queries. Once we have a dedicated search store, I wonder what a good approach might be?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_6" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/jezdez.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/jezdez_avatar.png" tabindex="-1" width="48"/><span itemprop="name">jezdez</span></a>
</span>
<link href="https://discuss.redash.io/t/search-backend-proposal/4080" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-07-02T11:14:43Z" itemprop="datePublished">
                    July 2, 2019, 11:14am
                  </time>
<meta content="2019-07-02T11:14:43Z" itemprop="dateModified"/>
<span itemprop="position">6</span>
</span>
</div>
<div class="post" itemprop="text">
<aside class="quote group-Team quote-modified" data-full="true" data-post="5" data-topic="4080">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="assets/2_2.png" width="20"/> arikfr:</div>
<blockquote>
<aside class="quote no-group" data-post="3" data-topic="4080">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="assets/607_2.png" width="20"/> jezdez:</div>
<blockquote>
<p>But from an operational standpoint it’s more complicated to deploy and maintain custom Postgres extensions for differently sized deployments like Redash</p>
</blockquote>
</aside>
<p>100% agree here.</p>
<p>Also I’m on board with the backends idea. I just wonder if there is a good approach to managing permissions in search results. Today, when we use queries on the db tables, we can reuse the permission check logic we use in regular select queries. Once we have a dedicated search store, I wonder what a good approach might be?</p>
</blockquote>
</aside>
<p>I think each search result would need to map to individual database rows so that we can reuse the database based permissions system. Basically we’d also index the primary key of the object (e.g. a query) and deserialize it after fetching the search results from the backend. Since our current use for the search is really just for listing purposes I don’t think that’ll be a huge limiting problem.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_7" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/arikfr.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/arikfr_avatar.png" tabindex="-1" width="48"/><span itemprop="name">arikfr</span></a>
</span>
<link href="https://discuss.redash.io/t/search-backend-proposal/4080" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-07-02T13:56:22Z" itemprop="datePublished">
                    July 2, 2019,  1:56pm
                  </time>
<meta content="2019-07-02T13:56:22Z" itemprop="dateModified"/>
<span itemprop="position">7</span>
</span>
</div>
<div class="post" itemprop="text">
<aside class="quote no-group" data-post="6" data-topic="4080">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="assets/607_2.png" width="20"/> jezdez:</div>
<blockquote>
<p>I think each search result would need to map to individual database rows so that we can reuse the database based permissions system.</p>
</blockquote>
</aside>
<p>So we will get object ids from the search provider, and then filter them using the DB when fetching those ids?</p>
<p>Two issues:</p>
<ol>
<li>Latency (the need to fetch the data from the DB), but this is not much different than today.</li>
<li>We might be left with less results than we wanted: i.e. we fetch 20 search results, but 17 of those get filtered. This means that we always need to ask the search provider for more results than we want and also can’t provide proper pagination.</li>
</ol>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="overlay" id="modalOverlay" style="display: none;">
<div class="modal-content">
<p>Login or sign up disabled while the site is in read only mode</p>
<hr/>
<button class="btn btn-login">OK</button>
</div>
</div>
<script src="../../js/script.js"></script>
</body>
</html>