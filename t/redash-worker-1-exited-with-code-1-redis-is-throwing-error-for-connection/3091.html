<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet"/>
<link href="../../css/checklist_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_theme_2_be4cb2b86ec06123c5e974acd20fd933d14b129d.css" rel="stylesheet"/>
<link href="../../css/discourse-adplugin_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-akismet_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-cakeday_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-chat-integration_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-details_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-footnote_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-lazy-videos_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-local-dates_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/color_definitions_base__2_8fd59ae1f286f43b3ff17996df07ea951685249d.css" rel="stylesheet"/>
<link href="../../css/style.css" rel="stylesheet"/>
<title>Redash_worker_1 exited with code 1, Redis is throwing error for connection</title></head>
<body>
<div class="navbar">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<div class="navbar-buttons">
<button class="btn btn-signup">Sign Up</button>
<button class="btn btn-login"><i class="fas fa-user"></i> Login</button>
<button class="btn btn-search"><i class="fas fa-search"></i></button>
<div class="navbar-toggle">
<div class="dots"></div>
<div class="dots"></div>
<div class="dots"></div>
</div>
</div>
</div>
<div class="sidebar">
<div class="sidebar-content">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<ul class="sidebar-grid">
<!-- <li><a href="#"><i class="fas fa-list-ul"></i> Topics</a></li> -->
<li><a href="../../page_0.html"><i class="fas fa-layer-group"></i> Topics</a></li>
<li><a href="../../users.html"><i class="fas fa-users"></i> Users</a></li>
<li><a href="../../about.html"><i class="fas fa-info-circle"></i> About</a></li>
<li><a href="../../faq.html"><i class="fas fa-question-circle"></i> FAQ</a></li>
<li><a href="../../groups.html"><i class="fas fa-users"></i> Groups</a></li>
<li><a href="../../badges.html"><i class="fas fa-certificate"></i> Badges</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#categories"><span>▼</span>Categories</a></h3>
<hr/>
<ul class="sidebar-grid categories">
<li>
<a class="badge-wrapper bullet" href="../../c/support/6.html">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name">Support</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/feature-requests/5.html">
<span class="badge-category-bg" style="background-color: #3AB54A"></span>
<span class="badge-category clear-badge">
<span class="category-name">Feature Requests</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/uncategorized/1.html">
<span class="badge-category-bg" style="background-color: #AB9364"></span>
<span class="badge-category clear-badge">
<span class="category-name">Uncategorized</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/development/7.html">
<span class="badge-category-bg" style="background-color: #8C6238"></span>
<span class="badge-category clear-badge">
<span class="category-name">Development</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/tips-tricks-query-examples/11.html">
<span class="badge-category-bg" style="background-color: #652D90"></span>
<span class="badge-category clear-badge" style="white-space: normal;">
<span class="category-name">Tips, Tricks &amp; Query Examples</span>
</span>
</a>
</li>
<li><a href="../../categories.html"><i class="fas fa-list-ul"></i> All categories</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#tags"><span>▼</span>Tags</a></h3>
<hr/>
<ul class="sidebar-grid tags">
<li><a href="../../tag/query_results.html"><i class="fas fa-tag"></i> query_results</a></li>
<li><a href="../../tag/feature-request.html"><i class="fas fa-tag"></i> feature-request</a></li>
<li><a href="../../tag/parameters.html"><i class="fas fa-tag"></i> parameters</a></li>
<li><a href="../../tag/visualizations.html"><i class="fas fa-tag"></i> visualizations</a></li>
<li><a href="../../tag/alerts.html"><i class="fas fa-tag"></i> alerts</a></li>
<li><a href="../../tags.html"><i class="fas fa-list-ul"></i> All tags</a></li>
</ul>
</div>
<div class="sidebar-footer">
            © 2023 <a href="https://discuss.redash.io/" target="_blank">discuss.redash.io</a>
</div>
</div>
<div class="overlay"></div>
<div class="content">
<div class="global-notice">
<div class="row">
<div class="alert alert-info alert-read-only" id="global-notice-alert-read-only">
<span class="text">This site is in read only mode. Please continue to browse, but replying, likes,
                        and other actions are disabled for now.</span>
</div>
</div>
</div>
<div class="imported_page" id="imported_page">
<div class="wrap" id="main-outlet" role="main">
<div id="topic-title">
<h1>
<a href="/t/redash-worker-1-exited-with-code-1-redis-is-throwing-error-for-connection/3091">Redash_worker_1 exited with code 1, Redis is throwing error for connection</a>
</h1>
<div class="topic-category" itemscope="" itemtype="http://schema.org/BreadcrumbList">
<span itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
<a class="badge-wrapper bullet" href="../../c/support/6.html" itemprop="item">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name" itemprop="name">Support</span>
</span>
</a>
<meta content="1" itemprop="position"/>
</span>
<span itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
<a class="badge-wrapper bullet" href="../../c/support/support-self-hosted/9.html" itemprop="item">
<span class="badge-category-bg" style="background-color: #AB9364"></span>
<span class="badge-category clear-badge">
<span class="category-name" itemprop="name">Self Hosted Redash Support</span>
</span>
</a>
<meta content="2" itemprop="position"/>
</span>
</div>
</div>
<div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
<meta content="Redash_worker_1 exited with code 1, Redis is throwing error for connection" itemprop="headline"/>
<meta content="Self Hosted Redash Support" itemprop="articleSection"/>
<meta content="" itemprop="keywords"/>
<div itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
<meta content="Redash Discourse" itemprop="name"/>
<div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject">
<meta content="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/c07bc573841e1e4a0013ea3b6fe088a1534228a3.png" itemprop="url"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_1">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/vatsalmishra.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/vatsalmishra_avatar.png" tabindex="-1" width="48"/><span itemprop="name">vatsalmishra</span></a>
</span>
<link href="https://discuss.redash.io/t/redash-worker-1-exited-with-code-1-redis-is-throwing-error-for-connection/3091" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-01-25T05:27:19Z" itemprop="datePublished">
                    January 25, 2019,  5:27am
                  </time>
<meta content="2019-02-10T07:18:26Z" itemprop="dateModified"/>
<span itemprop="position">1</span>
</span>
</div>
<div class="post" itemprop="articleBody">
<p>I am using redash (release/6.0.x), trying to run docker-compose up<br/>
Please see the below stacktrace:</p>
<p>Starting redash_redis_1    … done<br/>
Starting redash_postgres_1 … done<br/>
Starting redash_server_1   … done<br/>
Starting redash_worker_1   … done<br/>
Attaching to redash_redis_1, redash_postgres_1, redash_server_1, redash_worker_1<br/>
redis_1     | 1:C 25 Jan 05:21:17.412 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo<br/>
redis_1     | 1:C 25 Jan 05:21:17.412 # Redis version=4.0.12, bits=64, commit=00000000, modified=0, pid=1, just started<br/>
redis_1     | 1:C 25 Jan 05:21:17.412 # Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf<br/>
redis_1     | 1:M 25 Jan 05:21:17.413 * Running mode=standalone, port=6379.<br/>
redis_1     | 1:M 25 Jan 05:21:17.413 # WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.<br/>
redis_1     | 1:M 25 Jan 05:21:17.413 # Server initialized<br/>
redis_1     | 1:M 25 Jan 05:21:17.413 # WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command ‘echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled’ as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.<br/>
redis_1     | 1:M 25 Jan 05:21:17.413 # Can’t handle RDB format version 9<br/>
redis_1     | 1:M 25 Jan 05:21:17.413 # Fatal error loading the DB: Invalid argument. Exiting.<br/>
postgres_1  | LOG:  database system was shut down at 2019-01-25 05:20:15 UTC<br/>
postgres_1  | LOG:  MultiXact member wraparound protections are now enabled<br/>
postgres_1  | LOG:  database system is ready to accept connections<br/>
redash_redis_1 exited with code 1<br/>
postgres_1  | LOG:  autovacuum launcher started<br/>
worker_1    | Starting scheduler and 2 workers for queues: queries,scheduled_queries,celery…<br/>
server_1    | [2019-01-25 05:21:19,983][PID:1][INFO][root] Generating grammar tables from /usr/lib/python2.7/lib2to3/Grammar.txt<br/>
server_1    | [2019-01-25 05:21:20,027][PID:1][INFO][root] Generating grammar tables from /usr/lib/python2.7/lib2to3/PatternGrammar.txt<br/>
worker_1    | [2019-01-25 05:21:20,924][PID:1][INFO][root] Generating grammar tables from /usr/lib/python2.7/lib2to3/Grammar.txt<br/>
worker_1    | [2019-01-25 05:21:20,964][PID:1][INFO][root] Generating grammar tables from /usr/lib/python2.7/lib2to3/PatternGrammar.txt<br/>
server_1    | Traceback (most recent call last):<br/>
server_1    |   File “/app/manage.py”, line 6, in <br/>
server_1    |     from redash.cli import manager<br/>
server_1    |   File “/app/redash/<strong>init</strong>.py”, line 75, in <br/>
server_1    |     reset_new_version_status()<br/>
server_1    |   File “/app/redash/version_check.py”, line 34, in reset_new_version_status<br/>
server_1    |     latest_version = get_latest_version()<br/>
server_1    |   File “/app/redash/version_check.py”, line 40, in get_latest_version<br/>
server_1    |     return redis_connection.get(REDIS_KEY)<br/>
server_1    |   File “/usr/local/lib/python2.7/dist-packages/redis/client.py”, line 880, in get<br/>
server_1    |     return self.execute_command(‘GET’, name)<br/>
server_1    |   File “/usr/local/lib/python2.7/dist-packages/redis/client.py”, line 578, in execute_command<br/>
server_1    |     connection.send_command(*args)<br/>
server_1    |   File “/usr/local/lib/python2.7/dist-packages/redis/connection.py”, line 563, in send_command<br/>
server_1    |     self.send_packed_command(self.pack_command(*args))<br/>
server_1    |   File “/usr/local/lib/python2.7/dist-packages/redis/connection.py”, line 538, in send_packed_command<br/>
server_1    |     self.connect()<br/>
server_1    |   File “/usr/local/lib/python2.7/dist-packages/redis/connection.py”, line 442, in connect<br/>
server_1    |     raise ConnectionError(self._error_message(e))<br/>
server_1    | redis.exceptions.ConnectionError: Error -2 connecting to redis:6379. Name or service not known.<br/>
redash_server_1 exited with code 1<br/>
worker_1    | Traceback (most recent call last):<br/>
worker_1    |   File “/usr/local/bin/celery”, line 11, in <br/>
worker_1    |     sys.exit(main())<br/>
worker_1    |   File “/usr/local/lib/python2.7/dist-packages/celery/<strong>main</strong>.py”, line 16, in main<br/>
worker_1    |     _main()<br/>
worker_1    |   File “/usr/local/lib/python2.7/dist-packages/celery/bin/celery.py”, line 322, in main<br/>
worker_1    |     cmd.execute_from_commandline(argv)<br/>
worker_1    |   File “/usr/local/lib/python2.7/dist-packages/celery/bin/celery.py”, line 496, in execute_from_commandline<br/>
worker_1    |     super(CeleryCommand, self).execute_from_commandline(argv)))<br/>
worker_1    |   File “/usr/local/lib/python2.7/dist-packages/celery/bin/base.py”, line 273, in execute_from_commandline<br/>
worker_1    |     argv = self.setup_app_from_commandline(argv)<br/>
worker_1    |   File “/usr/local/lib/python2.7/dist-packages/celery/bin/base.py”, line 479, in setup_app_from_commandline<br/>
worker_1    |     self.app = self.find_app(app)<br/>
worker_1    |   File “/usr/local/lib/python2.7/dist-packages/celery/bin/base.py”, line 501, in find_app<br/>
worker_1    |     return find_app(app, symbol_by_name=self.symbol_by_name)<br/>
worker_1    |   File “/usr/local/lib/python2.7/dist-packages/celery/app/utils.py”, line 359, in find_app<br/>
worker_1    |     sym = symbol_by_name(app, imp=imp)<br/>
worker_1    |   File “/usr/local/lib/python2.7/dist-packages/celery/bin/base.py”, line 504, in symbol_by_name<br/>
worker_1    |     return imports.symbol_by_name(name, imp=imp)<br/>
worker_1    |   File “/usr/local/lib/python2.7/dist-packages/kombu/utils/imports.py”, line 56, in symbol_by_name<br/>
worker_1    |     module = imp(module_name, package=package, **kwargs)<br/>
worker_1    |   File “/usr/local/lib/python2.7/dist-packages/celery/utils/imports.py”, line 104, in import_from_cwd<br/>
worker_1    |     return imp(module, package=package)<br/>
worker_1    |   File “/usr/lib/python2.7/importlib/<strong>init</strong>.py”, line 37, in import_module<br/>
worker_1    |     <strong>import</strong>(name)<br/>
worker_1    |   File “/app/redash/<strong>init</strong>.py”, line 75, in <br/>
worker_1    |     reset_new_version_status()<br/>
worker_1    |   File “/app/redash/version_check.py”, line 34, in reset_new_version_status<br/>
worker_1    |     latest_version = get_latest_version()<br/>
worker_1    |   File “/app/redash/version_check.py”, line 40, in get_latest_version<br/>
worker_1    |     return redis_connection.get(REDIS_KEY)<br/>
worker_1    |   File “/usr/local/lib/python2.7/dist-packages/redis/client.py”, line 880, in get<br/>
worker_1    |     return self.execute_command(‘GET’, name)<br/>
worker_1    |   File “/usr/local/lib/python2.7/dist-packages/redis/client.py”, line 578, in execute_command<br/>
worker_1    |     connection.send_command(*args)<br/>
worker_1    |   File “/usr/local/lib/python2.7/dist-packages/redis/connection.py”, line 563, in send_command<br/>
worker_1    |     self.send_packed_command(self.pack_command(*args))<br/>
worker_1    |   File “/usr/local/lib/python2.7/dist-packages/redis/connection.py”, line 538, in send_packed_command<br/>
worker_1    |     self.connect()<br/>
worker_1    |   File “/usr/local/lib/python2.7/dist-packages/redis/connection.py”, line 442, in connect<br/>
worker_1    |     raise ConnectionError(self._error_message(e))<br/>
worker_1    | redis.exceptions.ConnectionError: Error -2 connecting to redis:6379. Name or service not known.<br/>
redash_worker_1 exited with code 1</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_2" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/arikfr.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/arikfr_avatar.png" tabindex="-1" width="48"/><span itemprop="name">arikfr</span></a>
</span>
<link href="https://discuss.redash.io/t/redash-worker-1-exited-with-code-1-redis-is-throwing-error-for-connection/3091" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-01-25T06:41:52Z" itemprop="datePublished">
                    January 25, 2019,  6:41am
                  </time>
<meta content="2019-01-25T06:41:52Z" itemprop="dateModified"/>
<span itemprop="position">2</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Your Redis container fails to start. If it’s an existing environment you’re upgrading, try to recreate the Redis container.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_3" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/vatsalmishra.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/vatsalmishra_avatar.png" tabindex="-1" width="48"/><span itemprop="name">vatsalmishra</span></a>
</span>
<link href="https://discuss.redash.io/t/redash-worker-1-exited-with-code-1-redis-is-throwing-error-for-connection/3091" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-01-25T07:12:11Z" itemprop="datePublished">
                    January 25, 2019,  7:12am
                  </time>
<meta content="2019-01-25T07:12:11Z" itemprop="dateModified"/>
<span itemprop="position">3</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Yeah I recreated the Redis container, now it is failing to import  json_loads with following stacktrace.</p>
<p>ubuntu@ip-172-31-1-59:~/redash$ git branch<br/>
master</p>
<ul>
<li>release/5.0.x<br/>
release/6.0.x<br/>
ubuntu@ip-172-31-1-59:~/redash$ sudo docker-compose up<br/>
Starting redash_redis_1    … done<br/>
Starting redash_postgres_1 … done<br/>
Starting redash_server_1   … done<br/>
Starting redash_worker_1   … done<br/>
Attaching to redash_postgres_1, redash_redis_1, redash_server_1, redash_worker_1<br/>
postgres_1  | LOG:  database system was shut down at 2019-01-25 06:29:38 UTC<br/>
postgres_1  | LOG:  MultiXact member wraparound protections are now enabled<br/>
postgres_1  | LOG:  database system is ready to accept connections<br/>
postgres_1  | LOG:  autovacuum launcher started<br/>
redis_1     | 1:C 25 Jan 06:50:19.320 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo<br/>
redis_1     | 1:C 25 Jan 06:50:19.320 # Redis version=4.0.12, bits=64, commit=00000000, modified=0, pid=1, just started<br/>
redis_1     | 1:C 25 Jan 06:50:19.320 # Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf<br/>
redis_1     | 1:M 25 Jan 06:50:19.322 * Running mode=standalone, port=6379.<br/>
redis_1     | 1:M 25 Jan 06:50:19.322 # WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.<br/>
redis_1     | 1:M 25 Jan 06:50:19.322 # Server initialized<br/>
redis_1     | 1:M 25 Jan 06:50:19.322 # WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command ‘echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled’ as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.<br/>
redis_1     | 1:M 25 Jan 06:50:19.322 * DB loaded from disk: 0.000 seconds<br/>
redis_1     | 1:M 25 Jan 06:50:19.322 * Ready to accept connections<br/>
worker_1    | Starting scheduler and 2 workers for queues: queries,scheduled_queries,celery…<br/>
server_1    | [2019-01-25 06:50:21,602][PID:1][INFO][root] Generating grammar tables from /usr/lib/python2.7/lib2to3/Grammar.txt<br/>
server_1    | [2019-01-25 06:50:21,664][PID:1][INFO][root] Generating grammar tables from /usr/lib/python2.7/lib2to3/PatternGrammar.txt<br/>
server_1    | Traceback (most recent call last):<br/>
server_1    |   File “/app/manage.py”, line 6, in <br/>
server_1    |     from redash.cli import manager<br/>
server_1    |   File “/app/redash/<strong>init</strong>.py”, line 71, in <br/>
server_1    |     import_query_runners(settings.QUERY_RUNNERS)<br/>
server_1    |   File “/app/redash/query_runner/<strong>init</strong>.py”, line 175, in import_query_runners<br/>
server_1    |     <strong>import</strong>(runner_import)<br/>
server_1    |   File “/app/redash/query_runner/query_results.py”, line 9, in <br/>
server_1    |     from redash import models<br/>
server_1    |   File “/app/redash/models/<strong>init</strong>.py”, line 32, in <br/>
server_1    | ImportError: cannot import name json_loads<br/>
worker_1    | [2019-01-25 06:50:22,852][PID:1][INFO][root] Generating grammar tables from /usr/lib/python2.7/lib2to3/Grammar.txt<br/>
worker_1    | [2019-01-25 06:50:22,894][PID:1][INFO][root] Generating grammar tables from /usr/lib/python2.7/lib2to3/PatternGrammar.txt<br/>
redash_server_1 exited with code 1<br/>
worker_1    | Traceback (most recent call last):<br/>
worker_1    |   File “/usr/local/bin/celery”, line 11, in <br/>
worker_1    |     sys.exit(main())<br/>
worker_1    |   File “/usr/local/lib/python2.7/dist-packages/celery/<strong>main</strong>.py”, line 16, in main<br/>
worker_1    |     _main()<br/>
worker_1    |   File “/usr/local/lib/python2.7/dist-packages/celery/bin/celery.py”, line 322, in main<br/>
worker_1    |     cmd.execute_from_commandline(argv)<br/>
worker_1    |   File “/usr/local/lib/python2.7/dist-packages/celery/bin/celery.py”, line 496, in execute_from_commandline<br/>
worker_1    |     super(CeleryCommand, self).execute_from_commandline(argv)))<br/>
worker_1    |   File “/usr/local/lib/python2.7/dist-packages/celery/bin/base.py”, line 273, in execute_from_commandline<br/>
worker_1    |     argv = self.setup_app_from_commandline(argv)<br/>
worker_1    |   File “/usr/local/lib/python2.7/dist-packages/celery/bin/base.py”, line 479, in setup_app_from_commandline<br/>
worker_1    |     self.app = self.find_app(app)<br/>
worker_1    |   File “/usr/local/lib/python2.7/dist-packages/celery/bin/base.py”, line 501, in find_app<br/>
worker_1    |     return find_app(app, symbol_by_name=self.symbol_by_name)<br/>
worker_1    |   File “/usr/local/lib/python2.7/dist-packages/celery/app/utils.py”, line 359, in find_app<br/>
worker_1    |     sym = symbol_by_name(app, imp=imp)<br/>
worker_1    |   File “/usr/local/lib/python2.7/dist-packages/celery/bin/base.py”, line 504, in symbol_by_name<br/>
worker_1    |     return imports.symbol_by_name(name, imp=imp)<br/>
worker_1    |   File “/usr/local/lib/python2.7/dist-packages/kombu/utils/imports.py”, line 56, in symbol_by_name<br/>
worker_1    |     module = imp(module_name, package=package, **kwargs)<br/>
worker_1    |   File “/usr/local/lib/python2.7/dist-packages/celery/utils/imports.py”, line 104, in import_from_cwd<br/>
worker_1    |     return imp(module, package=package)<br/>
worker_1    |   File “/usr/lib/python2.7/importlib/<strong>init</strong>.py”, line 37, in import_module<br/>
worker_1    |     <strong>import</strong>(name)<br/>
worker_1    |   File “/app/redash/<strong>init</strong>.py”, line 71, in <br/>
worker_1    |     import_query_runners(settings.QUERY_RUNNERS)<br/>
worker_1    |   File “/app/redash/query_runner/<strong>init</strong>.py”, line 175, in import_query_runners<br/>
worker_1    |     <strong>import</strong>(runner_import)<br/>
worker_1    |   File “/app/redash/query_runner/query_results.py”, line 9, in <br/>
worker_1    |     from redash import models<br/>
worker_1    |   File “/app/redash/models/<strong>init</strong>.py”, line 32, in <br/>
worker_1    | ImportError: cannot import name json_loads<br/>
redash_worker_1 exited with code 1</li>
</ul>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_4" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/vatsalmishra.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/vatsalmishra_avatar.png" tabindex="-1" width="48"/><span itemprop="name">vatsalmishra</span></a>
</span>
<link href="https://discuss.redash.io/t/redash-worker-1-exited-with-code-1-redis-is-throwing-error-for-connection/3091" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-01-25T07:14:49Z" itemprop="datePublished">
                    January 25, 2019,  7:14am
                  </time>
<meta content="2019-01-25T07:14:49Z" itemprop="dateModified"/>
<span itemprop="position">4</span>
</span>
</div>
<div class="post" itemprop="text">
<p>I am not trying to upgrade the envirnoment. I am trying to start redash version 5.0 from github</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_5" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/justinclift.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/justinclift_avatar.png" tabindex="-1" width="48"/><span itemprop="name">justinclift</span></a>
</span>
<link href="https://discuss.redash.io/t/redash-worker-1-exited-with-code-1-redis-is-throwing-error-for-connection/3091" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-01-25T07:34:53Z" itemprop="datePublished">
                    January 25, 2019,  7:34am
                  </time>
<meta content="2019-01-25T07:34:53Z" itemprop="dateModified"/>
<span itemprop="position">5</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Just as a diagnostic step, if you try to start the redis image separately, does it work?</p>
<pre><code>$ docker run --rm redis:3.0-alpine
</code></pre>
<p>For me, when I try it on my local development desktop, this is what’s shown:</p>
<pre><code class="lang-bash">$ docker run --rm redis:3.0-alpine
1:C 25 Jan 07:31:58.826 # Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf
                _._                                                  
           _.-``__ ''-._                                             
      _.-``    `.  `_.  ''-._           Redis 3.0.7 (00000000/0) 64 bit
  .-`` .-```.  ```\/    _.,_ ''-._                                   
 (    '      ,       .-`  | `,    )     Running in standalone mode
 |`-._`-...-` __...-.``-._|'` _.-'|     Port: 6379
 |    `-._   `._    /     _.-'    |     PID: 1
  `-._    `-._  `-./  _.-'    _.-'                                   
 |`-._`-._    `-.__.-'    _.-'_.-'|                                  
 |    `-._`-._        _.-'_.-'    |           http://redis.io        
  `-._    `-._`-.__.-'_.-'    _.-'                                   
 |`-._`-._    `-.__.-'    _.-'_.-'|                                  
 |    `-._`-._        _.-'_.-'    |                                  
  `-._    `-._`-.__.-'_.-'    _.-'                                   
      `-._    `-.__.-'    _.-'                                       
          `-._        _.-'                                           
              `-.__.-'                                               

1:M 25 Jan 07:31:58.828 # WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.
1:M 25 Jan 07:31:58.828 # Server started, Redis version 3.0.7
1:M 25 Jan 07:31:58.829 # WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.
1:M 25 Jan 07:31:58.829 # WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command 'echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled' as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.
1:M 25 Jan 07:31:58.829 * The server is now ready to accept connections on port 6379
</code></pre>
<p>That last line “The server is now ready to accept connections on port 6379” is the important bit.</p>
<p>Note - to exit out of that, just hit Control+C.  That’ll shut down and (in this case) automatically remove the left over container.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_6" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/justinclift.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/justinclift_avatar.png" tabindex="-1" width="48"/><span itemprop="name">justinclift</span></a>
</span>
<link href="https://discuss.redash.io/t/redash-worker-1-exited-with-code-1-redis-is-throwing-error-for-connection/3091" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-01-25T08:56:12Z" itemprop="datePublished">
                    January 25, 2019,  8:56am
                  </time>
<meta content="2019-01-25T08:56:12Z" itemprop="dateModified"/>
<span itemprop="position">6</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Just noticed something that could be important.</p>
<p>Your redis version seems to be wrong.  The <a href="https://github.com/getredash/redash/blob/a16170e7014ecb773b748963497f7ddcc7dec43d/docker-compose.yml#L35" rel="nofollow noopener">docker-compose.yml in your GitHub branch</a> clearly uses Redis version 3.</p>
<p>However, the version of Redis being shown in your startup logs shows it is using: <code>Redis version=4.0.12</code>.</p>
<p>Your docker-compose setup seems to be wonky.  Probably need to re-create it, carefully using the correct docker-compose.yml file. <img alt=":smile:" class="emoji" src="assets/smile.png" title=":smile:"/></p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="overlay" id="modalOverlay" style="display: none;">
<div class="modal-content">
<p>Login or sign up disabled while the site is in read only mode</p>
<hr/>
<button class="btn btn-login">OK</button>
</div>
</div>
<script src="../../js/script.js"></script>
</body>
</html>