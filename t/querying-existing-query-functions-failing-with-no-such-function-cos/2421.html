<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet"/>
<link href="../../css/checklist_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_theme_2_be4cb2b86ec06123c5e974acd20fd933d14b129d.css" rel="stylesheet"/>
<link href="../../css/discourse-adplugin_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-akismet_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-cakeday_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-chat-integration_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-details_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-footnote_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-lazy-videos_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-local-dates_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/color_definitions_base__2_8fd59ae1f286f43b3ff17996df07ea951685249d.css" rel="stylesheet"/>
<link href="../../css/style.css" rel="stylesheet"/>
<title>Querying Existing Query Functions Failing with no such function: cos</title></head>
<body>
<div class="navbar">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<div class="navbar-buttons">
<button class="btn btn-signup">Sign Up</button>
<button class="btn btn-login"><i class="fas fa-user"></i> Login</button>
<button class="btn btn-search"><i class="fas fa-search"></i></button>
<div class="navbar-toggle">
<div class="dots"></div>
<div class="dots"></div>
<div class="dots"></div>
</div>
</div>
</div>
<div class="sidebar">
<div class="sidebar-content">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<ul class="sidebar-grid">
<!-- <li><a href="#"><i class="fas fa-list-ul"></i> Topics</a></li> -->
<li><a href="../../page_0.html"><i class="fas fa-layer-group"></i> Topics</a></li>
<li><a href="../../users.html"><i class="fas fa-users"></i> Users</a></li>
<li><a href="../../about.html"><i class="fas fa-info-circle"></i> About</a></li>
<li><a href="../../faq.html"><i class="fas fa-question-circle"></i> FAQ</a></li>
<li><a href="../../groups.html"><i class="fas fa-users"></i> Groups</a></li>
<li><a href="../../badges.html"><i class="fas fa-certificate"></i> Badges</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#categories"><span>▼</span>Categories</a></h3>
<hr/>
<ul class="sidebar-grid categories">
<li>
<a class="badge-wrapper bullet" href="../../c/support/6.html">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name">Support</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/feature-requests/5.html">
<span class="badge-category-bg" style="background-color: #3AB54A"></span>
<span class="badge-category clear-badge">
<span class="category-name">Feature Requests</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/uncategorized/1.html">
<span class="badge-category-bg" style="background-color: #AB9364"></span>
<span class="badge-category clear-badge">
<span class="category-name">Uncategorized</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/development/7.html">
<span class="badge-category-bg" style="background-color: #8C6238"></span>
<span class="badge-category clear-badge">
<span class="category-name">Development</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/tips-tricks-query-examples/11.html">
<span class="badge-category-bg" style="background-color: #652D90"></span>
<span class="badge-category clear-badge" style="white-space: normal;">
<span class="category-name">Tips, Tricks &amp; Query Examples</span>
</span>
</a>
</li>
<li><a href="../../categories.html"><i class="fas fa-list-ul"></i> All categories</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#tags"><span>▼</span>Tags</a></h3>
<hr/>
<ul class="sidebar-grid tags">
<li><a href="../../tag/query_results.html"><i class="fas fa-tag"></i> query_results</a></li>
<li><a href="../../tag/feature-request.html"><i class="fas fa-tag"></i> feature-request</a></li>
<li><a href="../../tag/parameters.html"><i class="fas fa-tag"></i> parameters</a></li>
<li><a href="../../tag/visualizations.html"><i class="fas fa-tag"></i> visualizations</a></li>
<li><a href="../../tag/alerts.html"><i class="fas fa-tag"></i> alerts</a></li>
<li><a href="../../tags.html"><i class="fas fa-list-ul"></i> All tags</a></li>
</ul>
</div>
<div class="sidebar-footer">
            © 2023 <a href="https://discuss.redash.io/" target="_blank">discuss.redash.io</a>
</div>
</div>
<div class="overlay"></div>
<div class="content">
<div class="global-notice">
<div class="row">
<div class="alert alert-info alert-read-only" id="global-notice-alert-read-only">
<span class="text">This site is in read only mode. Please continue to browse, but replying, likes,
                        and other actions are disabled for now.</span>
</div>
</div>
</div>
<div class="imported_page" id="imported_page">
<div class="wrap" id="main-outlet" role="main">
<div id="topic-title">
<h1>
<a href="/t/querying-existing-query-functions-failing-with-no-such-function-cos/2421">Querying Existing Query Functions Failing with no such function: cos</a>
</h1>
<div class="topic-category" itemscope="" itemtype="http://schema.org/BreadcrumbList">
<span itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
<a class="badge-wrapper bullet" href="../../c/support/6.html" itemprop="item">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name" itemprop="name">Support</span>
</span>
</a>
<meta content="1" itemprop="position"/>
</span>
</div>
</div>
<div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
<meta content="Querying Existing Query Functions Failing with no such function: cos" itemprop="headline"/>
<meta content="Support" itemprop="articleSection"/>
<meta content="" itemprop="keywords"/>
<div itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
<meta content="Redash Discourse" itemprop="name"/>
<div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject">
<meta content="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/c07bc573841e1e4a0013ea3b6fe088a1534228a3.png" itemprop="url"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_1">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/tomiwa.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/tomiwa_avatar.png" tabindex="-1" width="48"/><span itemprop="name">tomiwa</span></a>
</span>
<link href="https://discuss.redash.io/t/querying-existing-query-functions-failing-with-no-such-function-cos/2421" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2018-10-03T17:14:19Z" itemprop="datePublished">
                    October 3, 2018,  5:14pm
                  </time>
<meta content="2018-10-03T18:37:35Z" itemprop="dateModified"/>
<span itemprop="position">1</span>
</span>
</div>
<div class="post" itemprop="articleBody">
<p>Hello, I am using the <a href="https://redash.io/help/user-guide/querying/query-results-data-source" rel="nofollow noopener">query existing queries</a> feature for my redash app and when I try to run my queries I get the following error. I should probably also add that this is a nested query, so query_132001 is actually a table that pulls from another query_table is that possible?:</p>
<p><code>Error running query: no such function: COS</code></p>
<p>I was also getting the same issue when I used PI() and removed it but was still getting errors</p>
<pre><code class="lang-auto">SELECT count(*) AS transactionvolume
   FROM query_132001 p2
   WHERE p2.livingspacesquarefootageag BETWEEN p1.livingspacesquarefootageag * 0.8 AND p1.livingspacesquarefootageag * 1.2
     AND p2.bathroomsFull BETWEEN p1.bathroomsfull - 1 AND p1.bathroomsfull + 1
     AND p2.bedrooms BETWEEN p1.bedrooms - 1 AND p1.bedrooms + 1
     AND p2.buildingtype = buildingtype
     AND p2.community = community
     AND p2.transactiontype = 'historicalTransaction'
     AND (

    6371000.0*6371000.0*
     (
     (((p2.longitude - p1.longitude) * 2.0 * 3.141592654)/360.0*COS((p2.latitude * 2.0 * 3.141592654) /360.0)) * (((p2.longitude - p1.longitude) * 2.0 * 3.141592654)/360.0*COS((p2.latitude * 2.0 * 3.141592654) /360.0)) +

     (((p2.latitude - p1.latitude) * 2.0 * 3.141592654)/360.0) * (((p2.latitude - p1.latitude) * 2.0 * 3.141592654)/360.0)
     )

   ) &lt; 800*800
</code></pre>
<p>It is strange because when I run the exact same queries with my postgres database as the data source and I don’t get any issues.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_3" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/arikfr.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/arikfr_avatar.png" tabindex="-1" width="48"/><span itemprop="name">arikfr</span></a>
</span>
<link href="https://discuss.redash.io/t/querying-existing-query-functions-failing-with-no-such-function-cos/2421" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2018-10-03T19:23:25Z" itemprop="datePublished">
                    October 3, 2018,  7:23pm
                  </time>
<meta content="2018-10-03T19:23:25Z" itemprop="dateModified"/>
<span itemprop="position">3</span>
</span>
</div>
<div class="post" itemprop="text">
<p>The Query Results data source uses SQLite’s syntax and not the syntax of the original query. My guess is that SQLite doesn’t have <code>cos</code>/<code>pi</code> functions, but worth checking its reference.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_4" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/tomiwa.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/tomiwa_avatar.png" tabindex="-1" width="48"/><span itemprop="name">tomiwa</span></a>
</span>
<link href="https://discuss.redash.io/t/querying-existing-query-functions-failing-with-no-such-function-cos/2421" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2018-10-03T21:24:33Z" itemprop="datePublished">
                    October 3, 2018,  9:24pm
                  </time>
<meta content="2018-10-03T21:24:33Z" itemprop="dateModified"/>
<span itemprop="position">4</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Okay thanks for the quick response, Arik that was helpful.</p>
<p>For anyone interested, it seems like the solution is to try and precalculate the columns using cos before you get to the SQLite stage. See these two links for more information:<br/>
<aside class="onebox whitelistedgeneric">
<header class="source">
<img class="site-icon" height="32" src="https://assets-cdn.github.com/favicon.ico" width="32"/>
<a href="https://github.com/sozialhelden/wheelmap-android/wiki/Sqlite,-Distance-calculations" rel="nofollow noopener" target="_blank">GitHub</a>
</header>
<article class="onebox-body">
<img class="thumbnail onebox-avatar" height="400" src="assets/207903" width="400"/>
<h3><a href="https://github.com/sozialhelden/wheelmap-android/wiki/Sqlite,-Distance-calculations" rel="nofollow noopener" target="_blank">sozialhelden/wheelmap-android</a></h3>
<p>An android app for wheelmap. Contribute to sozialhelden/wheelmap-android development by creating an account on GitHub.</p>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
<br/>
<aside class="onebox stackexchange">
<header class="source">
<a href="https://stackoverflow.com/questions/3126830/query-to-get-records-based-on-radius-in-sqlite" rel="nofollow noopener" target="_blank">stackoverflow.com</a>
</header>
<article class="onebox-body">
<a href="https://stackoverflow.com/users/243782/pentium10" rel="nofollow noopener" target="_blank">
<img alt="Pentium10" class="thumbnail onebox-avatar" height="128" src="assets/gInNr.png" width="128"/>
</a>
<h4>
<a href="https://stackoverflow.com/questions/3126830/query-to-get-records-based-on-radius-in-sqlite" rel="nofollow noopener" target="_blank">Query to get records based on Radius in SQLite?</a>
</h4>
<div class="tags">
<strong>sql, android, sqlite</strong>
</div>
<div class="date">
  asked by
  
  <a href="https://stackoverflow.com/users/243782/pentium10" rel="nofollow noopener" target="_blank">
    Pentium10
  </a>
  on <a href="https://stackoverflow.com/questions/3126830/query-to-get-records-based-on-radius-in-sqlite" rel="nofollow noopener" target="_blank">08:31AM - 27 Jun 10</a>
</div>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="overlay" id="modalOverlay" style="display: none;">
<div class="modal-content">
<p>Login or sign up disabled while the site is in read only mode</p>
<hr/>
<button class="btn btn-login">OK</button>
</div>
</div>
<script src="../../js/script.js"></script>
</body>
</html>