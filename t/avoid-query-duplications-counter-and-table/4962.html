<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet"/>
<link href="../../css/checklist_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_theme_2_be4cb2b86ec06123c5e974acd20fd933d14b129d.css" rel="stylesheet"/>
<link href="../../css/discourse-adplugin_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-akismet_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-cakeday_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-chat-integration_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-details_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-footnote_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-lazy-videos_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-local-dates_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/color_definitions_base__2_8fd59ae1f286f43b3ff17996df07ea951685249d.css" rel="stylesheet"/>
<link href="../../css/style.css" rel="stylesheet"/>
<title>Avoid query duplications counter and table</title></head>
<body>
<div class="navbar">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<div class="navbar-buttons">
<button class="btn btn-signup">Sign Up</button>
<button class="btn btn-login"><i class="fas fa-user"></i> Login</button>
<button class="btn btn-search"><i class="fas fa-search"></i></button>
<div class="navbar-toggle">
<div class="dots"></div>
<div class="dots"></div>
<div class="dots"></div>
</div>
</div>
</div>
<div class="sidebar">
<div class="sidebar-content">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<ul class="sidebar-grid">
<!-- <li><a href="#"><i class="fas fa-list-ul"></i> Topics</a></li> -->
<li><a href="../../page_0.html"><i class="fas fa-layer-group"></i> Topics</a></li>
<li><a href="../../users.html"><i class="fas fa-users"></i> Users</a></li>
<li><a href="../../about.html"><i class="fas fa-info-circle"></i> About</a></li>
<li><a href="../../faq.html"><i class="fas fa-question-circle"></i> FAQ</a></li>
<li><a href="../../groups.html"><i class="fas fa-users"></i> Groups</a></li>
<li><a href="../../badges.html"><i class="fas fa-certificate"></i> Badges</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#categories"><span>▼</span>Categories</a></h3>
<hr/>
<ul class="sidebar-grid categories">
<li>
<a class="badge-wrapper bullet" href="../../c/support/6.html">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name">Support</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/feature-requests/5.html">
<span class="badge-category-bg" style="background-color: #3AB54A"></span>
<span class="badge-category clear-badge">
<span class="category-name">Feature Requests</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/uncategorized/1.html">
<span class="badge-category-bg" style="background-color: #AB9364"></span>
<span class="badge-category clear-badge">
<span class="category-name">Uncategorized</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/development/7.html">
<span class="badge-category-bg" style="background-color: #8C6238"></span>
<span class="badge-category clear-badge">
<span class="category-name">Development</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/tips-tricks-query-examples/11.html">
<span class="badge-category-bg" style="background-color: #652D90"></span>
<span class="badge-category clear-badge" style="white-space: normal;">
<span class="category-name">Tips, Tricks &amp; Query Examples</span>
</span>
</a>
</li>
<li><a href="../../categories.html"><i class="fas fa-list-ul"></i> All categories</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#tags"><span>▼</span>Tags</a></h3>
<hr/>
<ul class="sidebar-grid tags">
<li><a href="../../tag/query_results.html"><i class="fas fa-tag"></i> query_results</a></li>
<li><a href="../../tag/feature-request.html"><i class="fas fa-tag"></i> feature-request</a></li>
<li><a href="../../tag/parameters.html"><i class="fas fa-tag"></i> parameters</a></li>
<li><a href="../../tag/visualizations.html"><i class="fas fa-tag"></i> visualizations</a></li>
<li><a href="../../tag/alerts.html"><i class="fas fa-tag"></i> alerts</a></li>
<li><a href="../../tags.html"><i class="fas fa-list-ul"></i> All tags</a></li>
</ul>
</div>
<div class="sidebar-footer">
            © 2023 <a href="https://discuss.redash.io/" target="_blank">discuss.redash.io</a>
</div>
</div>
<div class="overlay"></div>
<div class="content">
<div class="global-notice">
<div class="row">
<div class="alert alert-info alert-read-only" id="global-notice-alert-read-only">
<span class="text">This site is in read only mode. Please continue to browse, but replying, likes,
                        and other actions are disabled for now.</span>
</div>
</div>
</div>
<div class="imported_page" id="imported_page">
<div class="wrap" id="main-outlet" role="main">
<div id="topic-title">
<h1>
<a href="/t/avoid-query-duplications-counter-and-table/4962">Avoid query duplications counter and table</a>
</h1>
<div class="topic-category" itemscope="" itemtype="http://schema.org/BreadcrumbList">
<span itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
<a class="badge-wrapper bullet" href="../../c/support/6.html" itemprop="item">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name" itemprop="name">Support</span>
</span>
</a>
<meta content="1" itemprop="position"/>
</span>
<span itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
<a class="badge-wrapper bullet" href="../../c/support/support-usage/10.html" itemprop="item">
<span class="badge-category-bg" style="background-color: #AB9364"></span>
<span class="badge-category clear-badge">
<span class="category-name" itemprop="name">Usage Support</span>
</span>
</a>
<meta content="2" itemprop="position"/>
</span>
</div>
</div>
<div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
<meta content="Avoid query duplications counter and table" itemprop="headline"/>
<meta content="Usage Support" itemprop="articleSection"/>
<meta content="" itemprop="keywords"/>
<div itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
<meta content="Redash Discourse" itemprop="name"/>
<div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject">
<meta content="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/c07bc573841e1e4a0013ea3b6fe088a1534228a3.png" itemprop="url"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_1">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/chanansh.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/chanansh_avatar.png" tabindex="-1" width="48"/><span itemprop="name">chanansh</span></a>
</span>
<link href="https://discuss.redash.io/t/avoid-query-duplications-counter-and-table/4962" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-11-13T18:11:04Z" itemprop="datePublished">
                    November 13, 2019,  6:11pm
                  </time>
<meta content="2019-11-13T18:11:04Z" itemprop="dateModified"/>
<span itemprop="position">1</span>
</span>
</div>
<div class="post" itemprop="articleBody">
<p>I need to build a dashboard with a table and a counter.<br/>
The counter is based on the query result (with parameters so I cannot use the query based on another query).<br/>
Do I need to run the two almost identical queries twice (the counter, let’s say is a sum of a column)?<br/>
So the first query creates some table (with parameters).<br/>
The second query is "select sum(column_1) from (sub query identical to the query which created the main table).<br/>
Is there a way to avoid the duplicate queries?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_2" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/jesse.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/jesse_avatar.png" tabindex="-1" width="48"/><span itemprop="name">jesse</span></a>
</span>
<link href="https://discuss.redash.io/t/avoid-query-duplications-counter-and-table/4962" itemprop="mainEntityOfPage"/>
<link href="https://global.discourse-cdn.com/standard17/uploads/redash1/original/2X/6/6a2ed4680049eace6f50eb8a402a1bd8bb849846.png" itemprop="image"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-11-14T03:48:35Z" itemprop="datePublished">
                    November 14, 2019,  3:48am
                  </time>
<meta content="2019-11-14T03:48:35Z" itemprop="dateModified"/>
<span itemprop="position">2</span>
</span>
</div>
<div class="post" itemprop="text">
<p>The counter visualization settings includes a toggle for “Count Rows” specifically for this need.</p>
<p><div class="lightbox-wrapper"><a class="lightbox" data-download-href="/uploads/short-url/f9kWwYzrpwLQqXb6Q2aX2zrzJ9I.png?dl=1" href="https://global.discourse-cdn.com/standard17/uploads/redash1/original/2X/6/6a2ed4680049eace6f50eb8a402a1bd8bb849846.png" title="image"><img alt="image" data-base62-sha1="f9kWwYzrpwLQqXb6Q2aX2zrzJ9I" data-small-upload="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/2X/6/6a2ed4680049eace6f50eb8a402a1bd8bb849846_2_10x10.png" height="311" src="assets/6a2ed4680049eace6f50eb8a402a1bd8bb849846_2_690x311.png" srcset="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/2X/6/6a2ed4680049eace6f50eb8a402a1bd8bb849846_2_690x311.png, https://global.discourse-cdn.com/standard17/uploads/redash1/original/2X/6/6a2ed4680049eace6f50eb8a402a1bd8bb849846.png 1.5x, https://global.discourse-cdn.com/standard17/uploads/redash1/original/2X/6/6a2ed4680049eace6f50eb8a402a1bd8bb849846.png 2x" width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">708×320 14 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_3" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/chanansh.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/chanansh_avatar.png" tabindex="-1" width="48"/><span itemprop="name">chanansh</span></a>
</span>
<link href="https://discuss.redash.io/t/avoid-query-duplications-counter-and-table/4962" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-11-14T05:27:15Z" itemprop="datePublished">
                    November 14, 2019,  5:27am
                  </time>
<meta content="2019-11-14T05:27:15Z" itemprop="dateModified"/>
<span itemprop="position">3</span>
</span>
</div>
<div class="post" itemprop="text">
<p>I don’t want to count rows but to compute some stats on the table. E.g. sum x where y=5 .<br/>
It seems like I have to rerun the same query again to reach to these numbers independently from the table.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_4" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/jesse.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/jesse_avatar.png" tabindex="-1" width="48"/><span itemprop="name">jesse</span></a>
</span>
<link href="https://discuss.redash.io/t/avoid-query-duplications-counter-and-table/4962" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-11-14T12:46:26Z" itemprop="datePublished">
                    November 14, 2019, 12:46pm
                  </time>
<meta content="2019-11-14T12:46:26Z" itemprop="dateModified"/>
<span itemprop="position">4</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Then it sounds like you have two options:</p>
<ol>
<li>Run two similar queries.</li>
<li>Use SQL window functions to calculate your statistics in one big query</li>
</ol>
<p>Keep in mind that Redash doesn’t slice-and-dice data for you. Use your database for that. Redash gives you a convenient front-end for visualization and sharing the results. So if you need to perform two very different aggregations it makes sense you would need to run two different queries. This is by design <img alt=":smiley:" class="emoji" src="assets/smiley.png" title=":smiley:"/></p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_5" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/arikfr.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/arikfr_avatar.png" tabindex="-1" width="48"/><span itemprop="name">arikfr</span></a>
</span>
<link href="https://discuss.redash.io/t/avoid-query-duplications-counter-and-table/4962" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-11-14T14:02:21Z" itemprop="datePublished">
                    November 14, 2019,  2:02pm
                  </time>
<meta content="2019-11-14T14:02:21Z" itemprop="dateModified"/>
<span itemprop="position">5</span>
</span>
</div>
<div class="post" itemprop="text">
<p><a class="mention" href="/u/jesse">@jesse</a> is correct that Redash’s general approach is that you use your DB yo slice-and-dice the data and we just present it. But over time we do look into adding convenience features, that either save work for the user or their database.</p>
<p>Of course we need to tread carefully here, but based on feedback we received having additional aggregate options except for <code>count</code> in the Counter visualization is desirable.</p>
<p>There is an open PR for this: <a href="https://github.com/getredash/redash/pull/2381">#2381</a> from <a class="mention" href="/u/tonyjiangh">@tonyjiangh</a>, but unfortunately after the React migration it’s no longer relevant. If someone interested in implementing this on top of the current React codebase, will be happy to accept.</p>
<p>We might want to consider renaming the visualization from Counter to something else after this, but it’s not a huge thing <img alt=":slight_smile:" class="emoji" src="assets/slight_smile.png" title=":slight_smile:"/></p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="2" itemprop="userInteractionCount"/>
<span class="post-likes">2 Likes</span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_6" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/Jakdaw.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/Jakdaw_avatar.png" tabindex="-1" width="48"/><span itemprop="name">Jakdaw</span></a>
</span>
<link href="https://discuss.redash.io/t/avoid-query-duplications-counter-and-table/4962" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-11-14T16:39:10Z" itemprop="datePublished">
                    November 14, 2019,  4:39pm
                  </time>
<meta content="2019-11-14T16:39:10Z" itemprop="dateModified"/>
<span itemprop="position">6</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Isn’t the OP just asking for the Query Results datasource?</p>
<p>Write your first query, write your second query using the query results DS?</p>
<p>Or you could even use the Pivot Table vis.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="2" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_7" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/jesse.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/jesse_avatar.png" tabindex="-1" width="48"/><span itemprop="name">jesse</span></a>
</span>
<link href="https://discuss.redash.io/t/avoid-query-duplications-counter-and-table/4962" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-11-14T17:15:45Z" itemprop="datePublished">
                    November 14, 2019,  5:15pm
                  </time>
<meta content="2019-11-14T17:15:45Z" itemprop="dateModified"/>
<span itemprop="position">7</span>
</span>
</div>
<div class="post" itemprop="text">
<aside class="quote no-group" data-post="6" data-topic="4962">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="assets/1007_2.png" width="20"/> Jakdaw:</div>
<blockquote>
<p>Isn’t the OP just asking for the Query Results datasource?</p>
</blockquote>
</aside>
<p>From the OP’s post. Pivot table viz could also do the trick.</p>
<aside class="quote no-group" data-post="1" data-topic="4962">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="assets/1264_2.png" width="20"/> chanansh:</div>
<blockquote>
<p>The counter is based on the query result (with parameters so I cannot use the query based on another query)</p>
</blockquote>
</aside>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_8" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/arikfr.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/arikfr_avatar.png" tabindex="-1" width="48"/><span itemprop="name">arikfr</span></a>
</span>
<link href="https://discuss.redash.io/t/avoid-query-duplications-counter-and-table/4962" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-11-14T18:44:56Z" itemprop="datePublished">
                    November 14, 2019,  6:44pm
                  </time>
<meta content="2019-11-14T18:44:56Z" itemprop="dateModified"/>
<span itemprop="position">8</span>
</span>
</div>
<div class="post" itemprop="text">
<aside class="quote no-group" data-post="6" data-topic="4962">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="assets/1007_2.png" width="20"/> Jakdaw:</div>
<blockquote>
<p>Isn’t the OP just asking for the Query Results datasource?</p>
</blockquote>
</aside>
<p>Yes, if it was possible to run a query on query with parameters it could be another solution to their problem. But the counter based solution might be simpler and faster to implement.</p>
<aside class="quote no-group" data-post="6" data-topic="4962">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="assets/1007_2.png" width="20"/> Jakdaw:</div>
<blockquote>
<p>Or you could even use the Pivot Table vis.</p>
</blockquote>
</aside>
<p>But a Pivot Table is not the same as a Counter in terms of visual result.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_9" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/Jakdaw.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/Jakdaw_avatar.png" tabindex="-1" width="48"/><span itemprop="name">Jakdaw</span></a>
</span>
<link href="https://discuss.redash.io/t/avoid-query-duplications-counter-and-table/4962" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-11-14T22:00:29Z" itemprop="datePublished">
                    November 14, 2019, 10:00pm
                  </time>
<meta content="2019-11-14T22:00:29Z" itemprop="dateModified"/>
<span itemprop="position">9</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Ah; I see what you mean <a class="mention" href="/u/arikfr">@arikfr</a>.</p>
<p>Actually I quite like the idea of being able to include other queries - say put {{includeQuery:123}} in your query to have it include the contents of that query in the one you’re writing. The web UI would also have to pull any additional parameters from the included query into the new one.</p>
<p>I can see myself using that quite a lot, for parameter validation, and also for what the OP is proposing: have a query that creates a temporary table having extracted data using a variety of parameters; then several variants of how to pull results from that temporary table.</p>
<p>However… I’m not under the impression that there are that many people using Redash like I do; and I’m still not aware of any datasources other than MariaDB/MySQL that have this behaviour where you can execute a sequence of many many statements with one request.</p>
<p>I’ve never really looked at the query snippets stuff, but perhaps <a class="mention" href="/u/chanansh">@chanansh</a> might want to. I don’t think they’d be particularly great for my use-case (especially since if you edit the snippet then it only affects future uses of the snippet, not existing ones) but it may well satisfy his.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="overlay" id="modalOverlay" style="display: none;">
<div class="modal-content">
<p>Login or sign up disabled while the site is in read only mode</p>
<hr/>
<button class="btn btn-login">OK</button>
</div>
</div>
<script src="../../js/script.js"></script>
</body>
</html>