<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet"/>
<link href="../../css/checklist_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_theme_2_be4cb2b86ec06123c5e974acd20fd933d14b129d.css" rel="stylesheet"/>
<link href="../../css/discourse-adplugin_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-akismet_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-cakeday_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-chat-integration_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-details_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-footnote_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-lazy-videos_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-local-dates_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/color_definitions_base__2_8fd59ae1f286f43b3ff17996df07ea951685249d.css" rel="stylesheet"/>
<link href="../../css/style.css" rel="stylesheet"/>
<title>Is this an aggregation bug in chart visualisation?</title></head>
<body>
<div class="navbar">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<div class="navbar-buttons">
<button class="btn btn-signup">Sign Up</button>
<button class="btn btn-login"><i class="fas fa-user"></i> Login</button>
<button class="btn btn-search"><i class="fas fa-search"></i></button>
<div class="navbar-toggle">
<div class="dots"></div>
<div class="dots"></div>
<div class="dots"></div>
</div>
</div>
</div>
<div class="sidebar">
<div class="sidebar-content">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<ul class="sidebar-grid">
<!-- <li><a href="#"><i class="fas fa-list-ul"></i> Topics</a></li> -->
<li><a href="../../page_0.html"><i class="fas fa-layer-group"></i> Topics</a></li>
<li><a href="../../users.html"><i class="fas fa-users"></i> Users</a></li>
<li><a href="../../about.html"><i class="fas fa-info-circle"></i> About</a></li>
<li><a href="../../faq.html"><i class="fas fa-question-circle"></i> FAQ</a></li>
<li><a href="../../groups.html"><i class="fas fa-users"></i> Groups</a></li>
<li><a href="../../badges.html"><i class="fas fa-certificate"></i> Badges</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#categories"><span>▼</span>Categories</a></h3>
<hr/>
<ul class="sidebar-grid categories">
<li>
<a class="badge-wrapper bullet" href="../../c/support/6.html">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name">Support</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/feature-requests/5.html">
<span class="badge-category-bg" style="background-color: #3AB54A"></span>
<span class="badge-category clear-badge">
<span class="category-name">Feature Requests</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/uncategorized/1.html">
<span class="badge-category-bg" style="background-color: #AB9364"></span>
<span class="badge-category clear-badge">
<span class="category-name">Uncategorized</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/development/7.html">
<span class="badge-category-bg" style="background-color: #8C6238"></span>
<span class="badge-category clear-badge">
<span class="category-name">Development</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/tips-tricks-query-examples/11.html">
<span class="badge-category-bg" style="background-color: #652D90"></span>
<span class="badge-category clear-badge" style="white-space: normal;">
<span class="category-name">Tips, Tricks &amp; Query Examples</span>
</span>
</a>
</li>
<li><a href="../../categories.html"><i class="fas fa-list-ul"></i> All categories</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#tags"><span>▼</span>Tags</a></h3>
<hr/>
<ul class="sidebar-grid tags">
<li><a href="../../tag/query_results.html"><i class="fas fa-tag"></i> query_results</a></li>
<li><a href="../../tag/feature-request.html"><i class="fas fa-tag"></i> feature-request</a></li>
<li><a href="../../tag/parameters.html"><i class="fas fa-tag"></i> parameters</a></li>
<li><a href="../../tag/visualizations.html"><i class="fas fa-tag"></i> visualizations</a></li>
<li><a href="../../tag/alerts.html"><i class="fas fa-tag"></i> alerts</a></li>
<li><a href="../../tags.html"><i class="fas fa-list-ul"></i> All tags</a></li>
</ul>
</div>
<div class="sidebar-footer">
            © 2023 <a href="https://discuss.redash.io/" target="_blank">discuss.redash.io</a>
</div>
</div>
<div class="overlay"></div>
<div class="content">
<div class="global-notice">
<div class="row">
<div class="alert alert-info alert-read-only" id="global-notice-alert-read-only">
<span class="text">This site is in read only mode. Please continue to browse, but replying, likes,
                        and other actions are disabled for now.</span>
</div>
</div>
</div>
<div class="imported_page" id="imported_page">
<div class="wrap" id="main-outlet" role="main">
<div id="topic-title">
<h1>
<a href="/t/is-this-an-aggregation-bug-in-chart-visualisation/3070">Is this an aggregation bug in chart visualisation?</a>
</h1>
<div class="topic-category" itemscope="" itemtype="http://schema.org/BreadcrumbList">
<span itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
<a class="badge-wrapper bullet" href="../../c/development/7.html" itemprop="item">
<span class="badge-category-bg" style="background-color: #8C6238"></span>
<span class="badge-category clear-badge">
<span class="category-name" itemprop="name">Development</span>
</span>
</a>
<meta content="1" itemprop="position"/>
</span>
</div>
</div>
<div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
<meta content="Is this an aggregation bug in chart visualisation?" itemprop="headline"/>
<meta content="Development" itemprop="articleSection"/>
<meta content="" itemprop="keywords"/>
<div itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
<meta content="Redash Discourse" itemprop="name"/>
<div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject">
<meta content="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/c07bc573841e1e4a0013ea3b6fe088a1534228a3.png" itemprop="url"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_1">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/justinclift.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/justinclift_avatar.png" tabindex="-1" width="48"/><span itemprop="name">justinclift</span></a>
</span>
<link href="https://discuss.redash.io/t/is-this-an-aggregation-bug-in-chart-visualisation/3070" itemprop="mainEntityOfPage"/>
<link href="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/29ae9bacee0961f7ebd5edea6a540b11d04ad5d7.png" itemprop="image"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-01-23T11:59:54Z" itemprop="datePublished">
                    January 23, 2019, 11:59am
                  </time>
<meta content="2019-01-23T12:18:37Z" itemprop="dateModified"/>
<span itemprop="position">1</span>
</span>
</div>
<div class="post" itemprop="articleBody">
<p>Found what <strong>seems</strong> like a bug in chart visualisations.</p>
<p>Being new to Redash though, I’m not sure. <img alt=":wink:" class="emoji" height="20" loading="lazy" src="assets/wink.png" title=":wink:" width="20"/></p>
<p>[Apologies in advance, this will likely be a bit screenshot heavy.]</p>
<p>So, I’ve created a chart visualisation using the brand new “Redash JSON” export added to our <a href="https://dbhub.io/nicva/Marine%20Litter%20Survey%20(Keep%20Northern%20Ireland%20Beautiful).sqlite" rel="noopener nofollow ugc">DBHub.io</a> service earlier today: <img alt=":wink:" class="emoji" height="20" loading="lazy" src="assets/wink.png" title=":wink:" width="20"/></p>
<p><div class="lightbox-wrapper"><a class="lightbox" data-download-href="/uploads/short-url/5WJFGPGw8SrvIn22F2nIpIHCsh9.png?dl=1" href="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/29ae9bacee0961f7ebd5edea6a540b11d04ad5d7.png" rel="noopener nofollow ugc" title="23-1"><img alt="23-1" data-base62-sha1="5WJFGPGw8SrvIn22F2nIpIHCsh9" data-small-upload="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/1X/29ae9bacee0961f7ebd5edea6a540b11d04ad5d7_2_10x10.png" height="405" src="assets/29ae9bacee0961f7ebd5edea6a540b11d04ad5d7_2_690x405.png" srcset="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/1X/29ae9bacee0961f7ebd5edea6a540b11d04ad5d7_2_690x405.png, https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/1X/29ae9bacee0961f7ebd5edea6a540b11d04ad5d7_2_1035x607.png 1.5x, https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/1X/29ae9bacee0961f7ebd5edea6a540b11d04ad5d7_2_1380x810.png 2x" width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">23-1</span><span class="informations">1436×843 72.1 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div><br/>
(data source <a href="https://dbhub.io/nicva/Marine%20Litter%20Survey%20(Keep%20Northern%20Ireland%20Beautiful).sqlite" rel="noopener nofollow ugc">here</a>, json export url <a href="https://dbhub.io/x/downloadredashjson/nicva/Marine%20Litter%20Survey%20%28Keep%20Northern%20Ireland%20Beautiful%29.sqlite?commit=b9d631a9c835e6d765f290fee6379ef00ac14b86807437bf159f9813c75a1062&amp;table=100m2012Autumn" rel="noopener nofollow ugc">here</a>)</p>
<p>At first glance, it seems ok.  Looks like the grouping/stacking has autoarranged things decently.</p>
<p>However, when hovering the mouse over the columns, the numbers displayed for any of the categories seem to be off.  This one seems ok at first glance too, as “231” (top value in the hover) is in the ball park of what’s shown in the graph (blue “Plastic” entry).</p>
<p><div class="lightbox-wrapper"><a class="lightbox" data-download-href="/uploads/short-url/42JA1TvmCImg5YvS48bcI5TeUld.png?dl=1" href="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/1c57d8e87378d2589d79c183f09e08e120dc7663.png" rel="noopener nofollow ugc" title="23-2"><img alt="23-2" data-base62-sha1="42JA1TvmCImg5YvS48bcI5TeUld" data-small-upload="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/1X/1c57d8e87378d2589d79c183f09e08e120dc7663_2_10x10.png" height="405" src="assets/1c57d8e87378d2589d79c183f09e08e120dc7663_2_690x405.png" srcset="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/1X/1c57d8e87378d2589d79c183f09e08e120dc7663_2_690x405.png, https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/1X/1c57d8e87378d2589d79c183f09e08e120dc7663_2_1035x607.png 1.5x, https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/1X/1c57d8e87378d2589d79c183f09e08e120dc7663_2_1380x810.png 2x" width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">23-2</span><span class="informations">1436×843 85.5 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>But this is clearly not correct:</p>
<p><div class="lightbox-wrapper"><a class="lightbox" data-download-href="/uploads/short-url/lptXf8xFTYoagHR8v5jne7dz1pi.png?dl=1" href="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/960f179d4cff1f5fd4c351048182cc11e83dddfc.png" rel="noopener nofollow ugc" title="23-3"><img alt="23-3" data-base62-sha1="lptXf8xFTYoagHR8v5jne7dz1pi" data-small-upload="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/1X/960f179d4cff1f5fd4c351048182cc11e83dddfc_2_10x10.png" height="405" src="assets/960f179d4cff1f5fd4c351048182cc11e83dddfc_2_690x405.png" srcset="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/1X/960f179d4cff1f5fd4c351048182cc11e83dddfc_2_690x405.png, https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/1X/960f179d4cff1f5fd4c351048182cc11e83dddfc_2_1035x607.png 1.5x, https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/1X/960f179d4cff1f5fd4c351048182cc11e83dddfc_2_1380x810.png 2x" width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">23-3</span><span class="informations">1436×843 86.3 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>The hover has “70” for the Plastic entry, whereas it should be 300+ going by the graph value.</p>
<p>Zooming in on the values for the group containing 231 shows this:</p>
<p><div class="lightbox-wrapper"><a class="lightbox" data-download-href="/uploads/short-url/uUwygfmuIV7rF7NssjmEL0QEzb8.png?dl=1" href="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/d8a4f505bb65a4d5ef194bef305535fa8f1dc1fe.png" rel="noopener nofollow ugc" title="23-5"><img alt="23-5" data-base62-sha1="uUwygfmuIV7rF7NssjmEL0QEzb8" data-small-upload="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/1X/d8a4f505bb65a4d5ef194bef305535fa8f1dc1fe_2_10x10.png" height="405" src="assets/d8a4f505bb65a4d5ef194bef305535fa8f1dc1fe_2_690x405.png" srcset="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/1X/d8a4f505bb65a4d5ef194bef305535fa8f1dc1fe_2_690x405.png, https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/1X/d8a4f505bb65a4d5ef194bef305535fa8f1dc1fe_2_1035x607.png 1.5x, https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/1X/d8a4f505bb65a4d5ef194bef305535fa8f1dc1fe_2_1380x810.png 2x" width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">23-5</span><span class="informations">1436×843 103 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>Yeah… that’s not correct.  The brown entry “Sanitary” shows ~100 in the graph, but the hover shows “1”.</p>
<p>Investigating by downloading the data as CSV from the Redash download link…</p>
<p><div class="lightbox-wrapper"><a class="lightbox" data-download-href="/uploads/short-url/9lPAqngLoU96AwqCGDuxk2liS3P.png?dl=1" href="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/418b591d1557001609d5bddce2f5f87163c3eec5.png" rel="noopener nofollow ugc" title="23-4"><img alt="23-4" data-base62-sha1="9lPAqngLoU96AwqCGDuxk2liS3P" data-small-upload="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/1X/418b591d1557001609d5bddce2f5f87163c3eec5_2_10x10.png" height="405" src="assets/418b591d1557001609d5bddce2f5f87163c3eec5_2_690x405.png" srcset="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/1X/418b591d1557001609d5bddce2f5f87163c3eec5_2_690x405.png, https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/1X/418b591d1557001609d5bddce2f5f87163c3eec5_2_1035x607.png 1.5x, https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/1X/418b591d1557001609d5bddce2f5f87163c3eec5_2_1380x810.png 2x" width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">23-4</span><span class="informations">1436×843 92.5 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>The values from the date range:</p>
<pre><code class="lang-auto">...
2012-10-08,Plastic,0
2012-10-08,Plastic,0
2012-10-08,Plastic,231
2012-10-08,Sanitary,0
2012-10-08,Sanitary,92
2012-10-08,Sanitary,0
2012-10-08,Sanitary,4
2012-10-08,Sanitary,1
</code></pre>
<p>So… it <strong>seems</strong> like the graph values are aggregated, however the hover values seem to be picking a singular value from the data set.  Something like <code>sanitary[0]</code> instead of <code>sum(sanitary)</code>.</p>
<p>Alternatively, maybe I just need to change some options in the chart definition or SQL query and it’s not a bug? <img alt=":slight_smile:" class="emoji" height="20" loading="lazy" src="assets/slight_smile.png" title=":slight_smile:" width="20"/></p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_2" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/arikfr.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/arikfr_avatar.png" tabindex="-1" width="48"/><span itemprop="name">arikfr</span></a>
</span>
<link href="https://discuss.redash.io/t/is-this-an-aggregation-bug-in-chart-visualisation/3070" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-01-23T12:23:32Z" itemprop="datePublished">
                    January 23, 2019, 12:23pm
                  </time>
<meta content="2019-01-23T12:23:32Z" itemprop="dateModified"/>
<span itemprop="position">2</span>
</span>
</div>
<div class="post" itemprop="text">
<p>It’s not really a bug (nor a feature <img alt=":wink:" class="emoji" src="assets/wink.png" title=":wink:"/> ). See previous discussion here:</p>
<aside class="quote" data-post="1" data-topic="1788">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" loading="lazy" src="https://avatars.discourse-cdn.com/v4/letter/t/b5ac83/40.png" width="20"/>
<a href="http://discuss.redash.io/t/sum-average-x-axis-data/1788">Sum/Average X axis data</a> <a class="badge-wrapper bullet" href="/c/feature-requests/5"><span class="badge-category-bg" style="background-color: #3AB54A;"></span><span class="badge-category clear-badge" data-drop-close="true" style="" title="Discussion about new feature ideas and requests for Redash.">Feature Requests</span></a>
</div>
<blockquote>
    This would ease the need for separated queries from the same data source.
  </blockquote>
</aside>
<p>Only thing I would like to add to the previous discussion is that at this point I’m inclining towards conceding to applying an aggregation in such cases… It seems that many people expect that, hopefully more people will benefit from this than shoot themselves in the foot <img alt=":slight_smile:" class="emoji" src="assets/slight_smile.png" title=":slight_smile:"/></p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="2" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_3" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/arikfr.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/arikfr_avatar.png" tabindex="-1" width="48"/><span itemprop="name">arikfr</span></a>
</span>
<link href="https://discuss.redash.io/t/is-this-an-aggregation-bug-in-chart-visualisation/3070" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-01-23T12:24:08Z" itemprop="datePublished">
                    January 23, 2019, 12:24pm
                  </time>
<meta content="2019-01-23T12:24:08Z" itemprop="dateModified"/>
<span itemprop="position">3</span>
</span>
</div>
<div class="post" itemprop="text">
<aside class="quote no-group" data-post="1" data-topic="3070">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="assets/811_2.png" width="20"/> justinclift:</div>
<blockquote>
<p>So, I’ve created a chart visualisation using the brand new “Redash JSON” export added to our <a href="https://dbhub.io/nicva/Marine%20Litter%20Survey%20(Keep%20Northern%20Ireland%20Beautiful).sqlite" rel="nofollow noopener">DBHub.io</a> service earlier today: <img alt=":wink:" class="emoji" src="assets/wink.png" title=":wink:"/></p>
</blockquote>
</aside>
<p>Super cool! I wonder if it makes sense to add a dedciated data source to Redash for <a href="http://DBHub.io" rel="nofollow noopener">DBHub.io</a> and somehow query it directly?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_4" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/justinclift.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/justinclift_avatar.png" tabindex="-1" width="48"/><span itemprop="name">justinclift</span></a>
</span>
<link href="https://discuss.redash.io/t/is-this-an-aggregation-bug-in-chart-visualisation/3070" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-01-23T12:38:16Z" itemprop="datePublished">
                    January 23, 2019, 12:38pm
                  </time>
<meta content="2019-01-23T14:04:37Z" itemprop="dateModified"/>
<span itemprop="position">4</span>
</span>
</div>
<div class="post" itemprop="text">
<aside class="quote group-Team quote-modified" data-post="2" data-topic="3070">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="assets/2_2.png" width="20"/> arikfr:</div>
<blockquote>
<p>See previous discussion here: …</p>
</blockquote>
</aside>
<p>Thanks <a class="mention" href="/u/arikfr">@arikfr</a>.  Will read and grok, though maybe tomorrow instead of today (getting tired atm).</p>
<aside class="quote group-Team" data-post="3" data-topic="3070">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="assets/2_2.png" width="20"/> arikfr:</div>
<blockquote>
<p>I wonder if it makes sense to add a dedciated data source to Redash for <a href="http://DBHub.io" rel="nofollow noopener">DBHub.io</a> and somehow query it directly?</p>
</blockquote>
</aside>
<p>It’d probably be more efficient than serialising JSON, throwing that over the wire, then deserialising it. <img alt=":slight_smile:" class="emoji" src="assets/slight_smile.png" title=":slight_smile:"/></p>
<p>The databases are already in SQLite format and directly available over the wire (for public ones), so it’d probably be something very similar to the existing url query approach.  Just saving the SQLite database directly instead of needing to convert it from JSON first.</p>
<p>For private databases, we’d likely need to figure out some api/key/something approach.  Haven’t even thought about that yet, so that could come later. <img alt=":wink:" class="emoji" src="assets/wink.png" title=":wink:"/></p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_5" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/justinclift.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/justinclift_avatar.png" tabindex="-1" width="48"/><span itemprop="name">justinclift</span></a>
</span>
<link href="https://discuss.redash.io/t/is-this-an-aggregation-bug-in-chart-visualisation/3070" itemprop="mainEntityOfPage"/>
<link href="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/3d16f9a7a073792739def08e699100e204129f82.png" itemprop="image"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-01-24T09:24:04Z" itemprop="datePublished">
                    January 24, 2019,  9:24am
                  </time>
<meta content="2019-01-24T09:27:10Z" itemprop="dateModified"/>
<span itemprop="position">5</span>
</span>
</div>
<div class="post" itemprop="text">
<aside class="quote group-Team" data-post="2" data-topic="3070" data-username="arikfr">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" loading="lazy" src="assets/2_2.png" width="20"/> arikfr:</div>
<blockquote>
<p>I’m inclining towards conceding to applying an aggregation in such cases…</p>
</blockquote>
</aside>
<p>Yeah, that would be in line with how Redash “automatically figures out” other things too. <img alt=":slight_smile:" class="emoji" height="20" loading="lazy" src="assets/slight_smile.png" title=":slight_smile:" width="20"/></p>
<p>In the case of my query, manually changing it to this looks like it worked (note - only a rough visual confirmation so far, haven’t manually verified with sampling values yet):</p>
<pre><code class="lang-auto">SELECT substr(Date, 7, 4) || '-' || substr(Date, 4, 2) || '-' || substr(Date, 1, 2) as Date, Category, sum(distinct Number) as SumVal
FROM query_16
GROUP BY 1, 2;
</code></pre>
<p><div class="lightbox-wrapper"><a class="lightbox" data-download-href="/uploads/short-url/8IqlGSXZZ3EseTKaye6XCrgoh5E.png?dl=1" href="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/3d16f9a7a073792739def08e699100e204129f82.png" rel="noopener nofollow ugc" title="23-6"><img alt="23-6" data-base62-sha1="8IqlGSXZZ3EseTKaye6XCrgoh5E" data-small-upload="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/1X/3d16f9a7a073792739def08e699100e204129f82_2_10x10.png" height="467" src="assets/3d16f9a7a073792739def08e699100e204129f82_2_690x467.png" srcset="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/1X/3d16f9a7a073792739def08e699100e204129f82_2_690x467.png, https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/1X/3d16f9a7a073792739def08e699100e204129f82_2_1035x700.png 1.5x, https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/3d16f9a7a073792739def08e699100e204129f82.png 2x" width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">23-6</span><span class="informations">1300×881 83.4 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>For automatically applying an aggregation when multiple values for the same day+category occur, it’ll probably need to be a drop down selector somewhere appropriate.  Maybe the Y-axis tab, bearing in mind my newness to Redash still. <img alt=":wink:" class="emoji" height="20" loading="lazy" src="assets/wink.png" title=":wink:" width="20"/></p>
<p>The drop down would then have values such as:</p>
<ul>
<li>Auto</li>
<li>Off</li>
<li><code>count()</code></li>
<li><code>sum()</code></li>
<li><code>min()</code></li>
<li><code>max()</code></li>
<li><code>avg()</code></li>
<li>…</li>
<li>user defined function?</li>
</ul>
<p>If Redash includes Liam Healy’s Math function extensions for SQLite (source <a href="https://www.sqlite.org/contrib/download/extension-functions.c?get=25" rel="noopener nofollow ugc">here</a>, mirror <a href="https://github.com/sqlitebrowser/sqlitebrowser/blob/master/src/extensions/extension-functions.c" rel="noopener nofollow ugc">here</a>), the aggregate ones it includes may be useful for people too.</p>
<p>Also, not sure what approach to use for “Auto” either.  Maybe <code>count()</code>, because if it’s the wrong choice then the values will be sooooo far from expected that the user should realise something still needs adjusting.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
<span class="post-likes">1 Like</span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="overlay" id="modalOverlay" style="display: none;">
<div class="modal-content">
<p>Login or sign up disabled while the site is in read only mode</p>
<hr/>
<button class="btn btn-login">OK</button>
</div>
</div>
<script src="../../js/script.js"></script>
</body>
</html>