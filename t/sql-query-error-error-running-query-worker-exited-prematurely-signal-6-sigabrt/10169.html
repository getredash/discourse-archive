<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet"/>
<link href="../../css/checklist_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_theme_2_be4cb2b86ec06123c5e974acd20fd933d14b129d.css" rel="stylesheet"/>
<link href="../../css/discourse-adplugin_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-akismet_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-cakeday_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-chat-integration_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-details_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-footnote_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-lazy-videos_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-local-dates_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/color_definitions_base__2_8fd59ae1f286f43b3ff17996df07ea951685249d.css" rel="stylesheet"/>
<link href="../../css/style.css" rel="stylesheet"/>
<title>SQL query error: "Error running query: Worker exited prematurely: signal 6 (SIGABRT)."</title></head>
<body>
<div class="navbar">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<div class="navbar-buttons">
<button class="btn btn-signup">Sign Up</button>
<button class="btn btn-login"><i class="fas fa-user"></i> Login</button>
<button class="btn btn-search"><i class="fas fa-search"></i></button>
<div class="navbar-toggle">
<div class="dots"></div>
<div class="dots"></div>
<div class="dots"></div>
</div>
</div>
</div>
<div class="sidebar">
<div class="sidebar-content">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<ul class="sidebar-grid">
<!-- <li><a href="#"><i class="fas fa-list-ul"></i> Topics</a></li> -->
<li><a href="../../page_0.html"><i class="fas fa-layer-group"></i> Topics</a></li>
<li><a href="../../users.html"><i class="fas fa-users"></i> Users</a></li>
<li><a href="../../about.html"><i class="fas fa-info-circle"></i> About</a></li>
<li><a href="../../faq.html"><i class="fas fa-question-circle"></i> FAQ</a></li>
<li><a href="../../groups.html"><i class="fas fa-users"></i> Groups</a></li>
<li><a href="../../badges.html"><i class="fas fa-certificate"></i> Badges</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#categories"><span>▼</span>Categories</a></h3>
<hr/>
<ul class="sidebar-grid categories">
<li>
<a class="badge-wrapper bullet" href="../../c/support/6.html">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name">Support</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/feature-requests/5.html">
<span class="badge-category-bg" style="background-color: #3AB54A"></span>
<span class="badge-category clear-badge">
<span class="category-name">Feature Requests</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/uncategorized/1.html">
<span class="badge-category-bg" style="background-color: #AB9364"></span>
<span class="badge-category clear-badge">
<span class="category-name">Uncategorized</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/development/7.html">
<span class="badge-category-bg" style="background-color: #8C6238"></span>
<span class="badge-category clear-badge">
<span class="category-name">Development</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/tips-tricks-query-examples/11.html">
<span class="badge-category-bg" style="background-color: #652D90"></span>
<span class="badge-category clear-badge" style="white-space: normal;">
<span class="category-name">Tips, Tricks &amp; Query Examples</span>
</span>
</a>
</li>
<li><a href="../../categories.html"><i class="fas fa-list-ul"></i> All categories</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#tags"><span>▼</span>Tags</a></h3>
<hr/>
<ul class="sidebar-grid tags">
<li><a href="../../tag/query_results.html"><i class="fas fa-tag"></i> query_results</a></li>
<li><a href="../../tag/feature-request.html"><i class="fas fa-tag"></i> feature-request</a></li>
<li><a href="../../tag/parameters.html"><i class="fas fa-tag"></i> parameters</a></li>
<li><a href="../../tag/visualizations.html"><i class="fas fa-tag"></i> visualizations</a></li>
<li><a href="../../tag/alerts.html"><i class="fas fa-tag"></i> alerts</a></li>
<li><a href="../../tags.html"><i class="fas fa-list-ul"></i> All tags</a></li>
</ul>
</div>
<div class="sidebar-footer">
            © 2023 <a href="https://discuss.redash.io/" target="_blank">discuss.redash.io</a>
</div>
</div>
<div class="overlay"></div>
<div class="content">
<div class="global-notice">
<div class="row">
<div class="alert alert-info alert-read-only" id="global-notice-alert-read-only">
<span class="text">This site is in read only mode. Please continue to browse, but replying, likes,
                        and other actions are disabled for now.</span>
</div>
</div>
</div>
<div class="imported_page" id="imported_page">
<div class="wrap" id="main-outlet" role="main">
<div id="topic-title">
<h1>
<a href="/t/sql-query-error-error-running-query-worker-exited-prematurely-signal-6-sigabrt/10169">SQL query error: "Error running query: Worker exited prematurely: signal 6 (SIGABRT)."</a>
</h1>
<div class="topic-category" itemscope="" itemtype="http://schema.org/BreadcrumbList">
<span itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
<a class="badge-wrapper bullet" href="../../c/support/6.html" itemprop="item">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name" itemprop="name">Support</span>
</span>
</a>
<meta content="1" itemprop="position"/>
</span>
<span itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
<a class="badge-wrapper bullet" href="../../c/support/support-self-hosted/9.html" itemprop="item">
<span class="badge-category-bg" style="background-color: #AB9364"></span>
<span class="badge-category clear-badge">
<span class="category-name" itemprop="name">Self Hosted Redash Support</span>
</span>
</a>
<meta content="2" itemprop="position"/>
</span>
</div>
</div>
<div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
<meta content='SQL query error: "Error running query: Worker exited prematurely: signal 6 (SIGABRT)."' itemprop="headline"/>
<meta content="Self Hosted Redash Support" itemprop="articleSection"/>
<meta content="" itemprop="keywords"/>
<div itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
<meta content="Redash Discourse" itemprop="name"/>
<div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject">
<meta content="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/c07bc573841e1e4a0013ea3b6fe088a1534228a3.png" itemprop="url"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_1">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/Michael.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/Michael_avatar.png" tabindex="-1" width="48"/><span itemprop="name">Michael</span></a>
</span>
<link href="assets/10169" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2022-03-21T13:51:08Z" itemprop="datePublished">
                    March 21, 2022,  1:51pm
                  </time>
<meta content="2022-03-21T13:51:08Z" itemprop="dateModified"/>
<span itemprop="position">1</span>
</span>
</div>
<div class="post" itemprop="articleBody">
<h3>
<a class="anchor" href="#issue-summary-1" name="issue-summary-1"></a>Issue Summary</h3>
<p>I am attempting to migrate our Power BI dashboards to Redash. Testing in a self-hosted docker container. I am fetching data from an Azure SQL server with a SQL query that I know should return about 100K lines of data. Works fine in SSMS. When running the same query in Redash I get:</p>
<p>Error running query: <strong>Worker exited prematurely: signal 6 (SIGABRT).</strong></p>
<p>What might be the reason for this, and how to address the issue? I see several similar posts on the topic, but they are inconclusive and did not help me pinpoint the problem.</p>
<h3>
<a class="anchor" href="#technical-details-2" name="technical-details-2"></a>Technical details:</h3>
<ul>
<li>Redash Version: 8.0.0+b32245 (a16f551e)</li>
<li>Browser/OS: Chrome / Win 11</li>
<li>How did you install Redash: Docker image built from src</li>
</ul>
<p>Cheers, Mike</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_2" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/jesse.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/jesse_avatar.png" tabindex="-1" width="48"/><span itemprop="name">jesse</span></a>
</span>
<link href="assets/10169" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2022-03-21T16:53:04Z" itemprop="datePublished">
                    March 21, 2022,  4:53pm
                  </time>
<meta content="2022-03-21T16:53:04Z" itemprop="dateModified"/>
<span itemprop="position">2</span>
</span>
</div>
<div class="post" itemprop="text">
<p>It sounds like your query runner ran out of memory and crashed. Try adding a <code>LIMIT 1000</code> suffix or <code>TOP 1000</code> prefix to your query to see if that succeeds (not sure which dialect Azure SQL uses).</p>
<p>Although there’s a lot of common ground between them, Redash isn’t a drop-in replacement for PowerBI or SSMS. 100k lines of data is a lot more than Redash is designed to retrieve. Redash is a tool for visualising results that have already been aggregated by your database.</p>
<p>You can boost the amount of RAM available to your docker containers, which would potentially allow a query with 100k rows to succeed. But the moment you load this in the web application the browser tab will probably crash.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_3" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/Michael.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/Michael_avatar.png" tabindex="-1" width="48"/><span itemprop="name">Michael</span></a>
</span>
<link href="assets/10169" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2022-03-22T08:14:44Z" itemprop="datePublished">
                    March 22, 2022,  8:14am
                  </time>
<meta content="2022-03-22T08:14:44Z" itemprop="dateModified"/>
<span itemprop="position">3</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Hi jesse,</p>
<p>Thanks for your reply. I will take into consideration that Redash may not be the best replacement for Power BI.</p>
<p>After writing this post I did manage to retrieve around 100K lines of data with a slightly different query, and it ran reasonably well imbedded in an iframe. So, apparently It’s not a PC hardware limitation or a Redash related software limitation that caused the issue.</p>
<p>I will attempt to assign more CPU and RAM to the Docker environment and see if this helps.</p>
<p>I will post the solution here I if I find it, but please be free to comment if you have experienced something similar.</p>
<p>Cheers, Mike</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
<span class="post-likes">1 Like</span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_4" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/dsharp.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/dsharp_avatar.png" tabindex="-1" width="48"/><span itemprop="name">dsharp</span></a>
</span>
<link href="assets/10169" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2022-07-22T03:37:53Z" itemprop="datePublished">
                    July 22, 2022,  3:37am
                  </time>
<meta content="2022-07-22T03:37:53Z" itemprop="dateModified"/>
<span itemprop="position">4</span>
</span>
</div>
<div class="post" itemprop="text">
<p>I get this error on some queries, but my query is fast and the results are small. When I run on MSSQL, I get 22 records in 0.333 seconds.</p>
<p>Any other guess as to what could be causing this issue?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_5" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/jesse.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/jesse_avatar.png" tabindex="-1" width="48"/><span itemprop="name">jesse</span></a>
</span>
<link href="assets/10169" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2022-07-22T12:17:28Z" itemprop="datePublished">
                    July 22, 2022, 12:17pm
                  </time>
<meta content="2022-07-22T12:17:28Z" itemprop="dateModified"/>
<span itemprop="position">5</span>
</span>
</div>
<div class="post" itemprop="text">
<p>There’s not enough info in your post to debug. Not all SIGABRT failures share the same cause. It would be helpful to know your redash version and operating system. Also does this affect all queries or only some? Does it happen in a reproducible way? Or at random? Does it affect all data sources or only one?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_6" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/dsharp.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/dsharp_avatar.png" tabindex="-1" width="48"/><span itemprop="name">dsharp</span></a>
</span>
<link href="assets/10169" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2022-07-22T17:35:24Z" itemprop="datePublished">
                    July 22, 2022,  5:35pm
                  </time>
<meta content="2022-07-22T17:35:24Z" itemprop="dateModified"/>
<span itemprop="position">6</span>
</span>
</div>
<div class="post" itemprop="text">
<ul>
<li>
<strong>Environment Details:</strong>
<ul>
<li>Redash version: Version: 8.0.0+b32245 (a16f551e)</li>
<li>Browser/OS: Chrome / MacOS Monterey</li>
<li>Hosting VM Specs:
<ul>
<li>Linux (ubuntu 18.04)</li>
<li>2 vcpus (last 30 days averaged 3% CPU usage with spikes up to 40%)</li>
<li>16 GiB memory (last 30 days averaged 11GB of free RAM with drops down to 9GB)</li>
</ul>
</li>
</ul>
</li>
<li>
<strong>All queries or some:</strong> It doesn’t affect all queries, but it nearly always affects the affected queries. Meaning, if a query has the issue, it basically always has the issue. (I have observed some rare situations where the same query works)</li>
<li>
<strong>Reproducible:</strong> Because it happens basically every time, it is easy to recreate. I have seen it more often in MSSQL queries that have comments, but that isn’t always true for either success or failure</li>
<li>
<strong>All sources or one</strong>: happens mostly on MSSQL sources, but is probably because we have more MSSQL queries and it can happen with any/most</li>
</ul>
<p>Also, when it fails, it often fails very quickly, which makes me think it isn’t a resources issue, but may be something in how it is parsing the code.</p>
<p>I am providing the current query below in case there is something in the code that is incompatible with Redash.</p>
<p>NOTE: We use Temp Tables to keep the data free and reduce processing time</p>
<pre><code class="lang-auto">DECLARE @ReportId varchar(100) = 'ShopCQ_UserDemandLinesSentBySupplierandDate'

	DECLARE @last datetime

	SELECT @last = MAX(ReportDate) FROM dbo.CommonQueries  WHERE ReportId = @ReportId 
    IF OBJECT_ID('tempdb..#SendHistoryTemp') IS NOT NULL DROP TABLE #SendHistoryTemp
    SELECT ReportDate,ServerName,Instance
					,CAST(col1 as date) Period
					,DATEPART(day, CAST(col2 as date)) dayOfMonth
					,col3 Supplier
					,col4 UserNAme
					,CAST(col5 as int) DemandSentCount 
					,ROW_NUMBER() OVER (PARTITION BY Instance,CAST(col1 as date) ORDER BY DATEPART(day,CAST(col2 as date))) SendOrder
			INTO #SendHistoryTemp
	        FROM dbo.CommonQueries 
	        WHERE reportid = @ReportId 
	        	AND ReportDate = @last
	            AND ServerName &lt;&gt;'_Header'
	            AND CAST(col2 as date) &gt;= '2022-01-01'
	     
    IF OBJECT_ID('tempdb..#dailyTemp') IS NOT NULL DROP TABLE #dailyTemp
	SELECT Period,
			d.dayOfMonth
			,SUM(DemandSentCount) TotalSent
			,COUNT(DISTINCT Instance) NewInstances
			,SUM(COUNT(Instance)) OVER (PARTITION BY Period ORDER BY d.dayOfMonth) MnthProgress
			,SUM(SUM(DemandSentCount)) OVER (PARTITION BY Period ORDER BY d.dayOfMonth) MnthLinesProgress
		INTO #dailyTemp
		FROM (SELECT dayOfMonth FROM #SendHistoryTemp WHERE SendOrder = 1 GROUP BY dayOfMonth) d
			LEFT JOIN #SendHistoryTemp st ON d.dayOfMonth = st.dayOfMonth
		WHERE SendOrder = 1
		GROUP BY d.dayOfMonth,Period
				
	SELECT a.dayOfMonth
		,COALESCE(c.TotalSent,0) TotalSent
		,AvgSent
		,SUM(COALESCE(c.TotalSent,0)) OVER (ORDER BY a.dayOfMonth) MonthSent
		,a.NewInstances AvgNewInstances
		,COALESCE(c.NewInstances,0) NewInstances
		,AveMonthEngaged
		,SUM(COALESCE(c.NewInstances,0)) OVER (ORDER BY a.dayOfMonth) MonthEngaged
	FROM (SELECT dayOfMonth
				,AVG(MnthLinesProgress) AvgSent
				,AVG(NewInstances) NewInstances
				,AVG(MnthProgress) AveMonthEngaged
			FROM #dailyTemp
			GROUP BY dayOfMonth	
		)a
		LEFT JOIN (SELECT dayOfMonth,COUNT(DISTINCT Instance) NewInstances, SUM(DemandSentCount) TotalSent FROM #SendHistoryTemp WHERE SendOrder = 1 AND Period = DATEADD(d,1,EOMONTH(GETDATE(),-1)) GROUP BY dayOfMonth) c ON a.dayOfMonth = c.dayOfMonth
		    	
    IF OBJECT_ID('tempdb..#dailyTemp') IS NOT NULL DROP TABLE #dailyTemp
    IF OBJECT_ID('tempdb..#SendHistoryTemp') IS NOT NULL DROP TABLE #SendHistoryTemp
</code></pre>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_7" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/jesse.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/jesse_avatar.png" tabindex="-1" width="48"/><span itemprop="name">jesse</span></a>
</span>
<link href="assets/10169" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2022-07-22T18:49:14Z" itemprop="datePublished">
                    July 22, 2022,  6:49pm
                  </time>
<meta content="2022-07-22T18:49:14Z" itemprop="dateModified"/>
<span itemprop="position">7</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Thanks for a fullsome bug report <img alt=":ok_hand:" class="emoji" height="20" loading="lazy" src="assets/ok_hand.png" title=":ok_hand:" width="20"/></p>
<p>You’re right that it’s a puzzler. I do wonder if the problem is your usage of <code>DECLARE</code> statements producing unanticipated responses to the cursor. Redash is not built for anything other than SELECT statements, and doesn’t even support multi-statement execution (i.e. multiple queries separated by a semicolon <code>;</code>).</p>
<p>However if this were a full blocker I’d expect the queries to always fail.</p>
<p>What do you find in your docker logs? Is there a full Python stack trace?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_8" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/dsharp.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/dsharp_avatar.png" tabindex="-1" width="48"/><span itemprop="name">dsharp</span></a>
</span>
<link href="assets/10169" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2022-07-22T19:42:54Z" itemprop="datePublished">
                    July 22, 2022,  7:42pm
                  </time>
<meta content="2022-07-22T19:42:54Z" itemprop="dateModified"/>
<span itemprop="position">8</span>
</span>
</div>
<div class="post" itemprop="text">
<p>That appears to have been at least part of the cause.</p>
<p>I refactored the code to remove the DECLARE and it failed, then refactored to remove the temp tables, and it failed (maybe because it was still using CTEs, which do work in other queries)</p>
<p>But, when I ported all of that to a SQL view, then queried the view in Redash, it worked!</p>
<p>I don’t know how to check the docker logs. I will have to have my team check it later, but at least it is operational again.</p>
<p>Thanks for your help!</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_9" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/jesse.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/jesse_avatar.png" tabindex="-1" width="48"/><span itemprop="name">jesse</span></a>
</span>
<link href="assets/10169" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2022-07-22T20:42:48Z" itemprop="datePublished">
                    July 22, 2022,  8:42pm
                  </time>
<meta content="2022-07-22T20:42:48Z" itemprop="dateModified"/>
<span itemprop="position">9</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Thank you very much for the detailed report and following up on how it was solved.</p>
<p>I’d like to invest some effort to improve the multi-statement behaviour of our MSSQL connector as I think this is a blocker for adopting Redash for a lot of users. Perhaps I can ping you for your thoughts down the road?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_10" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/dsharp.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/dsharp_avatar.png" tabindex="-1" width="48"/><span itemprop="name">dsharp</span></a>
</span>
<link href="assets/10169" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2022-07-23T00:33:05Z" itemprop="datePublished">
                    July 23, 2022, 12:33am
                  </time>
<meta content="2022-07-23T00:33:05Z" itemprop="dateModified"/>
<span itemprop="position">10</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Of course! I am happy to help.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="overlay" id="modalOverlay" style="display: none;">
<div class="modal-content">
<p>Login or sign up disabled while the site is in read only mode</p>
<hr/>
<button class="btn btn-login">OK</button>
</div>
</div>
<script src="../../js/script.js"></script>
</body>
</html>