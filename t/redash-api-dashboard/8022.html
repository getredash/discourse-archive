<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet"/>
<link href="../../css/checklist_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_theme_2_be4cb2b86ec06123c5e974acd20fd933d14b129d.css" rel="stylesheet"/>
<link href="../../css/discourse-adplugin_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-akismet_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-cakeday_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-chat-integration_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-details_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-footnote_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-lazy-videos_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-local-dates_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/color_definitions_base__2_8fd59ae1f286f43b3ff17996df07ea951685249d.css" rel="stylesheet"/>
<link href="../../css/style.css" rel="stylesheet"/>
<title>Redash API: /dashboard/</title></head>
<body>
<div class="navbar">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<div class="navbar-buttons">
<button class="btn btn-signup">Sign Up</button>
<button class="btn btn-login"><i class="fas fa-user"></i> Login</button>
<button class="btn btn-search"><i class="fas fa-search"></i></button>
<div class="navbar-toggle">
<div class="dots"></div>
<div class="dots"></div>
<div class="dots"></div>
</div>
</div>
</div>
<div class="sidebar">
<div class="sidebar-content">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<ul class="sidebar-grid">
<!-- <li><a href="#"><i class="fas fa-list-ul"></i> Topics</a></li> -->
<li><a href="../../page_0.html"><i class="fas fa-layer-group"></i> Topics</a></li>
<li><a href="../../users.html"><i class="fas fa-users"></i> Users</a></li>
<li><a href="../../about.html"><i class="fas fa-info-circle"></i> About</a></li>
<li><a href="../../faq.html"><i class="fas fa-question-circle"></i> FAQ</a></li>
<li><a href="../../groups.html"><i class="fas fa-users"></i> Groups</a></li>
<li><a href="../../badges.html"><i class="fas fa-certificate"></i> Badges</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#categories"><span>▼</span>Categories</a></h3>
<hr/>
<ul class="sidebar-grid categories">
<li>
<a class="badge-wrapper bullet" href="../../c/support/6.html">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name">Support</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/feature-requests/5.html">
<span class="badge-category-bg" style="background-color: #3AB54A"></span>
<span class="badge-category clear-badge">
<span class="category-name">Feature Requests</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/uncategorized/1.html">
<span class="badge-category-bg" style="background-color: #AB9364"></span>
<span class="badge-category clear-badge">
<span class="category-name">Uncategorized</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/development/7.html">
<span class="badge-category-bg" style="background-color: #8C6238"></span>
<span class="badge-category clear-badge">
<span class="category-name">Development</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/tips-tricks-query-examples/11.html">
<span class="badge-category-bg" style="background-color: #652D90"></span>
<span class="badge-category clear-badge" style="white-space: normal;">
<span class="category-name">Tips, Tricks &amp; Query Examples</span>
</span>
</a>
</li>
<li><a href="../../categories.html"><i class="fas fa-list-ul"></i> All categories</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#tags"><span>▼</span>Tags</a></h3>
<hr/>
<ul class="sidebar-grid tags">
<li><a href="../../tag/query_results.html"><i class="fas fa-tag"></i> query_results</a></li>
<li><a href="../../tag/feature-request.html"><i class="fas fa-tag"></i> feature-request</a></li>
<li><a href="../../tag/parameters.html"><i class="fas fa-tag"></i> parameters</a></li>
<li><a href="../../tag/visualizations.html"><i class="fas fa-tag"></i> visualizations</a></li>
<li><a href="../../tag/alerts.html"><i class="fas fa-tag"></i> alerts</a></li>
<li><a href="../../tags.html"><i class="fas fa-list-ul"></i> All tags</a></li>
</ul>
</div>
<div class="sidebar-footer">
            © 2023 <a href="https://discuss.redash.io/" target="_blank">discuss.redash.io</a>
</div>
</div>
<div class="overlay"></div>
<div class="content">
<div class="global-notice">
<div class="row">
<div class="alert alert-info alert-read-only" id="global-notice-alert-read-only">
<span class="text">This site is in read only mode. Please continue to browse, but replying, likes,
                        and other actions are disabled for now.</span>
</div>
</div>
</div>
<div class="imported_page" id="imported_page">
<div class="wrap" id="main-outlet" role="main">
<div id="topic-title">
<h1>
<a href="/t/redash-api-dashboard/8022">Redash API: /dashboard/</a>
</h1>
</div>
<div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
<meta content="Redash API: /dashboard/" itemprop="headline"/>
<meta content="Uncategorized" itemprop="articleSection"/>
<meta content="" itemprop="keywords"/>
<div itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
<meta content="Redash Discourse" itemprop="name"/>
<div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject">
<meta content="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/c07bc573841e1e4a0013ea3b6fe088a1534228a3.png" itemprop="url"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_1">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/dhughes.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/dhughes_avatar.png" tabindex="-1" width="48"/><span itemprop="name">dhughes</span></a>
</span>
<link href="https://discuss.redash.io/t/redash-api-dashboard/8022" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-02-15T21:44:25Z" itemprop="datePublished">
                    February 15, 2021,  9:44pm
                  </time>
<meta content="2021-02-15T21:44:25Z" itemprop="dateModified"/>
<span itemprop="position">1</span>
</span>
</div>
<div class="post" itemprop="articleBody">
<p>I like how the /query url works and you can download all of the SQL for each query. Handy. I’m trying to figure out the utility of the /dashboard/ API. I would sort of expect it to be similar to how you could import/build a dashboard using JSON parameters. But, I’ve looked at the dashboard output, and while I can see name, creator, user, etc. I don’t see any information about how it configures an actual visualization for a dashboard. Is there meant to someday be a separate API call for visualizations, or am I just missing it? All I can see is a big list of numbers in ‘layout’ which appears to be describing the layout of a dashboard, but no real useful way to take that information and build a dashboard in another Redash instance.</p>
<p>Ideally, the way to dump the visualizations in JSON format would be readily available so that it would be easy to recreate a dashboard on another instance, referencing the right queries, x axis, y axis, visualization type, groupings, stacking, etc.</p>
<p>Thoughts?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_2" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/dhughes.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/dhughes_avatar.png" tabindex="-1" width="48"/><span itemprop="name">dhughes</span></a>
</span>
<link href="https://discuss.redash.io/t/redash-api-dashboard/8022" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-02-16T00:37:05Z" itemprop="datePublished">
                    February 16, 2021, 12:37am
                  </time>
<meta content="2021-02-16T00:37:05Z" itemprop="dateModified"/>
<span itemprop="position">2</span>
</span>
</div>
<div class="post" itemprop="text">
<p>If I just print out the json, I notice that all of the ‘widget’ values are empty, which is a further puzzle:</p>
<p>examples/dashboard_export.py --redash-url <a href="https://192.168.10.139/redash" rel="noopener nofollow ugc">https://192.168.10.139/redash</a> --api-key ‘XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX’  | grep widgets<br/>
‘widgets’: None},<br/>
‘widgets’: None},<br/>
‘widgets’: None},<br/>
‘widgets’: None},</p>
<p>(I patterned dashboard_export.py from query_export.py)</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_3" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/k4s1m.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/k4s1m_avatar.png" tabindex="-1" width="48"/><span itemprop="name">k4s1m</span></a>
</span>
<link href="https://discuss.redash.io/t/redash-api-dashboard/8022" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-02-16T01:32:30Z" itemprop="datePublished">
                    February 16, 2021,  1:32am
                  </time>
<meta content="2021-02-16T01:32:30Z" itemprop="dateModified"/>
<span itemprop="position">3</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Can you share the contents of <code>export_dashboard.py</code>? Otherwise we can only guess…</p>
<p>The <code>dashboards</code> endpoint isn’t going to spit out <em>everything</em> you need to reconstruct a dashboard because that would mean duplicating data. The building blocks of Redash are queries. Queries can have visualizations. Dashboards contain widgets. Widgets may either be text boxes or references to visualizations. So a dashboard object is really just a list of references to visualizations and info about how to position those widgets on a screen.</p>
<p>To fully re-assemble a dashboard you will need to fetch its definition (position info and any text box widgets), then duplicate the queries and their visualizations which are referenced from the dashboard object. This is how the migration script works.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_4" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/dhughes.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/dhughes_avatar.png" tabindex="-1" width="48"/><span itemprop="name">dhughes</span></a>
</span>
<link href="https://discuss.redash.io/t/redash-api-dashboard/8022" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-02-16T02:17:37Z" itemprop="datePublished">
                    February 16, 2021,  2:17am
                  </time>
<meta content="2021-02-16T02:17:37Z" itemprop="dateModified"/>
<span itemprop="position">4</span>
</span>
</div>
<div class="post" itemprop="text">
<p>I can, but it’s a minor variation of export_query.py from redash_toolbelt, it just uses the dashboard API instead of query to collect the json.</p>
<p>def save_dashboards(dashboards):<br/>
for dash in dashboards:<br/>
filename = ‘dashboard_{}.json’.format(dash[‘id’])<br/>
pprint(dash)</p>
<p>The thing I’m interested in is the widget definition, fields, etc. But, I don’t see a way to get the widgets out. The dashboard itself is secondary, it’s the definitions to build the widgets that I’d love to be able to just export use to rebuild.</p>
<p>Like so:<br/>
<span class="math"> examples/dashboard_export.py --redash-url https://192.168.10.139/redash --api-key 'XXXXXXXXXXXXXXXXXXXXXXXX'  | grep -c widgets 
82
[doug@dh-sfdemo redash_toolbelt]</span> examples/dashboard_export.py --redash-url <a href="https://192.168.10.139/redash" rel="noopener nofollow ugc">https://192.168.10.139/redash</a> --api-key ‘XXXXXXXXXXXXXXXXXXXXXXXXX’  | grep widgets  | grep -cv None<br/>
0</p>
<p>82 widgets definitions from the dashboard json, but all of them are None for some reason.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_5" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/k4s1m.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/k4s1m_avatar.png" tabindex="-1" width="48"/><span itemprop="name">k4s1m</span></a>
</span>
<link href="https://discuss.redash.io/t/redash-api-dashboard/8022" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-02-16T06:01:55Z" itemprop="datePublished">
                    February 16, 2021,  6:01am
                  </time>
<meta content="2021-02-16T06:01:55Z" itemprop="dateModified"/>
<span itemprop="position">5</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Please share your dashboard export script. What you describe is totally possible (it’s how the semi-official <a href="https://gist.github.com/arikfr/d29db3617df5a8d547b4709a631f5b6a" rel="noopener nofollow ugc">migration script</a> works). But it sounds like your version has a bug that corrupts the widget definition and makes it <code>None</code> (the API cannot return a <code>None</code> definition for a widget <img alt=":wink:" class="emoji" src="assets/wink.png" title=":wink:"/>) . If you share your script we can find the bug.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_6" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/dhughes.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/dhughes_avatar.png" tabindex="-1" width="48"/><span itemprop="name">dhughes</span></a>
</span>
<link href="https://discuss.redash.io/t/redash-api-dashboard/8022" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-02-16T13:19:19Z" itemprop="datePublished">
                    February 16, 2021,  1:19pm
                  </time>
<meta content="2021-02-16T13:19:19Z" itemprop="dateModified"/>
<span itemprop="position">6</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Here’s the minimally complete version:</p>
<pre><code>def get_dashboards(url, api_key):
    dashboards = []
    headers = {'Authorization': 'Key {}'.format(api_key)}
    path = "{}/api/dashboards".format(url)
    has_more = True
    page = 1
    while has_more:
        response = requests.get(path, headers=headers, verify=False, params={'page': page}).json()
        try:
            dashboards.extend(response['results'])
            has_more = page * response['page_size'] + 1 &lt;= response['count']
            page += 1
        except KeyError:
            pprint(response)
            return []

    return dashboards

def save_dashboards(dashboards):
    for dash in dashboards:
        filename = 'dashboard_{}.json'.format(dash['id'])
        pprint(dash)

def main(redash_url, api_key):
    dashes = get_dashboards(redash_url, api_key)     
    save_dashboards(dashes)</code></pre>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_7" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/k4s1m.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/k4s1m_avatar.png" tabindex="-1" width="48"/><span itemprop="name">k4s1m</span></a>
</span>
<link href="https://discuss.redash.io/t/redash-api-dashboard/8022" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-02-16T13:33:44Z" itemprop="datePublished">
                    February 16, 2021,  1:33pm
                  </time>
<meta content="2021-02-16T13:33:44Z" itemprop="dateModified"/>
<span itemprop="position">7</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Thanks. The problem here is the script never pulls the complete dashboard object from the API. It’s using the “list dashboards” endpoint (<code>api/dashboards</code>) which only includes information needed to display a list of dashboards. You can get the full dashboard object from <code>api/dashboards/&lt;url-slug&gt;</code>.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_8" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/dhughes.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/dhughes_avatar.png" tabindex="-1" width="48"/><span itemprop="name">dhughes</span></a>
</span>
<link href="https://discuss.redash.io/t/redash-api-dashboard/8022" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-02-16T13:52:19Z" itemprop="datePublished">
                    February 16, 2021,  1:52pm
                  </time>
<meta content="2021-02-16T13:52:19Z" itemprop="dateModified"/>
<span itemprop="position">8</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Okay, thanks. I plan on contributing this back to the toolbelt when it’s working because I think it’s very useful for all kinds of purposes.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="overlay" id="modalOverlay" style="display: none;">
<div class="modal-content">
<p>Login or sign up disabled while the site is in read only mode</p>
<hr/>
<button class="btn btn-login">OK</button>
</div>
</div>
<script src="../../js/script.js"></script>
</body>
</html>