<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet"/>
<link href="../../css/checklist_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_theme_2_be4cb2b86ec06123c5e974acd20fd933d14b129d.css" rel="stylesheet"/>
<link href="../../css/discourse-adplugin_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-akismet_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-cakeday_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-chat-integration_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-details_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-footnote_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-lazy-videos_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-local-dates_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/color_definitions_base__2_8fd59ae1f286f43b3ff17996df07ea951685249d.css" rel="stylesheet"/>
<link href="../../css/style.css" rel="stylesheet"/>
<title>Self Hosted Redash Okta SAML login failed. Please try again later</title></head>
<body>
<div class="navbar">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<div class="navbar-buttons">
<button class="btn btn-signup">Sign Up</button>
<button class="btn btn-login"><i class="fas fa-user"></i> Login</button>
<button class="btn btn-search"><i class="fas fa-search"></i></button>
<div class="navbar-toggle">
<div class="dots"></div>
<div class="dots"></div>
<div class="dots"></div>
</div>
</div>
</div>
<div class="sidebar">
<div class="sidebar-content">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<ul class="sidebar-grid">
<!-- <li><a href="#"><i class="fas fa-list-ul"></i> Topics</a></li> -->
<li><a href="../../page_0.html"><i class="fas fa-layer-group"></i> Topics</a></li>
<li><a href="../../users.html"><i class="fas fa-users"></i> Users</a></li>
<li><a href="../../about.html"><i class="fas fa-info-circle"></i> About</a></li>
<li><a href="../../faq.html"><i class="fas fa-question-circle"></i> FAQ</a></li>
<li><a href="../../groups.html"><i class="fas fa-users"></i> Groups</a></li>
<li><a href="../../badges.html"><i class="fas fa-certificate"></i> Badges</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#categories"><span>▼</span>Categories</a></h3>
<hr/>
<ul class="sidebar-grid categories">
<li>
<a class="badge-wrapper bullet" href="../../c/support/6.html">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name">Support</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/feature-requests/5.html">
<span class="badge-category-bg" style="background-color: #3AB54A"></span>
<span class="badge-category clear-badge">
<span class="category-name">Feature Requests</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/uncategorized/1.html">
<span class="badge-category-bg" style="background-color: #AB9364"></span>
<span class="badge-category clear-badge">
<span class="category-name">Uncategorized</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/development/7.html">
<span class="badge-category-bg" style="background-color: #8C6238"></span>
<span class="badge-category clear-badge">
<span class="category-name">Development</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/tips-tricks-query-examples/11.html">
<span class="badge-category-bg" style="background-color: #652D90"></span>
<span class="badge-category clear-badge" style="white-space: normal;">
<span class="category-name">Tips, Tricks &amp; Query Examples</span>
</span>
</a>
</li>
<li><a href="../../categories.html"><i class="fas fa-list-ul"></i> All categories</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#tags"><span>▼</span>Tags</a></h3>
<hr/>
<ul class="sidebar-grid tags">
<li><a href="../../tag/query_results.html"><i class="fas fa-tag"></i> query_results</a></li>
<li><a href="../../tag/feature-request.html"><i class="fas fa-tag"></i> feature-request</a></li>
<li><a href="../../tag/parameters.html"><i class="fas fa-tag"></i> parameters</a></li>
<li><a href="../../tag/visualizations.html"><i class="fas fa-tag"></i> visualizations</a></li>
<li><a href="../../tag/alerts.html"><i class="fas fa-tag"></i> alerts</a></li>
<li><a href="../../tags.html"><i class="fas fa-list-ul"></i> All tags</a></li>
</ul>
</div>
<div class="sidebar-footer">
            © 2023 <a href="https://discuss.redash.io/" target="_blank">discuss.redash.io</a>
</div>
</div>
<div class="overlay"></div>
<div class="content">
<div class="global-notice">
<div class="row">
<div class="alert alert-info alert-read-only" id="global-notice-alert-read-only">
<span class="text">This site is in read only mode. Please continue to browse, but replying, likes,
                        and other actions are disabled for now.</span>
</div>
</div>
</div>
<div class="imported_page" id="imported_page">
<div class="wrap" id="main-outlet" role="main">
<div id="topic-title">
<h1>
<a href="/t/self-hosted-redash-okta-saml-login-failed-please-try-again-later/7559">Self Hosted Redash Okta SAML login failed. Please try again later</a>
</h1>
</div>
<div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
<meta content="Self Hosted Redash Okta SAML login failed. Please try again later" itemprop="headline"/>
<meta content="Uncategorized" itemprop="articleSection"/>
<meta content="" itemprop="keywords"/>
<div itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
<meta content="Redash Discourse" itemprop="name"/>
<div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject">
<meta content="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/c07bc573841e1e4a0013ea3b6fe088a1534228a3.png" itemprop="url"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_1">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/Hindi.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/Hindi_avatar.png" tabindex="-1" width="48"/><span itemprop="name">Hindi</span></a>
</span>
<link href="https://discuss.redash.io/t/self-hosted-redash-okta-saml-login-failed-please-try-again-later/7559" itemprop="mainEntityOfPage"/>
<link href="https://global.discourse-cdn.com/standard17/uploads/redash1/original/2X/f/f5e290ddcffb9b53e3838a4612e87e4d5ab87268.png" itemprop="image"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2020-11-13T13:00:25Z" itemprop="datePublished">
                    November 13, 2020,  1:00pm
                  </time>
<meta content="2020-11-13T13:00:25Z" itemprop="dateModified"/>
<span itemprop="position">1</span>
</span>
</div>
<div class="post" itemprop="articleBody">
<p>I configured OKTA SAML in Redash. But when I click on SAML Login button I’m redirected back with this error SAML login failed. Please try again later.<br/>
I found these in logs</p>
<blockquote>
<p>server_1     | [2020-11-13 12:42:17,400][PID:14][INFO][saml2.entity] HTTP REDIRECT<br/>
server_1     | [2020-11-13 12:42:17,404][PID:14][INFO][metrics] method=GET path=/saml/login endpoint=saml_auth_sp_initiated status=302 content_type=text/html; charset=utf-8 content_length=1515 duration=2452.69 query_count=1 query_duration=7.59<br/>
server_1     | [2020-11-13 12:42:17,418][PID:14][INFO][werkzeug] 10.0.2.2 - - [13/Nov/2020 12:42:17] “GET /saml/login?next=%2F HTTP/1.1” 302 -<br/>
server_1     | [2020-11-13 12:42:22,572][PID:14][INFO][saml2.response] status: &lt;ns0:Status xmlns:ns0=“urn:oasis:names:tc:SAML:2.0:protocol”&gt;&lt;ns0:StatusCode Value=“urn:oasis:names:tc:SAML:2.0:status:Success” /&gt;&lt;/ns0:Status&gt;<br/>
server_1     | [2020-11-13 12:42:22,661][PID:14][ERROR][saml2.response] Exception on conditions: Can’t use response yet: (now=2020-11-13T12:42:22Z + slack=0) &lt;= notbefore=2020-11-13T12:48:47.290Z<br/>
server_1     | [2020-11-13 12:42:22,662][PID:14][ERROR][saml2.client_base] XML parse error: Can’t use response yet: (now=2020-11-13T12:42:22Z + slack=0) &lt;= notbefore=2020-11-13T12:48:47.290Z<br/>
server_1     | [2020-11-13 12:42:22,663][PID:14][ERROR][saml_auth] Failed to parse SAML response<br/>
server_1     | Traceback (most recent call last):<br/>
server_1     |   File “/app/redash/authentication/saml_auth.py”, line 108, in idp_initiated<br/>
server_1     |     request.form[“SAMLResponse”], entity.BINDING_HTTP_POST<br/>
server_1     |   File “/usr/local/lib/python3.7/site-packages/saml2/client_base.py”, line 711, in parse_authn_request_response<br/>
server_1     |     binding, **kwargs)<br/>
server_1     |   File “/usr/local/lib/python3.7/site-packages/saml2/entity.py”, line 1195, in _parse_response<br/>
server_1     |     response = response.verify(keys)<br/>
server_1     |   File “/usr/local/lib/python3.7/site-packages/saml2/response.py”, line 1049, in verify<br/>
server_1     |     if self.parse_assertion(keys):<br/>
server_1     |   File “/usr/local/lib/python3.7/site-packages/saml2/response.py”, line 935, in parse_assertion<br/>
server_1     |     if not self._assertion(assertion, False):<br/>
server_1     |   File “/usr/local/lib/python3.7/site-packages/saml2/response.py”, line 815, in _assertion<br/>
server_1     |     if not self.condition_ok():<br/>
server_1     |   File “/usr/local/lib/python3.7/site-packages/saml2/response.py”, line 604, in condition_ok<br/>
server_1     |     validate_before(conditions.not_before, self.timeslack)<br/>
server_1     |   File “/usr/local/lib/python3.7/site-packages/saml2/validate.py”, line 113, in validate_before<br/>
server_1     |     “&lt;= notbefore=%s” % (now_str, slack, not_before))<br/>
server_1     | saml2.validate.ToEarly: Can’t use response yet: (now=2020-11-13T12:42:22Z + slack=0) &lt;= notbefore=2020-11-13T12:48:47.290Z<br/>
server_1     | [2020-11-13 12:42:22,675][PID:14][INFO][metrics] method=POST path=/saml/callback endpoint=saml_auth_idp_initiated status=302 content_type=text/html; charset=utf-8 content_length=219 duration=3190.59 query_count=1 query_duration=6.73<br/>
server_1     | [2020-11-13 12:42:22,710][PID:14][INFO][werkzeug] 10.0.2.2 - - [13/Nov/2020 12:42:22] “POST /saml/callback?org_slug=default HTTP/1.1” 302 -<br/>
server_1     | [2020-11-13 12:42:22,757][PID:14][INFO][metrics] method=GET path=/login endpoint=redash_login status=200 content_type=text/html; charset=utf-8 content_length=2198 duration=14.06 query_count=1 query_duration=4.20</p>
</blockquote>
<p><div class="lightbox-wrapper"><a class="lightbox" data-download-href="/uploads/short-url/z5cow1OlJL0VEWs7FgzMcOvTNDW.png?dl=1" href="https://global.discourse-cdn.com/standard17/uploads/redash1/original/2X/f/f5e290ddcffb9b53e3838a4612e87e4d5ab87268.png" rel="noopener nofollow ugc" title="image"><img alt="image" data-base62-sha1="z5cow1OlJL0VEWs7FgzMcOvTNDW" data-small-upload="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/2X/f/f5e290ddcffb9b53e3838a4612e87e4d5ab87268_2_10x10.png" height="233" src="assets/f5e290ddcffb9b53e3838a4612e87e4d5ab87268_2_517x233.png" srcset="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/2X/f/f5e290ddcffb9b53e3838a4612e87e4d5ab87268_2_517x233.png, https://global.discourse-cdn.com/standard17/uploads/redash1/original/2X/f/f5e290ddcffb9b53e3838a4612e87e4d5ab87268.png 1.5x, https://global.discourse-cdn.com/standard17/uploads/redash1/original/2X/f/f5e290ddcffb9b53e3838a4612e87e4d5ab87268.png 2x" width="517"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">757×342 13.7 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div><br/>
<div class="lightbox-wrapper"><a class="lightbox" data-download-href="/uploads/short-url/6WqNuhdHRUfOmR4YEwAIAzRSUdh.png?dl=1" href="https://global.discourse-cdn.com/standard17/uploads/redash1/original/2X/3/30a7f8fbc28ed91b2e588c9c832e27b0a19d7657.png" rel="noopener nofollow ugc" title="image"><img alt="image" data-base62-sha1="6WqNuhdHRUfOmR4YEwAIAzRSUdh" data-small-upload="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/2X/3/30a7f8fbc28ed91b2e588c9c832e27b0a19d7657_2_10x10.png" height="375" src="assets/30a7f8fbc28ed91b2e588c9c832e27b0a19d7657_2_480x375.png" srcset="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/2X/3/30a7f8fbc28ed91b2e588c9c832e27b0a19d7657_2_480x375.png, https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/2X/3/30a7f8fbc28ed91b2e588c9c832e27b0a19d7657_2_720x562.png 1.5x, https://global.discourse-cdn.com/standard17/uploads/redash1/original/2X/3/30a7f8fbc28ed91b2e588c9c832e27b0a19d7657.png 2x" width="480"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">756×590 33.6 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_2" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/k4s1m.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/k4s1m_avatar.png" tabindex="-1" width="48"/><span itemprop="name">k4s1m</span></a>
</span>
<link href="https://discuss.redash.io/t/self-hosted-redash-okta-saml-login-failed-please-try-again-later/7559" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2020-11-17T16:47:27Z" itemprop="datePublished">
                    November 17, 2020,  4:47pm
                  </time>
<meta content="2020-11-17T16:47:27Z" itemprop="dateModified"/>
<span itemprop="position">2</span>
</span>
</div>
<div class="post" itemprop="text">
<p>This is happening because there is a clock disagreement between Okta and your instance of Redash. When the clocks aren’t synchronized, the two servers can’t agree the answer to the question: “What time is it?” And when this happens, authentication fails. Try setting the system time on your Redash server using an NTP server. Or just manually set it and see if that helps.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_3" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/Hindi.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/Hindi_avatar.png" tabindex="-1" width="48"/><span itemprop="name">Hindi</span></a>
</span>
<link href="https://discuss.redash.io/t/self-hosted-redash-okta-saml-login-failed-please-try-again-later/7559" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2020-11-19T06:56:59Z" itemprop="datePublished">
                    November 19, 2020,  6:56am
                  </time>
<meta content="2020-11-19T06:56:59Z" itemprop="dateModified"/>
<span itemprop="position">3</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Thanks I will try that out</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="overlay" id="modalOverlay" style="display: none;">
<div class="modal-content">
<p>Login or sign up disabled while the site is in read only mode</p>
<hr/>
<button class="btn btn-login">OK</button>
</div>
</div>
<script src="../../js/script.js"></script>
</body>
</html>