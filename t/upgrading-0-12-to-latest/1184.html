<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet"/>
<link href="../../css/checklist_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_theme_2_be4cb2b86ec06123c5e974acd20fd933d14b129d.css" rel="stylesheet"/>
<link href="../../css/discourse-adplugin_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-akismet_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-cakeday_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-chat-integration_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-details_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-footnote_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-lazy-videos_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-local-dates_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/color_definitions_base__2_8fd59ae1f286f43b3ff17996df07ea951685249d.css" rel="stylesheet"/>
<link href="../../css/style.css" rel="stylesheet"/>
<title>Upgrading 0.12 to latest</title></head>
<body>
<div class="navbar">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<div class="navbar-buttons">
<button class="btn btn-signup">Sign Up</button>
<button class="btn btn-login"><i class="fas fa-user"></i> Login</button>
<button class="btn btn-search"><i class="fas fa-search"></i></button>
<div class="navbar-toggle">
<div class="dots"></div>
<div class="dots"></div>
<div class="dots"></div>
</div>
</div>
</div>
<div class="sidebar">
<div class="sidebar-content">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<ul class="sidebar-grid">
<!-- <li><a href="#"><i class="fas fa-list-ul"></i> Topics</a></li> -->
<li><a href="../../page_0.html"><i class="fas fa-layer-group"></i> Topics</a></li>
<li><a href="../../users.html"><i class="fas fa-users"></i> Users</a></li>
<li><a href="../../about.html"><i class="fas fa-info-circle"></i> About</a></li>
<li><a href="../../faq.html"><i class="fas fa-question-circle"></i> FAQ</a></li>
<li><a href="../../groups.html"><i class="fas fa-users"></i> Groups</a></li>
<li><a href="../../badges.html"><i class="fas fa-certificate"></i> Badges</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#categories"><span>▼</span>Categories</a></h3>
<hr/>
<ul class="sidebar-grid categories">
<li>
<a class="badge-wrapper bullet" href="../../c/support/6.html">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name">Support</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/feature-requests/5.html">
<span class="badge-category-bg" style="background-color: #3AB54A"></span>
<span class="badge-category clear-badge">
<span class="category-name">Feature Requests</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/uncategorized/1.html">
<span class="badge-category-bg" style="background-color: #AB9364"></span>
<span class="badge-category clear-badge">
<span class="category-name">Uncategorized</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/development/7.html">
<span class="badge-category-bg" style="background-color: #8C6238"></span>
<span class="badge-category clear-badge">
<span class="category-name">Development</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/tips-tricks-query-examples/11.html">
<span class="badge-category-bg" style="background-color: #652D90"></span>
<span class="badge-category clear-badge" style="white-space: normal;">
<span class="category-name">Tips, Tricks &amp; Query Examples</span>
</span>
</a>
</li>
<li><a href="../../categories.html"><i class="fas fa-list-ul"></i> All categories</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#tags"><span>▼</span>Tags</a></h3>
<hr/>
<ul class="sidebar-grid tags">
<li><a href="../../tag/query_results.html"><i class="fas fa-tag"></i> query_results</a></li>
<li><a href="../../tag/feature-request.html"><i class="fas fa-tag"></i> feature-request</a></li>
<li><a href="../../tag/parameters.html"><i class="fas fa-tag"></i> parameters</a></li>
<li><a href="../../tag/visualizations.html"><i class="fas fa-tag"></i> visualizations</a></li>
<li><a href="../../tag/alerts.html"><i class="fas fa-tag"></i> alerts</a></li>
<li><a href="../../tags.html"><i class="fas fa-list-ul"></i> All tags</a></li>
</ul>
</div>
<div class="sidebar-footer">
            © 2023 <a href="https://discuss.redash.io/" target="_blank">discuss.redash.io</a>
</div>
</div>
<div class="overlay"></div>
<div class="content">
<div class="global-notice">
<div class="row">
<div class="alert alert-info alert-read-only" id="global-notice-alert-read-only">
<span class="text">This site is in read only mode. Please continue to browse, but replying, likes,
                        and other actions are disabled for now.</span>
</div>
</div>
</div>
<div class="imported_page" id="imported_page">
<div class="wrap" id="main-outlet" role="main">
<div id="topic-title">
<h1>
<a href="/t/upgrading-0-12-to-latest/1184">Upgrading 0.12 to latest</a>
</h1>
<div class="topic-category" itemscope="" itemtype="http://schema.org/BreadcrumbList">
<span itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
<a class="badge-wrapper bullet" href="../../c/support/6.html" itemprop="item">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name" itemprop="name">Support</span>
</span>
</a>
<meta content="1" itemprop="position"/>
</span>
<span itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
<a class="badge-wrapper bullet" href="../../c/support/support-self-hosted/9.html" itemprop="item">
<span class="badge-category-bg" style="background-color: #AB9364"></span>
<span class="badge-category clear-badge">
<span class="category-name" itemprop="name">Self Hosted Redash Support</span>
</span>
</a>
<meta content="2" itemprop="position"/>
</span>
</div>
</div>
<div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
<meta content="Upgrading 0.12 to latest" itemprop="headline"/>
<meta content="Self Hosted Redash Support" itemprop="articleSection"/>
<meta content="" itemprop="keywords"/>
<div itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
<meta content="Redash Discourse" itemprop="name"/>
<div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject">
<meta content="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/c07bc573841e1e4a0013ea3b6fe088a1534228a3.png" itemprop="url"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_1">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/dncpax.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/dncpax_avatar.png" tabindex="-1" width="48"/><span itemprop="name">dncpax</span></a>
</span>
<link href="https://discuss.redash.io/t/upgrading-0-12-to-latest/1184" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2017-10-18T14:41:23Z" itemprop="datePublished">
                    October 18, 2017,  2:41pm
                  </time>
<meta content="2017-10-18T14:41:23Z" itemprop="dateModified"/>
<span itemprop="position">1</span>
</span>
</div>
<div class="post" itemprop="articleBody">
<p>Yet another upgrade thread - I apologize…</p>
<p>Trying to upgrade my 0.12 instance on ubuntu. I wouldn’t mind going to 1.0.x first but couldn’t figure out a way to.</p>
<p>Anyway, I’m getting a connection to pgsql error running migrations.</p>
<p>My .env has this config:<br/>
REDASH_DATABASE_URL=“postgresql:///redash:pwd@192.168.8.10/redash012rc”</p>
<p>I have a named database (redash012rc), and user:pwd.<br/>
I can connect to the database from a remote client so I’m guessing db connectivity is ok.</p>
<p>Any clues? Putting the error bellow.</p>
<p>Thanks,<br/>
Duarte</p>
<p>Error:<br/>
arcims@vboxredash:~$ sudo ./redash_upgrade_10.py<br/>
Starting Redash upgrade:<br/>
Found version: 2.0.0<br/>
Current version: 0.12.0+b2093</p>
<ul>
<li>Before doing an upgrade, please make sure you have a backup.</li>
<li>If you have any issues, please refer to the troubleshooting section in the upgrade guide:<br/>
<a href="https://redash.io/help-onpremise/maintenance/how-to-upgrade-redash.html" rel="nofollow noopener">https://redash.io/help-onpremise/maintenance/how-to-upgrade-redash.html</a>
</li>
<li>If the upgrade guide doesn’t help, you can ask for help on the forum (<a href="http://discuss.redash.io">http://discuss.redash.io</a>).</li>
</ul>
<p>Full CHANGELOG for this release: <a href="https://github.com/getredash/redash/blob/master/CHANGELOG.md#v200---2017-08-08" rel="nofollow noopener">https://github.com/getredash/redash/blob/master/CHANGELOG.md#v200---2017-08-08</a><br/>
Continue with upgrade? (y/n): y<br/>
Downloading release tarball…<br/>
Unpacking to: redash.2.0.0.b2990…<br/>
Changing ownership to redash…<br/>
Linking .env file…<br/>
Installing new Python packages (if needed)…<br/>
Running migrations (if needed)…<br/>
Failed running: sudo -u redash bin/run ./manage.py db upgrade<br/>
Exit status: 1<br/>
Output:<br/>
Traceback (most recent call last):<br/>
File “/opt/redash/redash.2.0.0.b2990/manage.py”, line 9, in <br/>
manager()<br/>
File “/usr/local/lib/python2.7/dist-packages/click/core.py”, line 716, in <strong>call</strong><br/>
return self.main(*args, **kwargs)<br/>
File “/usr/local/lib/python2.7/dist-packages/flask/cli.py”, line 345, in main<br/>
return AppGroup.main(self, *args, **kwargs)<br/>
File “/usr/local/lib/python2.7/dist-packages/click/core.py”, line 696, in main<br/>
rv = self.invoke(ctx)<br/>
File “/usr/local/lib/python2.7/dist-packages/click/core.py”, line 1060, in invoke<br/>
return _process_result(sub_ctx.command.invoke(sub_ctx))<br/>
File “/usr/local/lib/python2.7/dist-packages/click/core.py”, line 1060, in invoke<br/>
return _process_result(sub_ctx.command.invoke(sub_ctx))<br/>
File “/usr/local/lib/python2.7/dist-packages/click/core.py”, line 889, in invoke<br/>
return ctx.invoke(self.callback, **ctx.params)<br/>
File “/usr/local/lib/python2.7/dist-packages/click/core.py”, line 534, in invoke<br/>
return callback(*args, **kwargs)<br/>
File “/usr/local/lib/python2.7/dist-packages/click/decorators.py”, line 17, in new_func<br/>
return f(get_current_context(), *args, **kwargs)<br/>
File “/usr/local/lib/python2.7/dist-packages/flask/cli.py”, line 229, in decorator<br/>
return __ctx.invoke(f, *args, **kwargs)<br/>
File “/usr/local/lib/python2.7/dist-packages/click/core.py”, line 534, in invoke<br/>
return callback(*args, **kwargs)<br/>
File “/usr/local/lib/python2.7/dist-packages/flask_migrate/cli.py”, line 132, in upgrade<br/>
_upgrade(directory, revision, sql, tag, x_arg)<br/>
File “/usr/local/lib/python2.7/dist-packages/flask_migrate/<strong>init</strong>.py”, line 239, in upgrade<br/>
command.upgrade(config, revision, sql=sql, tag=tag)<br/>
File “/usr/local/lib/python2.7/dist-packages/alembic/command.py”, line 254, in upgrade<br/>
script.run_env()<br/>
File “/usr/local/lib/python2.7/dist-packages/alembic/script/base.py”, line 425, in run_env<br/>
util.load_python_file(self.dir, ‘env.py’)<br/>
File “/usr/local/lib/python2.7/dist-packages/alembic/util/pyfiles.py”, line 81, in load_python_file<br/>
module = load_module_py(module_id, path)<br/>
File “/usr/local/lib/python2.7/dist-packages/alembic/util/compat.py”, line 141, in load_module_py<br/>
mod = imp.load_source(module_id, path, fp)<br/>
File “migrations/env.py”, line 87, in <br/>
run_migrations_online()<br/>
File “migrations/env.py”, line 72, in run_migrations_online<br/>
connection = engine.connect()<br/>
File “/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py”, line 2082, in connect<br/>
return self._connection_cls(self, **kwargs)<br/>
File “/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py”, line 90, in <strong>init</strong><br/>
if connection is not None else engine.raw_connection()<br/>
File “/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py”, line 2168, in raw_connection<br/>
self.pool.unique_connection, _connection)<br/>
File “/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py”, line 2142, in _wrap_pool_connect<br/>
e, dialect, self)<br/>
File “/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py”, line 1456, in _handle_dbapi_exception_noconnection<br/>
exc_info<br/>
File “/usr/local/lib/python2.7/dist-packages/sqlalchemy/util/compat.py”, line 202, in raise_from_cause<br/>
reraise(type(exception), exception, tb=exc_tb, cause=cause)<br/>
File “/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py”, line 2138, in _wrap_pool_connect<br/>
return fn()<br/>
File “/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py”, line 328, in unique_connection<br/>
return _ConnectionFairy._checkout(self)<br/>
File “/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py”, line 766, in _checkout<br/>
fairy = _ConnectionRecord.checkout(pool)<br/>
File “/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py”, line 516, in checkout<br/>
rec = pool._do_get()<br/>
File “/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py”, line 1229, in _do_get<br/>
return self._create_connection()<br/>
File “/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py”, line 333, in _create_connection<br/>
return _ConnectionRecord(self)<br/>
File “/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py”, line 461, in <strong>init</strong><br/>
self.__connect(first_connect_check=True)<br/>
File “/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py”, line 651, in __connect<br/>
connection = pool._invoke_creator(self)<br/>
File “/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/strategies.py”, line 105, in connect<br/>
return dialect.connect(*cargs, **cparams)<br/>
File “/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/default.py”, line 392, in connect<br/>
return self.dbapi.connect(*cargs, **cparams)<br/>
File “/usr/local/lib/python2.7/dist-packages/psycopg2/<strong>init</strong>.py”, line 164, in connect<br/>
conn = _connect(dsn, connection_factory=connection_factory, async=async)<br/>
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) could not connect to server: No such file or directory<br/>
Is the server running locally and accepting<br/>
connections on Unix domain socket “/var/run/postgresql/.s.PGSQL.5432”?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_2" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/dncpax.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/dncpax_avatar.png" tabindex="-1" width="48"/><span itemprop="name">dncpax</span></a>
</span>
<link href="https://discuss.redash.io/t/upgrading-0-12-to-latest/1184" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2017-10-18T14:52:22Z" itemprop="datePublished">
                    October 18, 2017,  2:52pm
                  </time>
<meta content="2017-10-18T14:52:22Z" itemprop="dateModified"/>
<span itemprop="position">2</span>
</span>
</div>
<div class="post" itemprop="text">
<p>uau… stupid… turns out I had 3 slashes in my pgsql url… wrong. It should be:</p>
<p>REDASH_DATABASE_URL=“postgresql://redash:pwd@192.168.8.10/redash012rc”</p>
<p>For anyone this blind to know.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_3" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/arikfr.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/arikfr_avatar.png" tabindex="-1" width="48"/><span itemprop="name">arikfr</span></a>
</span>
<link href="https://discuss.redash.io/t/upgrading-0-12-to-latest/1184" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2017-10-18T14:57:58Z" itemprop="datePublished">
                    October 18, 2017,  2:57pm
                  </time>
<meta content="2017-10-18T14:57:58Z" itemprop="dateModified"/>
<span itemprop="position">3</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Was about to suggest checking this… Did it solve your issue?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_4" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/dncpax.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/dncpax_avatar.png" tabindex="-1" width="48"/><span itemprop="name">dncpax</span></a>
</span>
<link href="https://discuss.redash.io/t/upgrading-0-12-to-latest/1184" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2017-10-18T15:00:22Z" itemprop="datePublished">
                    October 18, 2017,  3:00pm
                  </time>
<meta content="2017-10-18T15:00:22Z" itemprop="dateModified"/>
<span itemprop="position">4</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Having a look now. Something must have gone wrong. I got the upgrade to succeed without errors, but all queries disappeared. When querying redash metada queries table I got:</p>
<p>Error running query: (psycopg2.ProgrammingError) column queries.version does not exist LINE 1: … AS queries_created_at, queries.id AS queries_id, queries.ve… ^</p>
<p>Strange… it’s a vm I can rollback and try again…</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="2" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_5" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/arikfr.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/arikfr_avatar.png" tabindex="-1" width="48"/><span itemprop="name">arikfr</span></a>
</span>
<link href="https://discuss.redash.io/t/upgrading-0-12-to-latest/1184" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2017-10-18T15:14:56Z" itemprop="datePublished">
                    October 18, 2017,  3:14pm
                  </time>
<meta content="2017-10-18T15:14:56Z" itemprop="dateModified"/>
<span itemprop="position">5</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Seems like one (or more) of the migrations wasn’t applied.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_6" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/dncpax.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/dncpax_avatar.png" tabindex="-1" width="48"/><span itemprop="name">dncpax</span></a>
</span>
<link href="https://discuss.redash.io/t/upgrading-0-12-to-latest/1184" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2017-10-18T15:16:50Z" itemprop="datePublished">
                    October 18, 2017,  3:16pm
                  </time>
<meta content="2017-10-18T15:16:50Z" itemprop="dateModified"/>
<span itemprop="position">6</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Can you think of a fast way to go to 1.0.x first?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_7" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/dncpax.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/dncpax_avatar.png" tabindex="-1" width="48"/><span itemprop="name">dncpax</span></a>
</span>
<link href="https://discuss.redash.io/t/upgrading-0-12-to-latest/1184" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2017-10-18T16:46:00Z" itemprop="datePublished">
                    October 18, 2017,  4:46pm
                  </time>
<meta content="2017-10-18T16:46:00Z" itemprop="dateModified"/>
<span itemprop="position">7</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Turns out it’s easy. Edit script upgrade, function get_release, just change this line from:<br/>
<code>release = response.json()[0]</code></p>
<p>To<br/>
<code>release = response.json()[2]</code></p>
<p>This will get v 1.0.1<br/>
Releases are:<br/>
0 = 2.0<br/>
1 = 1.0.3<br/>
2 = 1.0.1<br/>
etc.</p>
<p>I upgraded to 1.0.1 and got the same vanishing queries problem…</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_8" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/dncpax.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/dncpax_avatar.png" tabindex="-1" width="48"/><span itemprop="name">dncpax</span></a>
</span>
<link href="https://discuss.redash.io/t/upgrading-0-12-to-latest/1184" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2017-10-18T17:25:19Z" itemprop="datePublished">
                    October 18, 2017,  5:25pm
                  </time>
<meta content="2017-10-18T17:25:19Z" itemprop="dateModified"/>
<span itemprop="position">8</span>
</span>
</div>
<div class="post" itemprop="text">
<p>So I noticed my version is 0.12.0+b2093.</p>
<p>Not 0.12.0.b2449…</p>
<p>Help…</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_9" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/dncpax.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/dncpax_avatar.png" tabindex="-1" width="48"/><span itemprop="name">dncpax</span></a>
</span>
<link href="https://discuss.redash.io/t/upgrading-0-12-to-latest/1184" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2017-10-18T18:17:32Z" itemprop="datePublished">
                    October 18, 2017,  6:17pm
                  </time>
<meta content="2017-10-18T18:17:32Z" itemprop="dateModified"/>
<span itemprop="position">9</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Looking at b2449 migrations I can see some I didn’t have.</p>
<p>How can I run migrations on 0.12? manage.py db does not exist yet…</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_10" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/edowdy.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/edowdy_avatar.png" tabindex="-1" width="48"/><span itemprop="name">edowdy</span></a>
</span>
<link href="https://discuss.redash.io/t/upgrading-0-12-to-latest/1184" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2017-10-18T19:43:41Z" itemprop="datePublished">
                    October 18, 2017,  7:43pm
                  </time>
<meta content="2017-10-18T19:43:41Z" itemprop="dateModified"/>
<span itemprop="position">10</span>
</span>
</div>
<div class="post" itemprop="text">
<p>When we upgraded to 2.0 which it looks like you are doing. We had to upgrade our Python packages as well.  Also, we ended up blowing away our existing data connections and recreating them to Big Query. Then in Redash we had to touch all our queries to point to the newly creation BQ connection. Not sure if that is your issue here, but hopefully it helps.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_11" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/dncpax.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/dncpax_avatar.png" tabindex="-1" width="48"/><span itemprop="name">dncpax</span></a>
</span>
<link href="https://discuss.redash.io/t/upgrading-0-12-to-latest/1184" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2017-10-19T13:27:29Z" itemprop="datePublished">
                    October 19, 2017,  1:27pm
                  </time>
<meta content="2017-10-19T13:27:29Z" itemprop="dateModified"/>
<span itemprop="position">11</span>
</span>
</div>
<div class="post" itemprop="text">
<p><a class="mention" href="/u/edowdy">@edowdy</a> thanks but my problem seems to be missing columns, possibly I don’t have the final 0.12 db model.</p>
<p><a class="mention" href="/u/arikfr">@arikfr</a> I tried running all migrations on 0.12 b2449 using the pre-1.0 command:<br/>
sudo -u redash PYTHONPATH=. bin/run python migrations/.py</p>
<p>But that got me a 500 error, regarding a template not found (index.html)…</p>
<p>I think I’ll have to install a fresh 0.12b2449 and manually retro fit the db model to my 0.12b2093. Then try to upgrade again.</p>
<p>Thanks.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_12" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/dncpax.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/dncpax_avatar.png" tabindex="-1" width="48"/><span itemprop="name">dncpax</span></a>
</span>
<link href="https://discuss.redash.io/t/upgrading-0-12-to-latest/1184" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2017-10-23T11:16:36Z" itemprop="datePublished">
                    October 23, 2017, 11:16am
                  </time>
<meta content="2017-10-23T11:16:36Z" itemprop="dateModified"/>
<span itemprop="position">12</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Hmm… no differences in db between 0.12.0b2093 and 0.12.0b2449…</p>
<p>Last chance… try to upgrade to v2.0 and manually apply diff from 0.12 to 2.0 and see if it runs.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_13" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/arikfr.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/arikfr_avatar.png" tabindex="-1" width="48"/><span itemprop="name">arikfr</span></a>
</span>
<link href="https://discuss.redash.io/t/upgrading-0-12-to-latest/1184" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2017-10-23T11:35:47Z" itemprop="datePublished">
                    October 23, 2017, 11:35am
                  </time>
<meta content="2017-10-23T11:35:47Z" itemprop="dateModified"/>
<span itemprop="position">13</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Are you running the migrations with a 0.12 codebase or from the v1/v2 codebase?</p>
<p>You should run them with a 0.12 codebase. Just fetch the tarball of the 0.12 version and run it from that directory. You better do this before upgrading the Python packages.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_14" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/dncpax.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/dncpax_avatar.png" tabindex="-1" width="48"/><span itemprop="name">dncpax</span></a>
</span>
<link href="https://discuss.redash.io/t/upgrading-0-12-to-latest/1184" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2017-10-23T11:50:04Z" itemprop="datePublished">
                    October 23, 2017, 11:50am
                  </time>
<meta content="2017-10-23T11:50:04Z" itemprop="dateModified"/>
<span itemprop="position">14</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Yes I think I already did that. redash then complained with a 500 error before upgrading to 2.0.</p>
<p>Let me try again and I’ll let you know.</p>
<p>Thanks for replying.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_15" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/dncpax.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/dncpax_avatar.png" tabindex="-1" width="48"/><span itemprop="name">dncpax</span></a>
</span>
<link href="https://discuss.redash.io/t/upgrading-0-12-to-latest/1184" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2017-10-26T09:27:47Z" itemprop="datePublished">
                    October 26, 2017,  9:27am
                  </time>
<meta content="2017-10-26T09:27:47Z" itemprop="dateModified"/>
<span itemprop="position">15</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Just to close this subject.</p>
<p>What I ended up doing is using pgdiff to get sql to migrate v0.12 to v2.0.<br/>
Run upgrade script just the 2 first steps: download and upgrade packages.<br/>
Run my sql script to effectively migrate the db.<br/>
Run upgrade script again but just the last 2 steps: point current to v2, and restart services.</p>
<p>I’ve tested v2 and seems ok. No errors for now. Going to look at logs just to be sure.</p>
<p>Thanks.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
<span class="post-likes">1 Like</span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_16" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/arikfr.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/arikfr_avatar.png" tabindex="-1" width="48"/><span itemprop="name">arikfr</span></a>
</span>
<link href="https://discuss.redash.io/t/upgrading-0-12-to-latest/1184" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2017-10-26T10:19:33Z" itemprop="datePublished">
                    October 26, 2017, 10:19am
                  </time>
<meta content="2017-10-26T10:19:33Z" itemprop="dateModified"/>
<span itemprop="position">16</span>
</span>
</div>
<div class="post" itemprop="text">
<p><img alt=":clap:" class="emoji" src="assets/clap.png" title=":clap:"/> glad you got it working.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="overlay" id="modalOverlay" style="display: none;">
<div class="modal-content">
<p>Login or sign up disabled while the site is in read only mode</p>
<hr/>
<button class="btn btn-login">OK</button>
</div>
</div>
<script src="../../js/script.js"></script>
</body>
</html>