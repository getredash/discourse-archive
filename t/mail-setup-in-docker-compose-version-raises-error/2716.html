<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet"/>
<link href="../../css/checklist_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/desktop_theme_2_be4cb2b86ec06123c5e974acd20fd933d14b129d.css" rel="stylesheet"/>
<link href="../../css/discourse-adplugin_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-akismet_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-cakeday_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-chat-integration_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-details_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-footnote_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-lazy-videos_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/discourse-local-dates_d86c892d7cd5311243d31a8f11787f4b0342874d.css" rel="stylesheet"/>
<link href="../../css/color_definitions_base__2_8fd59ae1f286f43b3ff17996df07ea951685249d.css" rel="stylesheet"/>
<link href="../../css/style.css" rel="stylesheet"/>
<title>Mail setup in docker-compose version raises ERROR</title></head>
<body>
<div class="navbar">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<div class="navbar-buttons">
<button class="btn btn-signup">Sign Up</button>
<button class="btn btn-login"><i class="fas fa-user"></i> Login</button>
<button class="btn btn-search"><i class="fas fa-search"></i></button>
<div class="navbar-toggle">
<div class="dots"></div>
<div class="dots"></div>
<div class="dots"></div>
</div>
</div>
</div>
<div class="sidebar">
<div class="sidebar-content">
<div class="logo"><a href="../../page_0.html"><img alt="" src="../../images/logo_redash.png" srcset=""/></a></div>
<ul class="sidebar-grid">
<!-- <li><a href="#"><i class="fas fa-list-ul"></i> Topics</a></li> -->
<li><a href="../../page_0.html"><i class="fas fa-layer-group"></i> Topics</a></li>
<li><a href="../../users.html"><i class="fas fa-users"></i> Users</a></li>
<li><a href="../../about.html"><i class="fas fa-info-circle"></i> About</a></li>
<li><a href="../../faq.html"><i class="fas fa-question-circle"></i> FAQ</a></li>
<li><a href="../../groups.html"><i class="fas fa-users"></i> Groups</a></li>
<li><a href="../../badges.html"><i class="fas fa-certificate"></i> Badges</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#categories"><span>▼</span>Categories</a></h3>
<hr/>
<ul class="sidebar-grid categories">
<li>
<a class="badge-wrapper bullet" href="../../c/support/6.html">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name">Support</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/feature-requests/5.html">
<span class="badge-category-bg" style="background-color: #3AB54A"></span>
<span class="badge-category clear-badge">
<span class="category-name">Feature Requests</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/uncategorized/1.html">
<span class="badge-category-bg" style="background-color: #AB9364"></span>
<span class="badge-category clear-badge">
<span class="category-name">Uncategorized</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/development/7.html">
<span class="badge-category-bg" style="background-color: #8C6238"></span>
<span class="badge-category clear-badge">
<span class="category-name">Development</span>
</span>
</a>
</li>
<li>
<a class="badge-wrapper bullet" href="../../c/tips-tricks-query-examples/11.html">
<span class="badge-category-bg" style="background-color: #652D90"></span>
<span class="badge-category clear-badge" style="white-space: normal;">
<span class="category-name">Tips, Tricks &amp; Query Examples</span>
</span>
</a>
</li>
<li><a href="../../categories.html"><i class="fas fa-list-ul"></i> All categories</a></li>
</ul>
<h3 style="font-size: 13px;"><a href="#tags"><span>▼</span>Tags</a></h3>
<hr/>
<ul class="sidebar-grid tags">
<li><a href="../../tag/query_results.html"><i class="fas fa-tag"></i> query_results</a></li>
<li><a href="../../tag/feature-request.html"><i class="fas fa-tag"></i> feature-request</a></li>
<li><a href="../../tag/parameters.html"><i class="fas fa-tag"></i> parameters</a></li>
<li><a href="../../tag/visualizations.html"><i class="fas fa-tag"></i> visualizations</a></li>
<li><a href="../../tag/alerts.html"><i class="fas fa-tag"></i> alerts</a></li>
<li><a href="../../tags.html"><i class="fas fa-list-ul"></i> All tags</a></li>
</ul>
</div>
<div class="sidebar-footer">
            © 2023 <a href="https://discuss.redash.io/" target="_blank">discuss.redash.io</a>
</div>
</div>
<div class="overlay"></div>
<div class="content">
<div class="global-notice">
<div class="row">
<div class="alert alert-info alert-read-only" id="global-notice-alert-read-only">
<span class="text">This site is in read only mode. Please continue to browse, but replying, likes,
                        and other actions are disabled for now.</span>
</div>
</div>
</div>
<div class="imported_page" id="imported_page">
<div class="wrap" id="main-outlet" role="main">
<div id="topic-title">
<h1>
<a href="/t/mail-setup-in-docker-compose-version-raises-error/2716">Mail setup in docker-compose version raises ERROR</a>
</h1>
<div class="topic-category" itemscope="" itemtype="http://schema.org/BreadcrumbList">
<span itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
<a class="badge-wrapper bullet" href="../../c/support/6.html" itemprop="item">
<span class="badge-category-bg" style="background-color: #BF1E2E"></span>
<span class="badge-category clear-badge">
<span class="category-name" itemprop="name">Support</span>
</span>
</a>
<meta content="1" itemprop="position"/>
</span>
<span itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
<a class="badge-wrapper bullet" href="../../c/support/support-self-hosted/9.html" itemprop="item">
<span class="badge-category-bg" style="background-color: #AB9364"></span>
<span class="badge-category clear-badge">
<span class="category-name" itemprop="name">Self Hosted Redash Support</span>
</span>
</a>
<meta content="2" itemprop="position"/>
</span>
</div>
</div>
<div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
<meta content="Mail setup in docker-compose version raises ERROR" itemprop="headline"/>
<meta content="Self Hosted Redash Support" itemprop="articleSection"/>
<meta content="" itemprop="keywords"/>
<div itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
<meta content="Redash Discourse" itemprop="name"/>
<div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject">
<meta content="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/c07bc573841e1e4a0013ea3b6fe088a1534228a3.png" itemprop="url"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_1">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/powerjin00.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/powerjin00_avatar.png" tabindex="-1" width="48"/><span itemprop="name">powerjin00</span></a>
</span>
<link href="https://discuss.redash.io/t/mail-setup-in-docker-compose-version-raises-error/2716" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2018-11-18T18:09:01Z" itemprop="datePublished">
                    November 18, 2018,  6:09pm
                  </time>
<meta content="2018-11-18T18:09:01Z" itemprop="dateModified"/>
<span itemprop="position">1</span>
</span>
</div>
<div class="post" itemprop="articleBody">
<p>I created a new account from mailgun and use it for Redash, but failed as below when I ran “docker-compose run --rm server manage send_test_mail”. Anyone running into the similar issue? Thanks for advice in advance.</p>
<p>docker-compose run --rm server manage send_test_mail<br/>
Starting redash_postgres_1 … done<br/>
Starting redash_redis_1    … done<br/>
[2018-11-18 18:04:37,740][PID:1][INFO][root] Generating grammar tables from /usr/lib/python2.7/lib2to3/Grammar.txt<br/>
[2018-11-18 18:04:37,758][PID:1][INFO][root] Generating grammar tables from /usr/lib/python2.7/lib2to3/PatternGrammar.txt<br/>
Traceback (most recent call last):<br/>
File “/app/manage.py”, line 9, in <br/>
manager()<br/>
File “/usr/local/lib/python2.7/dist-packages/click/core.py”, line 716, in <strong>call</strong><br/>
return self.main(*args, **kwargs)<br/>
File “/usr/local/lib/python2.7/dist-packages/flask/cli.py”, line 345, in main<br/>
return AppGroup.main(self, *args, **kwargs)<br/>
File “/usr/local/lib/python2.7/dist-packages/click/core.py”, line 696, in main<br/>
rv = self.invoke(ctx)<br/>
File “/usr/local/lib/python2.7/dist-packages/click/core.py”, line 1060, in invoke<br/>
return _process_result(sub_ctx.command.invoke(sub_ctx))<br/>
File “/usr/local/lib/python2.7/dist-packages/click/core.py”, line 889, in invoke<br/>
return ctx.invoke(self.callback, **ctx.params)<br/>
File “/usr/local/lib/python2.7/dist-packages/click/core.py”, line 534, in invoke<br/>
return callback(*args, **kwargs)<br/>
File “/usr/local/lib/python2.7/dist-packages/click/decorators.py”, line 17, in new_func<br/>
return f(get_current_context(), *args, **kwargs)<br/>
File “/usr/local/lib/python2.7/dist-packages/flask/cli.py”, line 229, in decorator<br/>
return __ctx.invoke(f, *args, **kwargs)<br/>
File “/usr/local/lib/python2.7/dist-packages/click/core.py”, line 534, in invoke<br/>
return callback(*args, **kwargs)<br/>
File “/app/redash/cli/<strong>init</strong>.py”, line 70, in send_test_mail<br/>
body=“Test message.”))<br/>
File “/usr/local/lib/python2.7/dist-packages/flask_mail.py”, line 491, in send<br/>
with self.connect() as connection:<br/>
File “/usr/local/lib/python2.7/dist-packages/flask_mail.py”, line 144, in <strong>enter</strong><br/>
self.host = self.configure_host()<br/>
File “/usr/local/lib/python2.7/dist-packages/flask_mail.py”, line 156, in configure_host<br/>
host = smtplib.SMTP_SSL(self.mail.server, self.mail.port)<br/>
File “/usr/lib/python2.7/smtplib.py”, line 801, in <strong>init</strong><br/>
SMTP.<strong>init</strong>(self, host, port, local_hostname, timeout)<br/>
File “/usr/lib/python2.7/smtplib.py”, line 256, in <strong>init</strong><br/>
(code, msg) = self.connect(host, port)<br/>
File “/usr/lib/python2.7/smtplib.py”, line 316, in connect<br/>
self.sock = self._get_socket(host, port, self.timeout)<br/>
File “/usr/lib/python2.7/smtplib.py”, line 806, in _get_socket<br/>
new_socket = socket.create_connection((host, port), timeout)<br/>
File “/usr/lib/python2.7/socket.py”, line 557, in create_connection<br/>
for res in getaddrinfo(host, port, 0, SOCK_STREAM):<br/>
socket.gaierror: [Errno -2] Name or service not known</p>
<p>**here is part of env for SMTP<br/>
REDASH_HOST=“172.22.9.2XX”<br/>
REDASH_MAIL_SERVER=“<a href="http://smtp.mailgun.org" rel="nofollow noopener">smtp.mailgun.org</a>”<br/>
REDASH_MAIL_PORT=587<br/>
REDASH_MAIL_USE_TLS=“true”<br/>
REDASH_MAIL_USE_SSL=“false”<br/>
<a href="mailto:REDASH_MAIL_USERNAME=%22postmaster@XXXXX.mailgun.org">REDASH_MAIL_USERNAME="postmaster@XXXXX.mailgun.org</a>"<br/>
REDASH_MAIL_PASSWORD=“d7fdf8ffcc3c65bee3ceca3fb1de30ba-XXXXXXX”<br/>
<a href="mailto:REDASH_MAIL_DEFAULT_SENDER=%22postmaster@XXXXX.mailgun.org">REDASH_MAIL_DEFAULT_SENDER="postmaster@XXXXX.mailgun.org</a>"</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_2" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/arikfr.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/arikfr_avatar.png" tabindex="-1" width="48"/><span itemprop="name">arikfr</span></a>
</span>
<link href="https://discuss.redash.io/t/mail-setup-in-docker-compose-version-raises-error/2716" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2018-11-20T13:24:18Z" itemprop="datePublished">
                    November 20, 2018,  1:24pm
                  </time>
<meta content="2018-11-20T13:24:18Z" itemprop="dateModified"/>
<span itemprop="position">2</span>
</span>
</div>
<div class="post" itemprop="text">
<aside class="quote no-group" data-post="1" data-topic="2716" data-username="powerjin00">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="https://avatars.discourse-cdn.com/v4/letter/p/e9bcb4/40.png" width="20"/> powerjin00:</div>
<blockquote>
<p>socket.gaierror: [Errno -2] Name or service not known</p>
</blockquote>
</aside>
<p>Looks like some DNS issue. Are you sure your container can access external networks?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_3" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/powerjin00.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/powerjin00_avatar.png" tabindex="-1" width="48"/><span itemprop="name">powerjin00</span></a>
</span>
<link href="https://discuss.redash.io/t/mail-setup-in-docker-compose-version-raises-error/2716" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2018-11-21T04:23:58Z" itemprop="datePublished">
                    November 21, 2018,  4:23am
                  </time>
<meta content="2018-11-21T04:23:58Z" itemprop="dateModified"/>
<span itemprop="position">3</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Thanks for advice. inside container fo redash_server_1, I was successfully able to send out an email via mailgun using cURL. Any other idea? Can you take a look at my env file to see if there is any incorrect config? Thanks.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_4" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/arikfr.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/arikfr_avatar.png" tabindex="-1" width="48"/><span itemprop="name">arikfr</span></a>
</span>
<link href="https://discuss.redash.io/t/mail-setup-in-docker-compose-version-raises-error/2716" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2018-11-21T14:49:55Z" itemprop="datePublished">
                    November 21, 2018,  2:49pm
                  </time>
<meta content="2018-11-21T14:49:55Z" itemprop="dateModified"/>
<span itemprop="position">4</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Using curl and their http API?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_5" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/powerjin00.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/powerjin00_avatar.png" tabindex="-1" width="48"/><span itemprop="name">powerjin00</span></a>
</span>
<link href="https://discuss.redash.io/t/mail-setup-in-docker-compose-version-raises-error/2716" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2018-11-21T16:24:43Z" itemprop="datePublished">
                    November 21, 2018,  4:24pm
                  </time>
<meta content="2018-11-21T16:24:43Z" itemprop="dateModified"/>
<span itemprop="position">5</span>
</span>
</div>
<div class="post" itemprop="text">
<p>I tried sending an email on the host running docker containers using both API and python send_email script. Both succeeded, but stil failed with “”.</p>
<p>Here is Python script I ran on the host. FYI, sone private info is masked on purpose.</p>
<p>import smtplib<br/>
def send_email(mail_user, mail_password, mail_recipient, subject, body):<br/>
FROM = mail_user<br/>
TO = mail_recipient if type(mail_recipient) is list else [mail_recipient]<br/>
SUBJECT = subject<br/>
TEXT = body</p>
<pre><code># Prepare actual message
message = """From: %s\nTo: %s\nSubject: %s\n\n%s
""" % (FROM, ", ".join(TO), SUBJECT, TEXT)
try:
    # server = smtplib.SMTP_SSL("smtp.mailgun.org", 465)
    # server.ehlo()

    server = smtplib.SMTP("smtp.mailgun.org", 587)
    server.ehlo()
    server.starttls()
    server.login(mail_user, mail_password)
    server.sendmail(FROM, TO, message)
    server.close()
    return 'successfully sent the mail'
except Exception as e:
    print(e)
    return "failed to send mail"
</code></pre>
<p>if <strong>name</strong> == “<strong>main</strong>”:<br/>
print(“hello”)<br/>
print(send_email(‘no-reply@k8XX.k1ong.com’,‘XXXX’,‘junXXXXX@gmail.com’,‘test in XXX’,‘hi Jun,’))</p>
<p>Here is the config of env</p>
<p>PYTHONUNBUFFERED=0<br/>
REDASH_LOG_LEVEL=INFO<br/>
REDASH_REDIS_URL=redis://redis:6379/0<br/>
POSTGRES_PASSWORD=kdZ5lV7xTo7ulPfXXXXX<br/>
REDASH_COOKIE_SECRET=iQgLv0vCNhmPxvWzdSXXXXX<br/>
REDASH_DATABASE_URL=postgresql://postgres:kdZ5lV7xTo7ulPXXXX@postgres/postgres<br/>
REDASH_HOST=“sXe-.XXXX.com”</p>
<p>REDASH_MAIL_SERVER=“<a href="http://smtp.mailgun.org" rel="nofollow noopener">smtp.mailgun.org</a>”<br/>
REDASH_MAIL_PORT=587<br/>
REDASH_MAIL_USE_TLS=“true”<br/>
REDASH_MAIL_USE_SSL=“false”<br/>
<a href="mailto:REDASH_MAIL_USERNAME=%22no-reply@k8XX.k1ong.com">REDASH_MAIL_USERNAME="no-reply@k8XX.k1ong.com</a>"<br/>
REDASH_MAIL_PASSWORD=“XXXX”<br/>
<a href="mailto:REDASH_MAIL_DEFAULT_SENDER=%22no-reply@k8XX.k1ong.com">REDASH_MAIL_DEFAULT_SENDER="no-reply@k8XX.k1ong.com</a>"</p>
<p>Any comment would be appreciated.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="2" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_6" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/powerjin00.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/powerjin00_avatar.png" tabindex="-1" width="48"/><span itemprop="name">powerjin00</span></a>
</span>
<link href="https://discuss.redash.io/t/mail-setup-in-docker-compose-version-raises-error/2716" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2018-11-21T16:28:22Z" itemprop="datePublished">
                    November 21, 2018,  4:28pm
                  </time>
<meta content="2018-11-21T16:28:22Z" itemprop="dateModified"/>
<span itemprop="position">6</span>
</span>
</div>
<div class="post" itemprop="text">
<p>another is info .</p>
<p>REDASH_HOST would be resolved to private IP. Should I specify shared public IO explicitly if it causes any issue?</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_7" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/arikfr.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/arikfr_avatar.png" tabindex="-1" width="48"/><span itemprop="name">arikfr</span></a>
</span>
<link href="https://discuss.redash.io/t/mail-setup-in-docker-compose-version-raises-error/2716" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2018-11-25T12:14:12Z" itemprop="datePublished">
                    November 25, 2018, 12:14pm
                  </time>
<meta content="2018-11-25T12:14:12Z" itemprop="dateModified"/>
<span itemprop="position">7</span>
</span>
</div>
<div class="post" itemprop="text">
<aside class="quote no-group" data-post="5" data-topic="2716" data-username="powerjin00">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="https://avatars.discourse-cdn.com/v4/letter/p/e9bcb4/40.png" width="20"/> powerjin00:</div>
<blockquote>
<p>Here is Python script I ran on the host.</p>
</blockquote>
</aside>
<p>Did you try running same script in the Docker container?</p>
<p>The Docker container runs with different network configuration, so the fact it works on the host doesn’t mean it will work in the container.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_8" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/kevinr.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/kevinr_avatar.png" tabindex="-1" width="48"/><span itemprop="name">kevinr</span></a>
</span>
<link href="https://discuss.redash.io/t/mail-setup-in-docker-compose-version-raises-error/2716" itemprop="mainEntityOfPage"/>
<link href="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/0d34d0571afed5e8b019663e3a717bb850d8abbe.png" itemprop="image"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-01-18T22:47:59Z" itemprop="datePublished">
                    January 18, 2019, 10:47pm
                  </time>
<meta content="2019-01-18T22:47:59Z" itemprop="dateModified"/>
<span itemprop="position">8</span>
</span>
</div>
<div class="post" itemprop="text">
<p>I’m having this exact issue. I’m running a VM in Google Compute Engine. Used the setup guide to import the official image. Here’s the command I ran and its output:</p>
<pre><code>root@redashserver:/opt/redash# docker-compose run --rm server manage send_test_mail
Starting redash_redis_1    ... done
Starting redash_postgres_1 ... done
[2019-01-18 22:43:54,920][PID:1][INFO][root] Generating grammar tables from /usr/lib/python2.7/lib2to3/Grammar.txt
[2019-01-18 22:43:54,950][PID:1][INFO][root] Generating grammar tables from /usr/lib/python2.7/lib2to3/PatternGrammar.txt
Traceback (most recent call last):
  File "/app/manage.py", line 9, in &lt;module&gt;
    manager()
  File "/usr/local/lib/python2.7/dist-packages/click/core.py", line 716, in __call__
    return self.main(*args, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/flask/cli.py", line 345, in main
    return AppGroup.main(self, *args, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/click/core.py", line 696, in main
    rv = self.invoke(ctx)
  File "/usr/local/lib/python2.7/dist-packages/click/core.py", line 1060, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
  File "/usr/local/lib/python2.7/dist-packages/click/core.py", line 889, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File "/usr/local/lib/python2.7/dist-packages/click/core.py", line 534, in invoke
    return callback(*args, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/click/decorators.py", line 17, in new_func
    return f(get_current_context(), *args, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/flask/cli.py", line 229, in decorator
    return __ctx.invoke(f, *args, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/click/core.py", line 534, in invoke
    return callback(*args, **kwargs)
  File "/app/redash/cli/__init__.py", line 68, in send_test_mail
    body="Test message."))
  File "/usr/local/lib/python2.7/dist-packages/flask_mail.py", line 491, in send
    with self.connect() as connection:
  File "/usr/local/lib/python2.7/dist-packages/flask_mail.py", line 144, in __enter__
    self.host = self.configure_host()
  File "/usr/local/lib/python2.7/dist-packages/flask_mail.py", line 156, in configure_host
    host = smtplib.SMTP_SSL(self.mail.server, self.mail.port)
  File "/usr/lib/python2.7/smtplib.py", line 801, in __init__
    SMTP.__init__(self, host, port, local_hostname, timeout)
  File "/usr/lib/python2.7/smtplib.py", line 256, in __init__
    (code, msg) = self.connect(host, port)
  File "/usr/lib/python2.7/smtplib.py", line 316, in connect
    self.sock = self._get_socket(host, port, self.timeout)
  File "/usr/lib/python2.7/smtplib.py", line 806, in _get_socket
    new_socket = socket.create_connection((host, port), timeout)
  File "/usr/lib/python2.7/socket.py", line 557, in create_connection
    for res in getaddrinfo(host, port, 0, SOCK_STREAM):
socket.gaierror: [Errno -2] Name or service not known
</code></pre>
<p>And here’s what my env settings look like:<br/>
<div class="lightbox-wrapper"><a class="lightbox" data-download-href="/uploads/short-url/1SPmkHci0oJMGLsrty0lMIg8Tlc.png?dl=1" href="https://global.discourse-cdn.com/standard17/uploads/redash1/original/1X/0d34d0571afed5e8b019663e3a717bb850d8abbe.png" rel="noopener nofollow ugc" title="2019-01-18%2016_41_50-root%40redashserver_%20_opt_redash"><img alt="2019-01-18%2016_41_50-root%40redashserver_%20_opt_redash" data-base62-sha1="1SPmkHci0oJMGLsrty0lMIg8Tlc" data-small-upload="https://global.discourse-cdn.com/standard17/uploads/redash1/optimized/1X/0d34d0571afed5e8b019663e3a717bb850d8abbe_2_10x10.png" height="262" src="assets/0d34d0571afed5e8b019663e3a717bb850d8abbe.png" width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">2019-01-18%2016_41_50-root%40redashserver_%20_opt_redash</span><span class="informations">732×279 7.34 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>I see the note about trying the script with the docker. Not sure exactly how that would be different or how I’d do that exactly. I’m guessing this might have something to do with firewall settings, but I don’t really know for sure on that.</p>
<p>Any ideas on how to resolve this error would be appreciated.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_9" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/powerjin00.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/powerjin00_avatar.png" tabindex="-1" width="48"/><span itemprop="name">powerjin00</span></a>
</span>
<link href="https://discuss.redash.io/t/mail-setup-in-docker-compose-version-raises-error/2716" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-01-18T23:35:00Z" itemprop="datePublished">
                    January 18, 2019, 11:35pm
                  </time>
<meta content="2019-01-18T23:35:00Z" itemprop="dateModified"/>
<span itemprop="position">9</span>
</span>
</div>
<div class="post" itemprop="text">
<p>sorry. I am still facing the same issue.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_10" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/kevinr.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/kevinr_avatar.png" tabindex="-1" width="48"/><span itemprop="name">kevinr</span></a>
</span>
<link href="https://discuss.redash.io/t/mail-setup-in-docker-compose-version-raises-error/2716" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-01-21T06:48:54Z" itemprop="datePublished">
                    January 21, 2019,  6:48am
                  </time>
<meta content="2019-01-21T06:48:54Z" itemprop="dateModified"/>
<span itemprop="position">10</span>
</span>
</div>
<div class="post" itemprop="text">
<p>I gotta figure this out because I would really like to get mailgun to work. It’s almost certainly a DNS issue, but since there’s no documentation on how the DNS is setup in the container it’s hard for me to troubleshoot. And I’ve had trouble getting the containers to actually startup if I try to do any modifcations with docker run.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_11" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/tcpeng.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/tcpeng_avatar.png" tabindex="-1" width="48"/><span itemprop="name">tcpeng</span></a>
</span>
<link href="https://discuss.redash.io/t/mail-setup-in-docker-compose-version-raises-error/2716" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-03-28T13:36:58Z" itemprop="datePublished">
                    March 28, 2019,  1:36pm
                  </time>
<meta content="2019-03-28T13:36:58Z" itemprop="dateModified"/>
<span itemprop="position">11</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Removing all double quotes in the env setting file works for me somehow</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
<span class="post-likes">1 Like</span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_12" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<a href="../../u/detail/hamesh.html" itemprop="url"><img alt="" class="avatar" height="48" loading="lazy" src="../../u/avatars/hamesh_avatar.png" tabindex="-1" width="48"/><span itemprop="name">hamesh</span></a>
</span>
<link href="https://discuss.redash.io/t/mail-setup-in-docker-compose-version-raises-error/2716" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2019-06-13T21:47:58Z" itemprop="datePublished">
                    June 13, 2019,  9:47pm
                  </time>
<meta content="2019-06-13T21:47:58Z" itemprop="dateModified"/>
<span itemprop="position">12</span>
</span>
</div>
<div class="post" itemprop="text">
<p>This solved the issue for me as well.  Removed all mail settings from docker-compose.xml and moved into env file, with no quotes.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="overlay" id="modalOverlay" style="display: none;">
<div class="modal-content">
<p>Login or sign up disabled while the site is in read only mode</p>
<hr/>
<button class="btn btn-login">OK</button>
</div>
</div>
<script src="../../js/script.js"></script>
</body>
</html>